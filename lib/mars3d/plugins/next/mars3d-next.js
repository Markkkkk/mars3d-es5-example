/**
 * Mars3D平台插件, Next版本新功能测试包  mars3d-next
 *
 * 版本信息：v3.5.0
 * 编译日期：2023-04-21 16:28:01
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：next测试插件 ，2023-03-18
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory((window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.mars3d));
})(this, (function (mars3d) { 
'use strict';var _0x386a36=_0x4dbc;(function(_0x5d4de2,_0x55cd5c){var _0x12004d=_0x4dbc,_0x4e5a61=_0x5d4de2();while(!![]){try{var _0x34476a=parseInt(_0x12004d(0xf8))/0x1+parseInt(_0x12004d(0x193))/0x2*(parseInt(_0x12004d(0xc3))/0x3)+-parseInt(_0x12004d(0xef))/0x4+parseInt(_0x12004d(0x162))/0x5+-parseInt(_0x12004d(0x14e))/0x6*(parseInt(_0x12004d(0x199))/0x7)+parseInt(_0x12004d(0x108))/0x8*(-parseInt(_0x12004d(0x1ec))/0x9)+-parseInt(_0x12004d(0xac))/0xa*(-parseInt(_0x12004d(0xa9))/0xb);if(_0x34476a===_0x55cd5c)break;else _0x4e5a61['push'](_0x4e5a61['shift']());}catch(_0x30776f){_0x4e5a61['push'](_0x4e5a61['shift']());}}}(_0x569f,0xd0a8c));function _0x569f(){var _0x2c6bac=['_firstPassInitialColor','hasOwnProperty','this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called','push','_tilesToRenderByTextureCount','errorEvent','Texture3','bottom','Rectangle','lastTilesCulled','QuadtreeTile','_onLayerAdded','_reload','OrthographicFrustum','GeometryInstance','_tileLoadQueueLow','_updateOutlineFrustum','ellipsoid','simpleIntersection','DefaultImageId','TileReplacementQueue','tilingScheme','coneVisibility','closeSmallTooltip','yCut','u_tileRectangle','ArcFrustum','_hasTerrainShadows','originalResult','function','fog','normalShadingSmooth','toRadians','shadowVisibilityShader','_lastSelectionResult','xmax','uniform\x20samplerCube\x20lightShadowMapCube','PixelDatatype','pitch','steps','\x0a\x20\x20\x20\x20\x20\x20\x20\x20color,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Cesium.Material\x20的\x20uniforms\x20不能使用数组\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20u_textures[','replace','primitive','apply','beginUpdate','parent','clone','tileProvider','lastMaxDepthVisited','toDegrees','positionCartographic','click','_createShadowMap','register','_tileReplacementQueue','Cartesian4','loadingDescendantLimit','notYetRenderableCount','loadingImagery','tail','graphic','_tileLoadQueueHigh','_mountedHook','SCENE2D','trimTiles','getAddHeight','textureWebMercator','getOwnPropertyDescriptors','defineProperty','symbol','_lastSelectionFrameNumber','_addedHook','6422841vhTSWF','_isPointVisibility','UNLOADED','classificationType','visibilitys','valueOf','_tileLoadProgressEvent','initializeTerrainHeights','multiplyByScalar','_outlineFrustumGraphic','ImageryLayerCollection','addEventListener','shadowMap','forEachLoadedTile','queueReprojectionCommands','Matrix4','fov','Cannot\x20call\x20a\x20class\x20as\x20a\x20function','longitude','_camera','_clearDraw','quadtree','outerCone','colors','loadTile','values','tilesWaitingForChildren','texture','texturesRendered',',\x20Culled:\x20','_updateCustomData','max','subtract','_startDrawHook','RENDERED','Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function','northwest','_imageryCache','Cartographic','\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inside\x20+=\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(frustumVisibility','undefined','NONE','VertexArray','abs','bind','threshold','_onMouseMoveHandler','tilesRendered','height','intensity','precision\x20highp\x20float;\x0aprecision\x20highp\x20sampler3D;\x0a\x0auniform\x20sampler3D\x20map;\x0auniform\x20float\x20threshold;\x0auniform\x20float\x20steps;\x0auniform\x20float\x20xCut;\x0auniform\x20float\x20yCut;\x0auniform\x20float\x20zCut;\x0auniform\x20vec4\x20colors[Mars3D_TotalColors];\x0auniform\x20float\x20colorsKey[Mars3D_TotalColors];\x0a\x0ain\x20vec3\x20vOrigin;\x0ain\x20vec3\x20vDirection;\x0a\x0avec2\x20hitBoxMars3D(vec3\x20orig,\x20vec3\x20dir)\x20{\x0a\x20\x20const\x20vec3\x20box_min\x20=\x20vec3(-0.5);\x0a\x20\x20const\x20vec3\x20box_max\x20=\x20vec3(0.5);\x0a\x20\x20vec3\x20inv_dir\x20=\x201.0\x20/\x20dir;\x0a\x20\x20vec3\x20tmin_tmp\x20=\x20(box_min\x20-\x20orig)\x20*\x20inv_dir;\x0a\x20\x20vec3\x20tmax_tmp\x20=\x20(box_max\x20-\x20orig)\x20*\x20inv_dir;\x0a\x20\x20vec3\x20tmin\x20=\x20min(tmin_tmp,\x20tmax_tmp);\x0a\x20\x20vec3\x20tmax\x20=\x20max(tmin_tmp,\x20tmax_tmp);\x0a\x20\x20float\x20t0\x20=\x20max(tmin.x,\x20max(tmin.y,\x20tmin.z));\x0a\x20\x20float\x20t1\x20=\x20min(tmax.x,\x20min(tmax.y,\x20tmax.z));\x0a\x20\x20return\x20vec2(t0,\x20t1);\x0a}\x0a\x0afloat\x20sampleMars3D(vec3\x20p)\x20{\x0a\x20\x20return\x20texture(map,\x20p).a;\x0a}\x0a\x0a//\x20获取颜色的方法\x0avec4\x20getColorMars3D(float\x20value)\x20{\x0a\x0a\x20\x20float\x20originalValue\x20=\x20value\x20*\x20255.0;\x0a\x0a\x20\x20vec4\x20color1\x20=\x20vec4(0.0);\x0a\x20\x20vec4\x20color2\x20=\x20vec4(0.0);\x0a\x20\x20float\x20key1\x20=\x200.0;\x0a\x20\x20float\x20key2\x20=\x200.0;\x0a\x0a\x20\x20//\x20计算当前值在哪一个区间\x0a\x20\x20for(int\x20i\x20=\x200;\x20i\x20<\x20Mars3D_TotalColors;\x20i++)\x20{\x0a\x20\x20\x20//\x20获取到最小的大于当前值的位置\x0a\x20\x20\x20\x20if(originalValue\x20<\x20colorsKey[i])\x20{\x0a\x20\x20\x20\x20\x20\x20//\x20如果是第一位，则无法插值\x0a\x20\x20\x20\x20\x20\x20if(i\x20==\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20key1\x20=\x20colorsKey[i\x20-\x201];\x0a\x20\x20\x20\x20\x20\x20key2\x20=\x20colorsKey[i];\x0a\x20\x20\x20\x20\x20\x20color1\x20=\x20colors[i\x20-\x201];\x0a\x20\x20\x20\x20\x20\x20color2\x20=\x20colors[i];\x0a\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x0a\x20\x20//\x20确定两个颜色区间之间的混合程度\x0a\x20\x20float\x20mixValue\x20=\x20(originalValue\x20-\x20key1)\x20/\x20(key2\x20-\x20key1);\x0a\x0a\x20\x20//\x20计算当前颜色\x0a\x20\x20vec4\x20finalColor\x20=\x20mix(color1,\x20color2,\x20mixValue);\x0a\x0a\x20\x20return\x20finalColor;\x0a}\x0a\x0avec4\x20alphaBlendingMars3D(vec4\x20color1,\x20vec4\x20color2)\x20{\x0a\x20\x20float\x20a1\x20=\x20color1.a;\x0a\x20\x20float\x20a2\x20=\x20color2.a;\x0a\x20\x20float\x20a\x20=\x201.0\x20-\x20(1.0\x20-\x20a1)\x20*\x20(1.0\x20-\x20a2);\x0a\x0a\x20\x20float\x20R\x20=\x20(a1\x20*\x20color1.r\x20+\x20(1.0\x20-\x20a1)\x20*\x20a2\x20*\x20color2.r)\x20/\x20a;\x0a\x20\x20float\x20G\x20=\x20(a1\x20*\x20color1.g\x20+\x20(1.0\x20-\x20a1)\x20*\x20a2\x20*\x20color2.g)\x20/\x20a;\x0a\x20\x20float\x20B\x20=\x20(a1\x20*\x20color1.b\x20+\x20(1.0\x20-\x20a1)\x20*\x20a2\x20*\x20color2.b)\x20/\x20a;\x0a\x0a\x20\x20return\x20vec4(R,\x20G,\x20B,\x20a);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20//\x20初始化色带\x0a\x20\x20vec4\x20color\x20=\x20vec4(0.0);\x0a\x20\x20vec3\x20rayDir\x20=\x20normalize(vDirection);\x0a\x20\x20vec2\x20bounds\x20=\x20hitBoxMars3D(vOrigin,\x20rayDir);\x0a\x0a\x20\x20if(bounds.x\x20>\x20bounds.y)\x0a\x20\x20\x20\x20discard;\x0a\x0a\x20\x20bounds.x\x20=\x20max(bounds.x,\x200.0);\x0a\x20\x20vec3\x20p\x20=\x20vOrigin\x20+\x20bounds.x\x20*\x20rayDir;\x0a\x20\x20vec3\x20inc\x20=\x201.0\x20/\x20abs(rayDir);\x0a\x20\x20float\x20delta\x20=\x20min(inc.x,\x20min(inc.y,\x20inc.z));\x0a\x20\x20delta\x20/=\x20steps;\x0a\x0a\x20\x20for(float\x20t\x20=\x20bounds.x;\x20t\x20<\x20bounds.y;\x20t\x20+=\x20delta)\x20{\x0a\x20\x20\x20\x20if(p.x\x20>\x20xCut\x20&&\x20p.y\x20>\x20yCut\x20&&\x20p.z\x20<\x20zCut)\x20{\x0a\x20\x20\x20\x20\x20\x20float\x20value\x20=\x20sampleMars3D(p\x20+\x200.5);\x0a\x20\x20\x20\x20\x20\x20if(value\x20<\x20threshold)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(color.a\x20>=\x201.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20alphaBlendingMars3D(color,\x20getColorMars3D(value));\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20p\x20+=\x20rayDir\x20*\x20delta;\x0a\x20\x20}\x0a\x20\x20out_FragColor\x20=\x20color;\x0a}\x0a','_stopDrawHook','postPassesUpdate','_drawCommands','fromGeometry','3021436eHEPnl','keys','forEach','10hctNtz','data','Event','north','isDestroyed','_lastTileIndex','_light_type','freeResources','destroy','splice','show','fromDegrees','radius','distance','imageryLayers','type','_createTileImagerySkeletons','frameNumber','maxDepth','normalize','imageryProvider','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20czm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20czm_material\x20m\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20uv\x20=\x20materialInput.st;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20webMercatorT\x20=\x20getMercatorY(uv,\x20u_tileRectangle.y,\x20u_tileRectangle.w);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20u_initialColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20v_textureCoordinates\x20=\x20vec3(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uv,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20webMercatorT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20computeColor(u_initialColor,\x20clamp(v_textureCoordinates,\x200.0,\x201.0));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20m.diffuse\x20=\x20color.rgb;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20m.alpha\x20=\x20color.a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20m;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','east','1371KJFFag','PixelFormat','CULLED','Mars3D_ShadowVisibilityShader','markTileRendered','getOwnPropertySymbols','kick','eastNorthUpToFixedFrame','defaultValue','_removedHook','primitiveCollection','northeastChild','GroundPrimitive','mode','_layerIndex','lastTilesWaitingForChildren','cols','getLevelMaximumGeometricError','options','tilesCulled','Cartesian2','lightShadowMapCube','_debug','_tileLoadQueueMedium','northeast','_distance','rectangle','call','state','roll','ready','heading','concat','INVALID','allAreRenderable','Visited\x20','_occluders','cancelReprojections','_primitiveBias','heights','terrainData','terrain','texture3D','afterRender','3272832LvXqsK','_onLayerRemoved','readyImagery','xCut','lights','cartesian','_tileProvider','renderable','PARTIAL','1483505uxALXU','southeastChild','_updatePositionsHook','layerRemoved','cos','RED','clippedByBoundaries','_terrainProvider','southwestChild','_enabledDraw','VertexFormat','_tileToUpdateHeights','GraphicUtil','orientedBoundingBox','boundingSphere','DONE','8LzziYg','origin','getTileDataAvailable','render','showTileThisFrame','_clearDrawCommand','绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map','createDrawCommand','tileCacheSize','upsampledFromParent','frustum','success','drawingBufferWidth','anyWereRenderedLastFrame','remove','length','QuadtreeTileLoadState','getMaterial','DrawCommand','_shadowMapTexture','_noDestroy','off','zCut','HeadingPitchRoll','Mars3D_TotalColors','_cameraPositionCartographic','PointUtil','_layer','\x0a\x20\x20\x20\x20\x20\x20return\x20color;\x0a\x20\x20\x20\x20}','Color','_color','_textureSize','drawCreated','update','baseColor','UNSIGNED_BYTE','isReady','defined','add','_darkness','textureCoordinateRectangle','showFrustum','angle','_levelZeroTiles','mesh','_shadowMapMatrix','_outlineFrustum','vertexArray',',\x20lightShadowMapCube','imageryLayer','camera','LightShadowMapsShader','appearance','prototype','imageryLayersUpdatedEvent','addHeight','fromCache','markStartOfRenderFrame','ImageryState','_imageryLayersForClamp','CULLED_BUT_NEEDED','style','addPositionsHeight','_lastSelectionResultFrame','sse','position','_loadPriority','geometryState','defineProperties','scene','179472HzrFAY','drawingBufferHeight','opacity','_imageryLayers','Camera','material','_shadowMap','INTERSECTING','innerCone','commandList','_layerOrderChanged','getLangText','Ellipsoid','uniform\x20sampler2D\x20lightShadowMap2D','drawStart','targetPosition','_updateDraw','layerShownOrHidden','_tilesInvalidated','Intersect','1156445PgajHW','Cesium','updateData','equals','postProcessStages','_postProcessStage','density','Visibility','createAttributeLocations','TerrainState','],\x0a\x20\x20\x20\x20\x20\x20\x20\x20u_textures','latitude','_modelMatrix','_visibility_type','endPosition','imagery','boundingVolumeSourceTile','_lightDirectionEC',');\x0a','u_textureTranslationAndScale','ZERO','shaderProgram','startDraw','context','_imageryLayersUpdatedEvent','southwest','Util','tileBoundingRegion','Cartesian3','default','Math','WHITE','czmObject',');\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(pointLightVisibility','positionOnEllipsoidSurface','__esModule','invalidateAllTiles','maxDepthVisited','getPrototypeOf','READY','getSurfaceNormalIntersectionWithZAxis','_updateMouseDraw','center','wasCreatedByUpsampling','uniform\x20sampler2D\x20colorTexture;\x0auniform\x20sampler2D\x20depthTexture;\x0a\x0aconst\x20int\x20LightNum\x20=\x20Mars3D_LightNumValue;\x0auniform\x20vec4\x20lightPositionEC[LightNum];\x0auniform\x20float\x20intensity[LightNum];\x0auniform\x20vec3\x20lightColor[LightNum];\x0auniform\x20vec3\x20direction[LightNum];\x0auniform\x20float\x20outerConeCos[LightNum];\x0auniform\x20float\x20innerConeCos[LightNum];\x0auniform\x20vec2\x20shadowMapDarknessType[LightNum];\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aconst\x20float\x20M_PI\x20=\x203.141592653589793;\x0a\x0avec3\x20getEyeCoordinate3FromWindowCoordinateMars3D(vec2\x20fragCoord,\x20float\x20logDepthOrDepth)\x20{\x0a\x20\x20vec4\x20eyeCoordinate\x20=\x20czm_windowToEyeCoordinates(fragCoord,\x20logDepthOrDepth);\x0a\x20\x20return\x20eyeCoordinate.xyz\x20/\x20eyeCoordinate.w;\x0a}\x0a\x0avec3\x20vectorFromOffsetMars3D(vec4\x20eyeCoordinate,\x20vec2\x20positiveOffset)\x20{\x0a\x20\x20vec2\x20glFragCoordXY\x20=\x20v_textureCoordinates.xy\x20*\x20czm_viewport.zw;\x0a\x20\x20float\x20upOrRightLogDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20(glFragCoordXY\x20+\x20positiveOffset)\x20/\x20czm_viewport.zw));\x0a\x20\x20float\x20downOrLeftLogDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20(glFragCoordXY\x20-\x20positiveOffset)\x20/\x20czm_viewport.zw));\x0a\x0a\x20\x20bvec2\x20upOrRightInBounds\x20=\x20lessThan(glFragCoordXY\x20+\x20positiveOffset,\x20czm_viewport.zw);\x0a\x20\x20float\x20useUpOrRight\x20=\x20float(upOrRightLogDepth\x20>\x200.0\x20&&\x20upOrRightInBounds.x\x20&&\x20upOrRightInBounds.y);\x0a\x20\x20float\x20useDownOrLeft\x20=\x20float(useUpOrRight\x20==\x200.0);\x0a\x20\x20vec3\x20upOrRightEC\x20=\x20getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY\x20+\x20positiveOffset,\x20upOrRightLogDepth);\x0a\x20\x20vec3\x20downOrLeftEC\x20=\x20getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY\x20-\x20positiveOffset,\x20downOrLeftLogDepth);\x0a\x20\x20return\x20(upOrRightEC\x20-\x20(eyeCoordinate.xyz\x20/\x20eyeCoordinate.w))\x20*\x20useUpOrRight\x20+\x20((eyeCoordinate.xyz\x20/\x20eyeCoordinate.w)\x20-\x20downOrLeftEC)\x20*\x20useDownOrLeft;\x0a}\x0a\x0afloat\x20getRangeAttenuationMars3D(float\x20range,\x20float\x20d)\x20{\x0a\x20\x20if(range\x20<=\x200.0)\x20{\x0a\x20\x20\x20\x20return\x201.0\x20/\x20pow(d,\x202.0);\x0a\x20\x20}\x0a\x20\x20return\x20max(min(1.0\x20-\x20pow(d\x20/\x20range,\x204.0),\x201.0),\x200.0)\x20/\x20pow(d,\x202.0);\x0a}\x0a\x0afloat\x20getSpotAttenuationMars3D(vec3\x20pointToLight,\x20vec3\x20direction,\x20float\x20outerConeCos,\x20float\x20innerConeCos)\x20{\x0a\x20\x20float\x20actualCos\x20=\x20dot(normalize(direction),\x20normalize(-pointToLight));\x0a\x20\x20if(actualCos\x20>\x20outerConeCos)\x20{\x0a\x20\x20\x20\x20if(actualCos\x20<\x20innerConeCos)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20smoothstep(outerConeCos,\x20innerConeCos,\x20actualCos);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x201.0;\x0a\x20\x20}\x0a\x20\x20return\x200.0;\x0a}\x0a\x0avec3\x20getLightIntensityMars3D(vec3\x20color,\x20float\x20intensity,\x20float\x20type,\x20float\x20range,\x20vec3\x20pointToLight,\x20vec3\x20direction,\x20float\x20outerConeCos,\x20float\x20innerConeCos)\x20{\x0a\x20\x20float\x20rangeAttenuation\x20=\x201.0;\x0a\x20\x20float\x20spotAttenuation\x20=\x201.0;\x0a\x20\x20rangeAttenuation\x20=\x20getRangeAttenuationMars3D(range,\x20length(pointToLight));\x0a\x20\x20if(type\x20==\x202.0)\x20{\x0a\x20\x20\x20\x20spotAttenuation\x20=\x20getSpotAttenuationMars3D(pointToLight,\x20direction,\x20outerConeCos,\x20innerConeCos);\x0a\x20\x20}\x0a\x20\x20return\x20rangeAttenuation\x20*\x20spotAttenuation\x20*\x20intensity\x20*\x20color;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20color\x20=\x20texture(colorTexture,\x20v_textureCoordinates);\x0a\x20\x20float\x20logDepthOrDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20v_textureCoordinates));\x0a\x20\x20if(logDepthOrDepth\x20>=\x201.0)\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20color;\x0a\x20\x20\x20\x20return;\x0a\x20\x20}\x0a\x0a\x20\x20vec4\x20eyeCoordinate\x20=\x20czm_windowToEyeCoordinates(v_textureCoordinates.xy\x20*\x20czm_viewport.zw,\x20logDepthOrDepth);\x0a\x20\x20vec3\x20downUp\x20=\x20vectorFromOffsetMars3D(eyeCoordinate,\x20vec2(0.0,\x201.0));\x0a\x20\x20vec3\x20leftRight\x20=\x20vectorFromOffsetMars3D(eyeCoordinate,\x20vec2(1.0,\x200.0));\x0a\x20\x20vec3\x20normalEC\x20=\x20normalize(cross(leftRight,\x20downUp));\x0a\x20\x20vec3\x20positionEC\x20=\x20eyeCoordinate.xyz\x20/\x20eyeCoordinate.w;\x0a\x0a\x20\x20vec3\x20totalColor\x20=\x20vec3(0.0);\x0a\x0a\x20\x20for(int\x20i\x20=\x200;\x20i\x20<\x2010000;\x20i++)\x20{\x0a\x20\x20\x20\x20if(i\x20>=\x20LightNum)\x0a\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20vec4\x20lightPEC\x20=\x20lightPositionEC[i];\x0a\x20\x20\x20\x20vec2\x20shadowMapDT\x20=\x20shadowMapDarknessType[i];\x0a\x0a\x20\x20\x20\x20vec3\x20pointToLightEC\x20=\x20positionEC\x20-\x20lightPEC.xyz;\x0a\x20\x20\x20\x20float\x20pointToLightECLength\x20=\x20length(pointToLightEC);\x0a\x20\x20\x20\x20vec3\x20l\x20=\x20normalize(pointToLightEC);\x0a\x20\x20\x20\x20float\x20NdotL\x20=\x20clamp(dot(-normalEC,\x20l),\x200.0,\x201.0);\x0a\x0a\x20\x20\x20\x20float\x20type\x20=\x20shadowMapDT.y;\x0a\x20\x20\x20\x20vec3\x20colorIntensity\x20=\x20getLightIntensityMars3D(lightColor[i],\x20intensity[i],\x20type,\x20lightPEC.w,\x20pointToLightEC,\x20direction[i],\x20outerConeCos[i],\x20innerConeCos[i]);\x0a\x20\x20\x20\x20totalColor\x20+=\x20NdotL\x20*\x20colorIntensity;\x0a\x20\x20}\x0a\x0a\x20\x20out_FragColor\x20=\x20vec4(color.xyz\x20+\x20totalColor,\x201.0);\x0a}\x0a','tilesVisited','computeTileLoadPriority','_quadtree','direction','2654wrGjaW','color','EllipsoidTerrainProvider','_map','contains','level','49WXszYK','cartographicLimitRectangle','DISABLED','fromElements','near','enabled','lastTilesRendered','lastMaxDepth','fire','southeast','initialize'];_0x569f=function(){return _0x2c6bac;};return _0x569f();}function _interopNamespace(_0x1e43e3){var _0x281c13=_0x4dbc;if(_0x1e43e3&&_0x1e43e3[_0x281c13(0x185)])return _0x1e43e3;var _0x4326f2=Object['create'](null);return _0x1e43e3&&Object['keys'](_0x1e43e3)[_0x281c13(0xab)](function(_0x30cc80){var _0x131be6=_0x281c13;if(_0x30cc80!==_0x131be6(0x17f)){var _0x31ecbc=Object['getOwnPropertyDescriptor'](_0x1e43e3,_0x30cc80);Object[_0x131be6(0x1e8)](_0x4326f2,_0x30cc80,_0x31ecbc['get']?_0x31ecbc:{'enumerable':!![],'get':function(){return _0x1e43e3[_0x30cc80];}});}}),_0x4326f2[_0x281c13(0x17f)]=_0x1e43e3,_0x4326f2;}var mars3d__namespace=_interopNamespace(mars3d);function ownKeys(_0x3d7fed,_0x1080c7){var _0x3eea37=_0x4dbc,_0x478306=Object[_0x3eea37(0xaa)](_0x3d7fed);if(Object[_0x3eea37(0xc8)]){var _0x473d80=Object[_0x3eea37(0xc8)](_0x3d7fed);_0x1080c7&&(_0x473d80=_0x473d80['filter'](function(_0xd6bcf1){return Object['getOwnPropertyDescriptor'](_0x3d7fed,_0xd6bcf1)['enumerable'];})),_0x478306[_0x3eea37(0x1a7)]['apply'](_0x478306,_0x473d80);}return _0x478306;}function _objectSpread2(_0x53bb7d){var _0x204c19=_0x4dbc;for(var _0x29259c=0x1;_0x29259c<arguments['length'];_0x29259c++){var _0x5c868c=null!=arguments[_0x29259c]?arguments[_0x29259c]:{};_0x29259c%0x2?ownKeys(Object(_0x5c868c),!0x0)['forEach'](function(_0x1c1d2f){_defineProperty(_0x53bb7d,_0x1c1d2f,_0x5c868c[_0x1c1d2f]);}):Object[_0x204c19(0x1e7)]?Object['defineProperties'](_0x53bb7d,Object['getOwnPropertyDescriptors'](_0x5c868c)):ownKeys(Object(_0x5c868c))[_0x204c19(0xab)](function(_0x3b67d5){Object['defineProperty'](_0x53bb7d,_0x3b67d5,Object['getOwnPropertyDescriptor'](_0x5c868c,_0x3b67d5));});}return _0x53bb7d;}function _classCallCheck(_0x3c34d6,_0x511a38){var _0x25308b=_0x4dbc;if(!(_0x3c34d6 instanceof _0x511a38))throw new TypeError(_0x25308b(0x83));}function _defineProperties(_0xe3b9d9,_0x5c5fbe){var _0x4e1e08=_0x4dbc;for(var _0x3ed1aa=0x0;_0x3ed1aa<_0x5c5fbe[_0x4e1e08(0x117)];_0x3ed1aa++){var _0x1b1a78=_0x5c5fbe[_0x3ed1aa];_0x1b1a78['enumerable']=_0x1b1a78['enumerable']||![],_0x1b1a78['configurable']=!![];if('value'in _0x1b1a78)_0x1b1a78['writable']=!![];Object['defineProperty'](_0xe3b9d9,_toPropertyKey(_0x1b1a78['key']),_0x1b1a78);}}function _createClass(_0xf5ad73,_0x138753,_0x2aad38){var _0x44f6c5=_0x4dbc;if(_0x138753)_defineProperties(_0xf5ad73[_0x44f6c5(0x13d)],_0x138753);if(_0x2aad38)_defineProperties(_0xf5ad73,_0x2aad38);return Object['defineProperty'](_0xf5ad73,'prototype',{'writable':![]}),_0xf5ad73;}function _defineProperty(_0xd34734,_0x3e8580,_0x11e367){return _0x3e8580=_toPropertyKey(_0x3e8580),_0x3e8580 in _0xd34734?Object['defineProperty'](_0xd34734,_0x3e8580,{'value':_0x11e367,'enumerable':!![],'configurable':!![],'writable':!![]}):_0xd34734[_0x3e8580]=_0x11e367,_0xd34734;}function _inherits(_0x5f54a9,_0xbbed07){var _0x86c165=_0x4dbc;if(typeof _0xbbed07!=='function'&&_0xbbed07!==null)throw new TypeError(_0x86c165(0x95));_0x5f54a9[_0x86c165(0x13d)]=Object['create'](_0xbbed07&&_0xbbed07['prototype'],{'constructor':{'value':_0x5f54a9,'writable':!![],'configurable':!![]}}),Object['defineProperty'](_0x5f54a9,'prototype',{'writable':![]});if(_0xbbed07)_setPrototypeOf(_0x5f54a9,_0xbbed07);}function _getPrototypeOf(_0xa2c3ce){var _0x3732a4=_0x4dbc;return _getPrototypeOf=Object['setPrototypeOf']?Object[_0x3732a4(0x188)]['bind']():function _0x4bb9c(_0x2357f2){return _0x2357f2['__proto__']||Object['getPrototypeOf'](_0x2357f2);},_getPrototypeOf(_0xa2c3ce);}function _setPrototypeOf(_0x5008f2,_0x21b61d){var _0x4b87c0=_0x4dbc;return _setPrototypeOf=Object['setPrototypeOf']?Object['setPrototypeOf'][_0x4b87c0(0x9e)]():function _0x377865(_0x455d47,_0x218710){return _0x455d47['__proto__']=_0x218710,_0x455d47;},_setPrototypeOf(_0x5008f2,_0x21b61d);}function _isNativeReflectConstruct(){var _0x15de6a=_0x4dbc;if(typeof Reflect==='undefined'||!Reflect['construct'])return![];if(Reflect['construct']['sham'])return![];if(typeof Proxy===_0x15de6a(0x1c1))return!![];try{return Boolean[_0x15de6a(0x13d)][_0x15de6a(0x1f1)]['call'](Reflect['construct'](Boolean,[],function(){})),!![];}catch(_0xe18b47){return![];}}function _assertThisInitialized(_0x3b395b){var _0x315416=_0x4dbc;if(_0x3b395b===void 0x0)throw new ReferenceError(_0x315416(0x1a6));return _0x3b395b;}function _possibleConstructorReturn(_0x58e75c,_0x3b1045){if(_0x3b1045&&(typeof _0x3b1045==='object'||typeof _0x3b1045==='function'))return _0x3b1045;else{if(_0x3b1045!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x58e75c);}function _createSuper(_0x46f1fe){var _0x2548ec=_isNativeReflectConstruct();return function _0x162f07(){var _0x1a5232=_0x4dbc,_0x477bc3=_getPrototypeOf(_0x46f1fe),_0x1f3a89;if(_0x2548ec){var _0x1720c6=_getPrototypeOf(this)['constructor'];_0x1f3a89=Reflect['construct'](_0x477bc3,arguments,_0x1720c6);}else _0x1f3a89=_0x477bc3[_0x1a5232(0x1cf)](this,arguments);return _possibleConstructorReturn(this,_0x1f3a89);};}function _superPropBase(_0x4b0dbd,_0x2b3160){var _0x53758c=_0x4dbc;while(!Object['prototype'][_0x53758c(0x1a5)][_0x53758c(0xde)](_0x4b0dbd,_0x2b3160)){_0x4b0dbd=_getPrototypeOf(_0x4b0dbd);if(_0x4b0dbd===null)break;}return _0x4b0dbd;}function _get(){var _0x138a6c=_0x4dbc;return typeof Reflect!==_0x138a6c(0x9a)&&Reflect['get']?_get=Reflect['get']['bind']():_get=function _0x43acd5(_0x1d5121,_0x3253b3,_0x4fdd18){var _0x103e7e=_superPropBase(_0x1d5121,_0x3253b3);if(!_0x103e7e)return;var _0x4358a0=Object['getOwnPropertyDescriptor'](_0x103e7e,_0x3253b3);if(_0x4358a0['get'])return _0x4358a0['get']['call'](arguments['length']<0x3?_0x1d5121:_0x4fdd18);return _0x4358a0['value'];},_get['apply'](this,arguments);}function _toPrimitive(_0x2f88e7,_0x47d029){var _0x109c08=_0x4dbc;if(typeof _0x2f88e7!=='object'||_0x2f88e7===null)return _0x2f88e7;var _0x1c89fd=_0x2f88e7[Symbol['toPrimitive']];if(_0x1c89fd!==undefined){var _0x4dcff2=_0x1c89fd[_0x109c08(0xde)](_0x2f88e7,_0x47d029||'default');if(typeof _0x4dcff2!=='object')return _0x4dcff2;throw new TypeError('@@toPrimitive\x20must\x20return\x20a\x20primitive\x20value.');}return(_0x47d029==='string'?String:Number)(_0x2f88e7);}function _toPropertyKey(_0x21e5f3){var _0x5d60f0=_0x4dbc,_0x40fa24=_toPrimitive(_0x21e5f3,'string');return typeof _0x40fa24===_0x5d60f0(0x1e9)?_0x40fa24:String(_0x40fa24);}var TraversalDetails=_createClass(function TraversalDetails(){var _0x117fa8=_0x4dbc;_classCallCheck(this,TraversalDetails),this[_0x117fa8(0xe5)]=!![],this['anyWereRenderedLastFrame']=![],this['notYetRenderableCount']=0x0;}),TraversalQuadDetails=(function(){function _0x4269c3(){_classCallCheck(this,_0x4269c3),this['southwest']=new TraversalDetails(),this['southeast']=new TraversalDetails(),this['northwest']=new TraversalDetails(),this['northeast']=new TraversalDetails();}return _createClass(_0x4269c3,[{'key':'combine','value':function _0x1aaed1(_0x255110){var _0x4036c6=_0x4dbc,_0x37a6a2=this[_0x4036c6(0x17b)],_0x5079b6=this['southeast'],_0x4f439a=this[_0x4036c6(0x96)],_0xd46323=this[_0x4036c6(0xdb)];_0x255110['allAreRenderable']=_0x37a6a2['allAreRenderable']&&_0x5079b6[_0x4036c6(0xe5)]&&_0x4f439a[_0x4036c6(0xe5)]&&_0xd46323['allAreRenderable'],_0x255110['anyWereRenderedLastFrame']=_0x37a6a2['anyWereRenderedLastFrame']||_0x5079b6[_0x4036c6(0x115)]||_0x4f439a[_0x4036c6(0x115)]||_0xd46323['anyWereRenderedLastFrame'],_0x255110['notYetRenderableCount']=_0x37a6a2[_0x4036c6(0x1dd)]+_0x5079b6['notYetRenderableCount']+_0x4f439a['notYetRenderableCount']+_0xd46323['notYetRenderableCount'];}}]),_0x4269c3;}()),Cesium$8=mars3d__namespace[_0x386a36(0x163)];function prepareNewTile(_0x44e807,_0x3405cb,_0x5511bc){for(var _0x3ab568=0x0,_0x461666=_0x5511bc['length'];_0x3ab568<_0x461666;++_0x3ab568){var _0x3c2dc7=_0x5511bc['get'](_0x3ab568);_0x3c2dc7['show']&&_0x3c2dc7['_createTileImagerySkeletons'](_0x44e807,_0x3405cb);}}function requestTileGeometry(_0x4bb1e5,_0x5c2456,_0x37da58,_0x486df1){var _0x341a90=_0x386a36;_0x4bb1e5[_0x341a90(0x1ce)]=_0x4bb1e5['createRectanglePrimitive'](_0x5c2456,_0x486df1[_0x341a90(0x1ef)]),_0x4bb1e5[_0x341a90(0x1ce)]&&(_0x4bb1e5['primitive']['readyPromise']['then'](function(){_0x4bb1e5['geometryState']=Cesium$8['TerrainState']['RECEIVED'];},function(){var _0x808d4c=_0x341a90;_0x4bb1e5[_0x808d4c(0x14b)]=Cesium$8['TerrainState']['FAILED'];}),_0x4bb1e5['primitive']['update'](_0x37da58));}function processGeometryStateMachine(_0x4ca608,_0x975bd0,_0x3b6da6,_0x2355c5){var _0x312ca5=_0x386a36;if(!_0x3b6da6)return;var _0x2a1944=_0x4ca608[_0x312ca5(0xad)];_0x2a1944['geometryState']===Cesium$8['TerrainState'][_0x312ca5(0x1ee)]&&(_0x2a1944[_0x312ca5(0x14b)]=Cesium$8['TerrainState']['RECEIVING'],requestTileGeometry(_0x2a1944,_0x4ca608['rectangle'],_0x2355c5,_0x975bd0)),_0x2a1944['geometryState']===Cesium$8[_0x312ca5(0x16b)]['RECEIVED']&&(_0x2a1944['geometryState']=Cesium$8['TerrainState']['READY']);}function getMaterial(_0x48c2b2,_0x146fee){var _0x16f58e=_0x386a36,_0x24ac42={'u_tileRectangle':new Cesium$8['Cartesian4']()};for(var _0x4f5e5a=0x0;_0x4f5e5a<_0x48c2b2;_0x4f5e5a++){_0x24ac42['u_textures'['concat'](_0x4f5e5a)]=Cesium$8['Material'][_0x16f58e(0x1b7)],_0x24ac42[_0x16f58e(0x175)['concat'](_0x4f5e5a)]=new Cesium$8['Cartesian4'](),_0x24ac42['u_textureCoordinateRectangle'['concat'](_0x4f5e5a)]=new Cesium$8['Cartesian4'](),_0x24ac42['u_textureUseWebMercatorT'['concat'](_0x4f5e5a)]=!![];}var _0x1b834c=_0x146fee+''+_0x48c2b2,_0x37a6e0=Cesium$8['Material']['_materialCache'][_0x16f58e(0x119)](_0x1b834c);if(!Cesium$8['defined'](_0x37a6e0)){var _0x2b7dc8='\x0a\x20\x20\x20\x20vec4\x20sampleAndBlend(\x0a\x20\x20\x20\x20\x20\x20vec4\x20previousColor,\x0a\x20\x20\x20\x20\x20\x20sampler2D\x20textureToSample,\x0a\x20\x20\x20\x20\x20\x20vec2\x20tileTextureCoordinates,\x0a\x20\x20\x20\x20\x20\x20vec4\x20textureCoordinateRectangle,\x0a\x20\x20\x20\x20\x20\x20vec4\x20textureCoordinateTranslationAndScale,\x0a\x20\x20\x20\x20\x20\x20float\x20textureAlpha\x0a\x20\x20\x20\x20)\x20{\x0a\x20\x20\x20\x20\x20\x20vec2\x20alphaMultiplier\x20=\x20step(textureCoordinateRectangle.st,\x20tileTextureCoordinates);\x0a\x20\x20\x20\x20\x20\x20textureAlpha\x20=\x20textureAlpha\x20*\x20alphaMultiplier.x\x20*\x20alphaMultiplier.y;\x0a\x0a\x20\x20\x20\x20\x20\x20alphaMultiplier\x20=\x20step(vec2(0.0),\x20textureCoordinateRectangle.pq\x20-\x20tileTextureCoordinates);\x0a\x20\x20\x20\x20\x20\x20textureAlpha\x20=\x20textureAlpha\x20*\x20alphaMultiplier.x\x20*\x20alphaMultiplier.y;\x0a\x0a\x20\x20\x20\x20\x20\x20vec2\x20translation\x20=\x20textureCoordinateTranslationAndScale.xy;\x0a\x20\x20\x20\x20\x20\x20vec2\x20scale\x20=\x20textureCoordinateTranslationAndScale.zw;\x0a\x20\x20\x20\x20\x20\x20vec2\x20textureCoordinates\x20=\x20tileTextureCoordinates\x20*\x20scale\x20+\x20translation;\x0a\x20\x20\x20\x20\x20\x20vec4\x20value\x20=\x20texture(textureToSample,\x20textureCoordinates);\x0a\x20\x20\x20\x20\x20\x20vec3\x20color\x20=\x20value.rgb;\x0a\x20\x20\x20\x20\x20\x20float\x20alpha\x20=\x20value.a;\x0a\x0a\x20\x20\x20\x20\x20\x20float\x20sourceAlpha\x20=\x20alpha\x20*\x20textureAlpha;\x0a\x20\x20\x20\x20\x20\x20float\x20outAlpha\x20=\x20mix(previousColor.a,\x201.0,\x20sourceAlpha);\x0a\x20\x20\x20\x20\x20\x20outAlpha\x20+=\x20sign(outAlpha)\x20-\x201.0;\x0a\x0a\x20\x20\x20\x20\x20\x20vec3\x20outColor\x20=\x20mix(previousColor.rgb\x20*\x20previousColor.a,\x20color,\x20sourceAlpha)\x20/\x20outAlpha;\x0a\x0a\x20\x20\x20\x20\x20\x20return\x20vec4(outColor,\x20max(outAlpha,\x200.0));\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20',_0x12572b='\x0a\x20\x20\x20\x20vec4\x20computeColor(vec4\x20initialColor,\x20vec3\x20textureCoordinates)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20initialColor;\x0a\x20\x20\x20\x20';for(var _0x56c4cf=0x0;_0x56c4cf<_0x48c2b2;_0x56c4cf++){_0x12572b+='\x0a\x20\x20\x20\x20\x20\x20color\x20=\x20sampleAndBlend(',_0x12572b+=_0x16f58e(0x1cc)[_0x16f58e(0xe3)](_0x56c4cf,_0x16f58e(0x16c))['concat'](_0x56c4cf,',\x0a\x20\x20\x20\x20\x20\x20\x20\x20u_textureUseWebMercatorT')['concat'](_0x56c4cf,'\x20?\x20textureCoordinates.xz\x20:\x20textureCoordinates.xy,\x0a\x20\x20\x20\x20\x20\x20\x20\x20u_textureCoordinateRectangle')['concat'](_0x56c4cf,',\x0a\x20\x20\x20\x20\x20\x20\x20\x20u_textureTranslationAndScale')['concat'](_0x56c4cf,',\x0a\x20\x20\x20\x20\x20\x20\x20\x201.0\x20//\x20u_dayTextureAlpha\x0a\x20\x20\x20\x20\x20\x20);');}_0x12572b+=_0x16f58e(0x124);var _0x273c2b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#define\x20MaximumLatitude\x201.4844222297453322\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20geodeticLatitudeToMercatorAngle(float\x20latitude)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20latitude\x20=\x20min(latitude,\x20MaximumLatitude);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20latitude\x20=\x20max(latitude,\x20-MaximumLatitude);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20sinLatitude\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x200.5\x20*\x20log((1.0\x20+\x20sinLatitude)\x20/\x20(1.0\x20-\x20sinLatitude));\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20getMercatorY(vec2\x20uv,\x20float\x20south,\x20float\x20north)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20geographicUV\x20=\x20uv;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20southMercatorY\x20=\x20geodeticLatitudeToMercatorAngle(south);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20northMercatorY\x20=\x20geodeticLatitudeToMercatorAngle(north);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20fraction\x20=\x20mix(south,\x20north,\x20geographicUV.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20mercatorY\x20=\x20geodeticLatitudeToMercatorAngle(fraction);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20oneOverMercatorHeight\x20=\x201.0\x20/\x20(northMercatorY\x20-\x20southMercatorY);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20mercatorFraction\x20=\x20(mercatorY\x20-\x20southMercatorY)\x20*\x20oneOverMercatorHeight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20mercatorFraction;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'['concat'](_0x2b7dc8,'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x16f58e(0xe3)](_0x12572b,_0x16f58e(0xc1));Cesium$8['Material']['_materialCache']['addMaterial'](_0x1b834c,{'fabric':{'type':_0x1b834c,'uniforms':_0x24ac42,'source':_0x273c2b}});}return Cesium$8['Material']['fromType'](_0x1b834c,_0x24ac42);}function _0x4dbc(_0x67463a,_0x29ce9a){var _0x569f21=_0x569f();return _0x4dbc=function(_0x4dbcf0,_0x14f78b){_0x4dbcf0=_0x4dbcf0-0x7a;var _0xa686c3=_0x569f21[_0x4dbcf0];return _0xa686c3;},_0x4dbc(_0x67463a,_0x29ce9a);}var GroundSurfaceTile=(function(){function _0x46016c(_0x57028b){var _0x568c57=_0x4dbc;_classCallCheck(this,_0x46016c),this['imagery']=[],this['primitive']=undefined,this['boundingVolumeSourceTile']=undefined,this['clippedByBoundaries']=![],this['geometryState']=Cesium$8['TerrainState']['UNLOADED'],this[_0x568c57(0x105)]=Cesium$8['OrientedBoundingBox']['fromRectangle'](_0x57028b,0x0,0x2710,Cesium$8[_0x568c57(0x15a)]['WGS84']),this[_0x568c57(0x17d)]=new Cesium$8['TileBoundingRegion']({'computeBoundingVolumes':![],'rectangle':_0x57028b,'ellipsoid':Cesium$8['Ellipsoid']['WGS84'],'minimumHeight':0x0,'maximumHeight':0x0});}return _createClass(_0x46016c,[{'key':'freeResources','value':function _0x43fb3e(){var _0x661f1c=_0x4dbc;this['geometryState']=Cesium$8['TerrainState']['UNLOADED'],this['primitive']&&this['primitive'][_0x661f1c(0xb4)](),this[_0x661f1c(0x1ce)]=undefined;var _0x1ebcce=this[_0x661f1c(0x171)];for(var _0x1d4549=0x0,_0x55eb0c=_0x1ebcce[_0x661f1c(0x117)];_0x1d4549<_0x55eb0c;++_0x1d4549){_0x1ebcce[_0x1d4549]['freeResources']();}this['imagery']['length']=0x0;}},{'key':'processImagery','value':function _0x39b03e(_0x1fbf6a,_0x68d7bd,_0x11898c,_0x18b8a4){var _0x305e16=_0x4dbc,_0x3f4763=_0x1fbf6a[_0x305e16(0xad)],_0x36a725=_0x1fbf6a['upsampledFromParent'],_0x2330c9=![],_0x130ebb=!![],_0x21eea1=_0x3f4763['imagery'],_0x558252,_0x52c464;for(_0x558252=0x0,_0x52c464=_0x21eea1['length'];_0x558252<_0x52c464;++_0x558252){var _0x3a9644=_0x21eea1[_0x558252];if(!Cesium$8[_0x305e16(0x12d)](_0x3a9644['loadingImagery'])){_0x36a725=![];continue;}if(_0x3a9644['loadingImagery']['state']===Cesium$8['ImageryState']['PLACEHOLDER']){var _0x329cf6=_0x3a9644['loadingImagery'][_0x305e16(0x139)];if(_0x329cf6['imageryProvider'][_0x305e16(0xe1)]){_0x3a9644['freeResources'](),_0x21eea1[_0x305e16(0xb5)](_0x558252,0x1),_0x329cf6['_createTileImagerySkeletons'](_0x1fbf6a,_0x68d7bd,_0x558252),--_0x558252,_0x52c464=_0x21eea1['length'];continue;}else _0x36a725=![];}var _0xdd755d=_0x3a9644['processStateMachine'](_0x1fbf6a,_0x11898c,_0x18b8a4);_0x130ebb=_0x130ebb&&_0xdd755d,_0x2330c9=_0x2330c9||_0xdd755d||Cesium$8['defined'](_0x3a9644['readyImagery']),_0x36a725=_0x36a725&&Cesium$8['defined'](_0x3a9644['loadingImagery'])&&(_0x3a9644['loadingImagery']['state']===Cesium$8[_0x305e16(0x142)]['FAILED']||_0x3a9644[_0x305e16(0x1de)]['state']===Cesium$8['ImageryState'][_0x305e16(0xe4)]);}return _0x1fbf6a[_0x305e16(0x111)]=_0x36a725,_0x1fbf6a['renderable']=_0x1fbf6a[_0x305e16(0xf6)]&&(_0x2330c9||_0x130ebb),_0x130ebb;}},{'key':'createRectanglePrimitive','value':function _0x31ef28(_0x157684,_0x2e632f){var _0x2ea2c9=_0x4dbc,_0x226cb4=![];return this['imagery']['length']>0x0&&(_0x226cb4=this['imagery'][0x0]['useWebMercatorT']),new Cesium$8[(_0x2ea2c9(0xcf))]({'geometryInstances':new Cesium$8[(_0x2ea2c9(0x1b2))]({'geometry':new Cesium$8['RectangleGeometry']({'rectangle':_0x157684,'vertexFormat':Cesium$8[_0x2ea2c9(0x102)]['POSITION_AND_ST'],'height':0x0,'extrudedHeight':0x4e20})}),'appearance':new Cesium$8['MaterialAppearance']({'translucent':![],'material':getMaterial(this[_0x2ea2c9(0x171)]['length'],_0x226cb4)}),'asynchronous':![],'classificationType':_0x2e632f});}}],[{'key':'initialize','value':function _0xce74b5(_0x14fe25,_0x909b4b,_0x50ad02){var _0x4e9c08=_0x4dbc,_0x3b0397=_0x14fe25[_0x4e9c08(0xad)];!Cesium$8['defined'](_0x3b0397)&&(_0x3b0397=_0x14fe25['data']=new _0x46016c(_0x14fe25['rectangle'])),_0x14fe25[_0x4e9c08(0xdf)]===Cesium$8['QuadtreeTileLoadState']['START']&&(prepareNewTile(_0x14fe25,_0x909b4b,_0x50ad02),_0x14fe25['state']=Cesium$8['QuadtreeTileLoadState']['LOADING']);}},{'key':'processStateMachine','value':function _0x315894(_0x5a57fb,_0x3e4819,_0x28f65d,_0x1bc10b){var _0x1de952=_0x4dbc;_0x46016c['initialize'](_0x5a57fb,_0x28f65d,_0x1bc10b);var _0xe78c5=_0x5a57fb[_0x1de952(0xad)],_0x269c57=_0xe78c5['processImagery'](_0x5a57fb,_0x28f65d,_0x3e4819);_0x5a57fb['state']===Cesium$8['QuadtreeTileLoadState']['LOADING']&&processGeometryStateMachine(_0x5a57fb,_0x28f65d,_0x269c57,_0x3e4819);var _0x580f8a=_0x5a57fb['renderable'];_0x5a57fb['renderable']=Cesium$8[_0x1de952(0x12d)](_0xe78c5['primitive']);var _0x35cb63=_0x5a57fb['data']['geometryState']===Cesium$8['TerrainState'][_0x1de952(0x189)];_0x5a57fb[_0x1de952(0x111)]=![];if(_0x269c57&&_0x35cb63){var _0x31cdd0=_0x5a57fb['_loadedCallbacks'],_0x10440e={};for(var _0x3464bf in _0x31cdd0){_0x31cdd0['hasOwnProperty'](_0x3464bf)&&(!_0x31cdd0[_0x3464bf](_0x5a57fb)&&(_0x10440e[_0x3464bf]=_0x31cdd0[_0x3464bf]));}_0x5a57fb['_loadedCallbacks']=_0x10440e,_0x5a57fb[_0x1de952(0xdf)]=Cesium$8[_0x1de952(0x118)][_0x1de952(0x107)];}_0x580f8a&&(_0x5a57fb['renderable']=!![]);}}]),_0x46016c;}()),Cesium$7=mars3d__namespace['Cesium'];function sortTileImageryByLayerIndex(_0x1f9f2a,_0x2a063c){var _0x53213e=_0x1f9f2a['loadingImagery'];!Cesium$7['defined'](_0x53213e)&&(_0x53213e=_0x1f9f2a['readyImagery']);var _0xbb3e9b=_0x2a063c['loadingImagery'];return!Cesium$7['defined'](_0xbb3e9b)&&(_0xbb3e9b=_0x2a063c['readyImagery']),_0x53213e['imageryLayer']['_layerIndex']-_0xbb3e9b['imageryLayer']['_layerIndex'];}var rectangleIntersectionScratch=new Cesium$7[(_0x386a36(0x1ac))](),splitCartographicLimitRectangleScratch=new Cesium$7['Rectangle'](),rectangleCenterScratch=new Cesium$7[(_0x386a36(0x98))]();function clipRectangleAntimeridian(_0x2e9b25,_0xaf0e86){var _0x294db4=_0x386a36;if(_0xaf0e86['west']<_0xaf0e86[_0x294db4(0xc2)])return _0xaf0e86;var _0x27cdf9=Cesium$7['Rectangle'][_0x294db4(0x1d2)](_0xaf0e86,splitCartographicLimitRectangleScratch),_0x1e409d=Cesium$7['Rectangle'][_0x294db4(0x18c)](_0x2e9b25,rectangleCenterScratch);return _0x1e409d['longitude']>0x0?_0x27cdf9[_0x294db4(0xc2)]=Cesium$7['Math']['PI']:_0x27cdf9['west']=-Cesium$7['Math']['PI'],_0x27cdf9;}var readyImageryScratch=[],canRenderTraversalStack=[],tileDirectionScratch=new Cesium$7[(_0x386a36(0x17e))]();function updateTileBoundingRegion(_0xcb8c91,_0x3d17d7){var _0x326f89=_0x386a36,_0x3c0d58=_0xcb8c91['data'];return _0x3c0d58===undefined&&(_0x3c0d58=_0xcb8c91['data']=new GroundSurfaceTile(_0xcb8c91[_0x326f89(0xdd)])),_0xcb8c91[_0x326f89(0xad)][_0x326f89(0x105)]['distanceSquaredTo'](_0x3d17d7['camera']['positionWC']);}function getTileReadyCallback(_0xde0ca8,_0x7dd7b3,_0x5b6017){return function(_0x1da697){var _0x1685a7=_0x4dbc,_0x4a35ff,_0x2ae215,_0x5d9bab=-0x1,_0x321113=_0x1da697[_0x1685a7(0xad)]['imagery'],_0x31ed3d=_0x321113[_0x1685a7(0x117)],_0x3dcfef;for(_0x3dcfef=0x0;_0x3dcfef<_0x31ed3d;++_0x3dcfef){_0x4a35ff=_0x321113[_0x3dcfef],_0x2ae215=Cesium$7['defaultValue'](_0x4a35ff['readyImagery'],_0x4a35ff['loadingImagery']);if(_0x2ae215[_0x1685a7(0x139)]===_0x7dd7b3){_0x5d9bab=_0x3dcfef;break;}}if(_0x5d9bab!==-0x1){var _0x215e1f=_0x5d9bab+_0xde0ca8;_0x4a35ff=_0x321113[_0x215e1f],_0x2ae215=Cesium$7['defined'](_0x4a35ff)?Cesium$7['defaultValue'](_0x4a35ff['readyImagery'],_0x4a35ff[_0x1685a7(0x1de)]):undefined;if(!Cesium$7['defined'](_0x2ae215)||_0x2ae215['imageryLayer']!==_0x7dd7b3)return!_0x7dd7b3[_0x1685a7(0xbc)](_0x1da697,_0x5b6017,_0x215e1f);for(_0x3dcfef=_0x5d9bab;_0x3dcfef<_0x215e1f;++_0x3dcfef){_0x321113[_0x3dcfef]['freeResources']();}_0x321113[_0x1685a7(0xb5)](_0x5d9bab,_0xde0ca8);}return!![];};}var scratchCartesian4=new Cesium$7['Cartesian4']();function updateTileDataRectanglePrimitive(_0x589e83,_0x70899e,_0x2d0e20){var _0x372bee=_0x386a36,_0x2d421b=_0x589e83['data'],_0x10e660=_0x2d421b['imagery'],_0x4a77d4=_0x2d421b[_0x372bee(0x1ce)],_0x49de7a=_0x4a77d4['appearance']['material']['uniforms'],_0x9f4945=![];for(var _0x4a8665=0x0,_0x37300b=_0x10e660['length'];_0x4a8665<_0x37300b;_0x4a8665++){var _0x4b06f7=_0x10e660[_0x4a8665],_0x54ed47=_0x4b06f7['readyImagery'];if(Cesium$7[_0x372bee(0x12d)](_0x54ed47)){var _0x41672b=_0x4b06f7['useWebMercatorT']?_0x54ed47[_0x372bee(0x1e6)]:_0x54ed47[_0x372bee(0x8d)];_0x4a77d4[_0x372bee(0x13c)][_0x372bee(0x153)]['_textures']['u_textures'['concat'](_0x4a8665)]=_0x41672b,!Cesium$7['defined'](_0x4b06f7['textureTranslationAndScale'])&&(_0x4b06f7['textureTranslationAndScale']=_0x4b06f7[_0x372bee(0x139)]['_calculateTextureTranslationAndScale'](_0x589e83,_0x4b06f7)),Cesium$7['Cartesian4'][_0x372bee(0x1d2)](_0x4b06f7['textureTranslationAndScale'],_0x49de7a[_0x372bee(0x175)['concat'](_0x4a8665)]),Cesium$7['Cartesian4']['clone'](_0x4b06f7[_0x372bee(0x130)],_0x49de7a['u_textureCoordinateRectangle'['concat'](_0x4a8665)]),_0x49de7a['u_textureUseWebMercatorT'['concat'](_0x4a8665)]=_0x4b06f7['useWebMercatorT'],Cesium$7[_0x372bee(0x1db)]['fromElements'](_0x589e83[_0x372bee(0xdd)]['west'],_0x589e83['rectangle']['south'],_0x589e83[_0x372bee(0xdd)]['east'],_0x589e83[_0x372bee(0xdd)]['north'],scratchCartesian4),Cesium$7['Cartesian4']['clone'](scratchCartesian4,_0x49de7a[_0x372bee(0x1bd)]),_0x9f4945=!![];}}_0x9f4945&&(_0x4a77d4['classificationType']=_0x2d0e20,_0x4a77d4['update'](_0x70899e));}var GlobeSurfaceTileProvider=(function(){var _0x19e1ab=_0x386a36;function _0x5ba84d(_0x1f1020){var _0x464f13=_0x4dbc;_classCallCheck(this,_0x5ba84d),this['_quadtree']=undefined,this['_terrainProvider']=new Cesium$7[(_0x464f13(0x195))](),this[_0x464f13(0x1ef)]=Cesium$7['ClassificationType']['BOTH'],this[_0x464f13(0x151)]=_0x1f1020,this['_errorEvent']=new Cesium$7['Event'](),this[_0x464f13(0x151)]['layerAdded'][_0x464f13(0x7d)](_0x5ba84d['prototype']['_onLayerAdded'],this),this['_imageryLayers'][_0x464f13(0xfb)]['addEventListener'](_0x5ba84d[_0x464f13(0x13d)][_0x464f13(0xf0)],this),this['_imageryLayers']['layerMoved']['addEventListener'](_0x5ba84d[_0x464f13(0x13d)]['_onLayerMoved'],this),this['_imageryLayers'][_0x464f13(0x15f)]['addEventListener'](_0x5ba84d['prototype']['_onLayerShownOrHidden'],this),this['_imageryLayersUpdatedEvent']=new Cesium$7['Event'](),this[_0x464f13(0x158)]=![],this[_0x464f13(0x1a8)]=[],this['_debug']={'wireframe':![],'boundingSphereTile':undefined},this['_baseColor']=new Cesium$7['Color'](0x0,0x0,0.5,0x1),this[_0x464f13(0x1a4)]=undefined,this['cartographicLimitRectangle']=Cesium$7[_0x464f13(0x1ac)][_0x464f13(0x1d2)](Cesium$7['Rectangle']['MAX_VALUE']);}return _createClass(_0x5ba84d,[{'key':_0x19e1ab(0x12a),'get':function _0x180fad(){return this['_baseColor'];},'set':function _0x25f7ee(_0x56d528){var _0x3f8f4f=_0x19e1ab;this['_baseColor']=_0x56d528,this['_firstPassInitialColor']=Cesium$7[_0x3f8f4f(0x1db)]['fromColor'](_0x56d528,this['_firstPassInitialColor']);}},{'key':_0x19e1ab(0x87),'get':function _0x32235c(){return this['_quadtree'];},'set':function _0x4b7c3f(_0x568224){var _0x379cb5=_0x19e1ab;this[_0x379cb5(0x191)]=_0x568224;}},{'key':'ready','get':function _0x1d6534(){var _0x260172=_0x19e1ab;return this['_terrainProvider'][_0x260172(0xe1)]&&(this['_imageryLayers'][_0x260172(0x117)]===0x0||this['_imageryLayers']['get'](0x0)[_0x260172(0xc0)]['ready']);}},{'key':'tilingScheme','get':function _0x247bb7(){var _0x36e7e6=_0x19e1ab;return this[_0x36e7e6(0xff)]['tilingScheme'];}},{'key':_0x19e1ab(0x1a9),'get':function _0x48c0d4(){return this['_errorEvent'];}},{'key':_0x19e1ab(0x13e),'get':function _0x538843(){return this['_imageryLayersUpdatedEvent'];}},{'key':_0x19e1ab(0x129),'value':function _0x593618(_0x36d356){this['_imageryLayers']['_update']();}},{'key':_0x19e1ab(0x1a3),'value':function _0x19a3bd(_0x2f86c7){var _0x29de10=_0x19e1ab;this[_0x29de10(0x151)][_0x29de10(0x80)](_0x2f86c7),this[_0x29de10(0x158)]&&(this['_layerOrderChanged']=![],this[_0x29de10(0x191)][_0x29de10(0x7f)](function(_0x150643){var _0x1919f9=_0x29de10;_0x150643[_0x1919f9(0xad)]['imagery']['sort'](sortTileImageryByLayerIndex);}));}},{'key':_0x19e1ab(0x1d0),'value':function _0x215fa4(_0x2eceb5){var _0x512ca6=_0x19e1ab,_0x52a89b=this[_0x512ca6(0x1a8)];for(var _0x5d1edb=0x0,_0x2fbba4=_0x52a89b['length'];_0x5d1edb<_0x2fbba4;++_0x5d1edb){var _0x17b89b=_0x52a89b[_0x5d1edb];Cesium$7[_0x512ca6(0x12d)](_0x17b89b)&&(_0x17b89b[_0x512ca6(0x117)]=0x0);}}},{'key':'endUpdate','value':function _0x57994e(_0x202c03){var _0x4066cd=_0x19e1ab,_0x1d1a0f=this['_tilesToRenderByTextureCount'];for(var _0x397e08=0x0,_0x2ad4a7=_0x1d1a0f['length'];_0x397e08<_0x2ad4a7;++_0x397e08){var _0x54da72=_0x1d1a0f[_0x397e08];if(!Cesium$7[_0x4066cd(0x12d)](_0x54da72))continue;for(var _0x28ed28=0x0,_0x56e6c4=_0x54da72['length'];_0x28ed28<_0x56e6c4;++_0x28ed28){var _0x20e2a8=_0x54da72[_0x28ed28],_0x215615=_0x20e2a8[_0x4066cd(0xad)]['primitive'];_0x215615 instanceof Cesium$7[_0x4066cd(0xcf)]&&updateTileDataRectanglePrimitive(_0x20e2a8,_0x202c03,this['classificationType']);}}}},{'key':_0x19e1ab(0xe8),'value':function _0x58e21a(){var _0x2a032c=_0x19e1ab;this[_0x2a032c(0x151)]['cancelReprojections']();}},{'key':'getLevelMaximumGeometricError','value':function _0x1a27e6(_0x5611c0){return this['_terrainProvider']['getLevelMaximumGeometricError'](_0x5611c0);}},{'key':_0x19e1ab(0x8a),'value':function _0x7a2326(_0x367cc6,_0x57fed8){var _0x3057da=_0x19e1ab,_0x2cfc0a=_0x57fed8[_0x3057da(0xad)],_0x5df176;Cesium$7['defined'](_0x2cfc0a)&&(_0x5df176=_0x2cfc0a[_0x3057da(0x14b)]),GroundSurfaceTile['processStateMachine'](_0x57fed8,_0x367cc6,this[_0x3057da(0xff)],this['_imageryLayers']),_0x2cfc0a=_0x57fed8['data'],_0x5df176!==_0x57fed8['data'][_0x3057da(0x14b)]&&(this['computeTileVisibility'](_0x57fed8,_0x367cc6,this['quadtree']['occluders'])!==Cesium$7['Visibility'][_0x3057da(0x9b)]&&_0x2cfc0a[_0x3057da(0x172)]===_0x57fed8&&GroundSurfaceTile['processStateMachine'](_0x57fed8,_0x367cc6,this['_terrainProvider'],this[_0x3057da(0x151)]));}},{'key':'computeTileVisibility','value':function _0x4bf5a8(_0x5597f1,_0x307e53,_0x3f2765){var _0x1c8990=_0x19e1ab,_0x48c00c=this['computeDistanceToTile'](_0x5597f1,_0x307e53);_0x5597f1[_0x1c8990(0xdc)]=_0x48c00c;var _0x4a0fb2=_0x5597f1['data'],_0x12e3db=_0x4a0fb2['tileBoundingRegion'];if(_0x4a0fb2['boundingVolumeSourceTile']===undefined)return Cesium$7[_0x1c8990(0x169)]['PARTIAL'];var _0x530013=_0x307e53['cullingVolume'],_0x374df7=_0x12e3db['boundingVolume'];!Cesium$7[_0x1c8990(0x12d)](_0x374df7)&&(_0x374df7=_0x12e3db['boundingSphere']);_0x4a0fb2['clippedByBoundaries']=![];var _0x297ec3=clipRectangleAntimeridian(_0x5597f1['rectangle'],this[_0x1c8990(0x19a)]),_0x1d19e1=Cesium$7['Rectangle'][_0x1c8990(0x1b6)](_0x297ec3,_0x5597f1['rectangle'],rectangleIntersectionScratch);if(!Cesium$7['defined'](_0x1d19e1))return Cesium$7['Visibility'][_0x1c8990(0x9b)];!Cesium$7['Rectangle'][_0x1c8990(0x165)](_0x1d19e1,_0x5597f1['rectangle'])&&(_0x4a0fb2[_0x1c8990(0xfe)]=!![]);if(!Cesium$7['defined'](_0x374df7))return Cesium$7[_0x1c8990(0x169)]['PARTIAL'];var _0x573e74,_0x44afb8=_0x530013['computeVisibility'](_0x374df7);if(_0x44afb8===Cesium$7[_0x1c8990(0x161)]['OUTSIDE'])_0x573e74=Cesium$7['Visibility']['NONE'];else{if(_0x44afb8===Cesium$7['Intersect'][_0x1c8990(0x155)])_0x573e74=Cesium$7['Visibility'][_0x1c8990(0xf7)];else _0x44afb8===Cesium$7['Intersect']['INSIDE']&&(_0x573e74=Cesium$7[_0x1c8990(0x169)]['FULL']);}if(_0x573e74===Cesium$7['Visibility']['NONE'])return _0x573e74;return _0x573e74;}},{'key':'canRefine','value':function _0x5679cb(_0x573460){var _0x1a512=_0x19e1ab;if(Cesium$7[_0x1a512(0x12d)](_0x573460['data']['primitive']))return!![];var _0x1314b8=this['_terrainProvider'][_0x1a512(0x10a)](_0x573460['x']*0x2,_0x573460['y']*0x2,_0x573460[_0x1a512(0x198)]+0x1);return _0x1314b8!==undefined;}},{'key':'canRenderWithoutLosingDetail','value':function _0x1c6c13(_0x200372,_0x4f5d66){var _0x65c246=_0x19e1ab,_0x267676=_0x200372['data'],_0x843b20=readyImageryScratch;_0x843b20['length']=this[_0x65c246(0x151)][_0x65c246(0x117)];var _0x2ef6e0=![],_0x1b00c4=![],_0x14a215;Cesium$7[_0x65c246(0x12d)](_0x267676)&&(_0x2ef6e0=_0x267676['geometryState']===Cesium$7['TerrainState']['READY'],_0x1b00c4=!![],_0x14a215=_0x267676['imagery']);var _0x2cfab5,_0x431838;for(_0x2cfab5=0x0,_0x431838=_0x843b20['length'];_0x2cfab5<_0x431838;++_0x2cfab5){_0x843b20[_0x2cfab5]=_0x1b00c4;}if(Cesium$7['defined'](_0x14a215))for(_0x2cfab5=0x0,_0x431838=_0x14a215[_0x65c246(0x117)];_0x2cfab5<_0x431838;++_0x2cfab5){var _0x1088f4=_0x14a215[_0x2cfab5],_0xdb025c=_0x1088f4['loadingImagery'],_0x52bcb8=!Cesium$7['defined'](_0xdb025c)||_0xdb025c[_0x65c246(0xdf)]===Cesium$7['ImageryState']['FAILED']||_0xdb025c[_0x65c246(0xdf)]===Cesium$7[_0x65c246(0x142)]['INVALID'],_0x5a4d2e=(_0x1088f4[_0x65c246(0x1de)]||_0x1088f4['readyImagery'])['imageryLayer'][_0x65c246(0xd1)];_0x843b20[_0x5a4d2e]=_0x52bcb8&&_0x843b20[_0x5a4d2e];}var _0x37d235=this['quadtree']['_lastSelectionFrameNumber'],_0x3061fa=canRenderTraversalStack;_0x3061fa[_0x65c246(0x117)]=0x0,_0x3061fa['push'](_0x200372['southwestChild'],_0x200372[_0x65c246(0xf9)],_0x200372['northwestChild'],_0x200372['northeastChild']);while(_0x3061fa['length']>0x0){var _0xba2bda=_0x3061fa['pop'](),_0x263ae0=_0xba2bda['_lastSelectionResultFrame']===_0x37d235?_0xba2bda['_lastSelectionResult']:Cesium$7['TileSelectionResult'][_0x65c246(0x9b)];if(_0x263ae0===Cesium$7['TileSelectionResult']['RENDERED']){var _0x2fb440=_0xba2bda[_0x65c246(0xad)];if(!Cesium$7['defined'](_0x2fb440))continue;if(!_0x2ef6e0&&_0xba2bda[_0x65c246(0xad)]['geometryState']===Cesium$7['TerrainState'][_0x65c246(0x189)])return![];var _0x48eaa0=_0xba2bda['data']['imagery'];for(_0x2cfab5=0x0,_0x431838=_0x48eaa0['length'];_0x2cfab5<_0x431838;++_0x2cfab5){var _0x11dc89=_0x48eaa0[_0x2cfab5],_0x82f0fa=_0x11dc89['loadingImagery'],_0x4774a6=!Cesium$7['defined'](_0x82f0fa)||_0x82f0fa['state']===Cesium$7[_0x65c246(0x142)]['FAILED']||_0x82f0fa[_0x65c246(0xdf)]===Cesium$7['ImageryState']['INVALID'],_0x479f2c=(_0x11dc89[_0x65c246(0x1de)]||_0x11dc89[_0x65c246(0xf1)])['imageryLayer']['_layerIndex'];if(_0x4774a6&&!_0x843b20[_0x479f2c])return![];}}else _0x263ae0===Cesium$7['TileSelectionResult']['REFINED']&&_0x3061fa['push'](_0xba2bda[_0x65c246(0x100)],_0xba2bda[_0x65c246(0xf9)],_0xba2bda['northwestChild'],_0xba2bda[_0x65c246(0xce)]);}return!![];}},{'key':'computeTileLoadPriority','value':function _0x1b86f6(_0x397b89,_0x5d5299){var _0x12397f=_0x19e1ab,_0x60079a=_0x397b89['data'];if(_0x60079a===undefined)return 0x0;var _0x2f1126=_0x60079a['tileBoundingRegion']['boundingVolume'];if(_0x2f1126===undefined)return 0x0;var _0x27dd4c=_0x5d5299['camera']['positionWC'],_0x1891a4=_0x5d5299['camera']['directionWC'],_0x2fa59a=Cesium$7['Cartesian3'][_0x12397f(0x92)](_0x2f1126['center'],_0x27dd4c,tileDirectionScratch),_0x448025=Cesium$7[_0x12397f(0x17e)]['magnitude'](_0x2fa59a);if(_0x448025<Cesium$7[_0x12397f(0x180)]['EPSILON5'])return 0x0;return Cesium$7['Cartesian3']['divideByScalar'](_0x2fa59a,_0x448025,_0x2fa59a),(0x1-Cesium$7['Cartesian3']['dot'](_0x2fa59a,_0x1891a4))*_0x397b89['_distance'];}},{'key':_0x19e1ab(0x10c),'value':function _0x15749f(_0x322fe4,_0x128b21){var _0x342a2b=_0x19e1ab,_0x76ee31=0x0,_0xe67343=_0x322fe4[_0x342a2b(0xad)]['imagery'];for(var _0x5c1360=0x0,_0x2753b8=_0xe67343['length'];_0x5c1360<_0x2753b8;++_0x5c1360){var _0x3dd148=_0xe67343[_0x5c1360];Cesium$7[_0x342a2b(0x12d)](_0x3dd148['readyImagery'])&&_0x3dd148['readyImagery']['imageryLayer']['alpha']!==0x0&&++_0x76ee31;}var _0x16cf63=this['_tilesToRenderByTextureCount'][_0x76ee31];!Cesium$7[_0x342a2b(0x12d)](_0x16cf63)&&(_0x16cf63=[],this['_tilesToRenderByTextureCount'][_0x76ee31]=_0x16cf63);_0x16cf63['push'](_0x322fe4);var _0x4b3fb5=this[_0x342a2b(0xd9)];++_0x4b3fb5['tilesRendered'],_0x4b3fb5[_0x342a2b(0x8e)]+=_0x76ee31;}},{'key':'computeDistanceToTile','value':function _0x4cdca9(_0x42fb10,_0x200702){updateTileBoundingRegion(_0x42fb10,_0x200702);var _0x5307a2=_0x42fb10['data']['tileBoundingRegion'];return _0x5307a2['distanceToCamera'](_0x200702);}},{'key':'isDestroyed','value':function _0x49385f(){return![];}},{'key':'destroy','value':function _0xa9d1a4(){return Cesium$7['destroyObject'](this);}},{'key':'_onLayerAdded','value':function _0x3ed1a4(_0x25c328,_0x14cbf0){var _0x494235=_0x19e1ab;if(_0x25c328['show']){var _0xf6d0b2=this['_terrainProvider'],_0x5d5014=this,_0x2ac528=_0x25c328['imageryProvider'],_0x306ec9=this[_0x494235(0x17a)];_0x2ac528[_0x494235(0x1b0)]=function(){var _0x543812=_0x494235;_0x25c328[_0x543812(0x97)]={},_0x5d5014[_0x543812(0x191)][_0x543812(0x7f)](function(_0x4d70b7){var _0x230369=_0x543812;if(Cesium$7['defined'](_0x4d70b7['_loadedCallbacks'][_0x25c328[_0x230369(0xd1)]]))return;var _0x155fba,_0x52cc32=_0x4d70b7['data'][_0x230369(0x171)],_0x1cb0ec=_0x52cc32[_0x230369(0x117)],_0x75127f=-0x1,_0x24b423=0x0;for(_0x155fba=0x0;_0x155fba<_0x1cb0ec;++_0x155fba){var _0x4eb33c=_0x52cc32[_0x155fba],_0x5cecfa=Cesium$7['defaultValue'](_0x4eb33c[_0x230369(0xf1)],_0x4eb33c['loadingImagery']);if(_0x5cecfa['imageryLayer']===_0x25c328)_0x75127f===-0x1&&(_0x75127f=_0x155fba),++_0x24b423;else{if(_0x75127f!==-0x1)break;}}if(_0x75127f===-0x1)return;var _0x5204c8=_0x75127f+_0x24b423;_0x25c328[_0x230369(0xbc)](_0x4d70b7,_0xf6d0b2,_0x5204c8)&&(_0x4d70b7['_loadedCallbacks'][_0x25c328['_layerIndex']]=getTileReadyCallback(_0x24b423,_0x25c328,_0xf6d0b2),_0x4d70b7['state']=Cesium$7['QuadtreeTileLoadState']['LOADING']);});},this[_0x494235(0x191)]['forEachLoadedTile'](function(_0x40e619){var _0x50aa23=_0x494235;_0x25c328[_0x50aa23(0xbc)](_0x40e619,_0xf6d0b2)&&(_0x40e619['state']=Cesium$7['QuadtreeTileLoadState']['LOADING'],_0x40e619['level']!==0x0&&(_0x40e619['_lastSelectionResultFrame']!==_0x5d5014[_0x50aa23(0x87)]['_lastSelectionFrameNumber']||_0x40e619['_lastSelectionResult']!==Cesium$7['TileSelectionResult']['RENDERED'])&&(_0x40e619['renderable']=![]));}),this['_layerOrderChanged']=!![],_0x306ec9['raiseEvent']();}}},{'key':'_onLayerRemoved','value':function _0x11a049(_0x302b52,_0x2d4ab0){var _0xdba151=_0x19e1ab;this['_quadtree'][_0xdba151(0x7f)](function(_0x3384c4){var _0x22e0c8=_0xdba151,_0x90f637=_0x3384c4['data'][_0x22e0c8(0x171)],_0x27f365=-0x1,_0x1b5832=0x0;for(var _0x8ab2d=0x0,_0x49df5a=_0x90f637[_0x22e0c8(0x117)];_0x8ab2d<_0x49df5a;++_0x8ab2d){var _0x1fb237=_0x90f637[_0x8ab2d],_0x57dc2b=_0x1fb237[_0x22e0c8(0x1de)];!Cesium$7['defined'](_0x57dc2b)&&(_0x57dc2b=_0x1fb237[_0x22e0c8(0xf1)]);if(_0x57dc2b[_0x22e0c8(0x139)]===_0x302b52)_0x27f365===-0x1&&(_0x27f365=_0x8ab2d),_0x1fb237[_0x22e0c8(0xb3)](),++_0x1b5832;else{if(_0x27f365!==-0x1)break;}}_0x27f365!==-0x1&&_0x90f637[_0x22e0c8(0xb5)](_0x27f365,_0x1b5832);}),Cesium$7['defined'](_0x302b52['imageryProvider'])&&(_0x302b52['imageryProvider']['_reload']=undefined),this[_0xdba151(0x17a)]['raiseEvent']();}},{'key':'_onLayerMoved','value':function _0x189ec5(_0x451f3b,_0x3bae0d,_0x5e7db0){this['_layerOrderChanged']=!![],this['_imageryLayersUpdatedEvent']['raiseEvent']();}},{'key':'_onLayerShownOrHidden','value':function _0x437f9b(_0x198a68,_0x1d4768,_0x31d24e){var _0x582901=_0x19e1ab;_0x31d24e?this[_0x582901(0x1af)](_0x198a68,_0x1d4768):this['_onLayerRemoved'](_0x198a68,_0x1d4768);}}]),_0x5ba84d;}()),Cesium$6=mars3d__namespace[_0x386a36(0x163)],Cartesian3=Cesium$6[_0x386a36(0x17e)],defaultValue=Cesium$6[_0x386a36(0xcb)],defined=Cesium$6['defined'],getTimestamp=Cesium$6['getTimestamp'],Matrix4=Cesium$6[_0x386a36(0x81)],OrthographicFrustum=Cesium$6[_0x386a36(0x1b1)],OrthographicOffCenterFrustum=Cesium$6['OrthographicOffCenterFrustum'],Ray=Cesium$6['Ray'],Rectangle=Cesium$6[_0x386a36(0x1ac)],Visibility=Cesium$6['Visibility'],QuadtreeOccluders=Cesium$6['QuadtreeOccluders'],QuadtreeTile=Cesium$6[_0x386a36(0x1ae)],QuadtreeTileLoadState=Cesium$6[_0x386a36(0x118)],SceneMode=Cesium$6['SceneMode'],TileReplacementQueue=Cesium$6[_0x386a36(0x1b8)],TileSelectionResult=Cesium$6['TileSelectionResult'];function clearTileLoadQueue(_0x14e9f1){var _0x3e3154=_0x386a36,_0x4921bc=_0x14e9f1[_0x3e3154(0xd9)];_0x4921bc['maxDepth']=0x0,_0x4921bc['maxDepthVisited']=0x0,_0x4921bc['tilesVisited']=0x0,_0x4921bc['tilesCulled']=0x0,_0x4921bc['tilesRendered']=0x0,_0x4921bc[_0x3e3154(0x8c)]=0x0,_0x14e9f1['_tileLoadQueueHigh']['length']=0x0,_0x14e9f1[_0x3e3154(0xda)]['length']=0x0,_0x14e9f1['_tileLoadQueueLow']['length']=0x0;}function invalidateAllTiles(_0x34e6c4){var _0xdb904=_0x386a36,_0x37bd8d=_0x34e6c4[_0xdb904(0x1da)];_0x37bd8d['head']=undefined,_0x37bd8d[_0xdb904(0x1df)]=undefined,_0x37bd8d['count']=0x0,clearTileLoadQueue(_0x34e6c4);var _0x36a667=_0x34e6c4[_0xdb904(0x133)];if(defined(_0x36a667))for(var _0x45161c=0x0;_0x45161c<_0x36a667[_0xdb904(0x117)];++_0x45161c){var _0x596497=_0x36a667[_0x45161c],_0x4ba285=_0x596497['customData'],_0x163dad=_0x4ba285['length'];for(var _0x3f281a=0x0;_0x3f281a<_0x163dad;++_0x3f281a){var _0xde4267=_0x4ba285[_0x3f281a];_0xde4267['level']=0x0,_0x34e6c4['_addHeightCallbacks'][_0xdb904(0x1a7)](_0xde4267);}_0x36a667[_0x45161c]['freeResources']();}_0x34e6c4['_levelZeroTiles']=undefined,_0x34e6c4['_tileProvider'][_0xdb904(0xe8)]();}function updateTileLoadProgress(_0x2bc982,_0x3437a5){var _0x5a319a=_0x386a36,_0x29d2fc=_0x2bc982['_tileLoadQueueHigh']['length']+_0x2bc982['_tileLoadQueueMedium']['length']+_0x2bc982['_tileLoadQueueLow'][_0x5a319a(0x117)];if(_0x29d2fc!==_0x2bc982['_lastTileLoadQueueLength']||_0x2bc982['_tilesInvalidated']){var _0x32d64d=Cesium$6['Event'][_0x5a319a(0x13d)]['raiseEvent'][_0x5a319a(0x9e)](_0x2bc982[_0x5a319a(0x1f2)],_0x29d2fc);_0x3437a5[_0x5a319a(0xee)]['push'](function(){return _0x32d64d(),!![];}),_0x2bc982['_lastTileLoadQueueLength']=_0x29d2fc;}var _0x1f51b8=_0x2bc982['_debug'];_0x1f51b8['enableDebugOutput']&&!_0x1f51b8['suspendLodUpdate']&&(_0x1f51b8['maxDepth']=_0x2bc982['_tilesToRender']['reduce'](function(_0x272269,_0x5443ae){var _0x55800b=_0x5a319a;return Math['max'](_0x272269,_0x5443ae[_0x55800b(0x198)]);},-0x1),_0x1f51b8[_0x5a319a(0xa1)]=_0x2bc982['_tilesToRender'][_0x5a319a(0x117)],(_0x1f51b8['tilesVisited']!==_0x1f51b8['lastTilesVisited']||_0x1f51b8['tilesRendered']!==_0x1f51b8['lastTilesRendered']||_0x1f51b8['tilesCulled']!==_0x1f51b8['lastTilesCulled']||_0x1f51b8[_0x5a319a(0xbe)]!==_0x1f51b8['lastMaxDepth']||_0x1f51b8['tilesWaitingForChildren']!==_0x1f51b8[_0x5a319a(0xd2)]||_0x1f51b8['maxDepthVisited']!==_0x1f51b8['lastMaxDepthVisited'])&&(console['log'](_0x5a319a(0xe6)['concat'](_0x1f51b8['tilesVisited'],',\x20Rendered:\x20')['concat'](_0x1f51b8['tilesRendered'],_0x5a319a(0x8f))['concat'](_0x1f51b8[_0x5a319a(0xd6)],',\x20Max\x20Depth\x20Rendered:\x20')['concat'](_0x1f51b8[_0x5a319a(0xbe)],',\x20Max\x20Depth\x20Visited:\x20')['concat'](_0x1f51b8[_0x5a319a(0x187)],',\x20Waiting\x20for\x20children:\x20')['concat'](_0x1f51b8[_0x5a319a(0x8c)])),_0x1f51b8['lastTilesVisited']=_0x1f51b8['tilesVisited'],_0x1f51b8[_0x5a319a(0x19f)]=_0x1f51b8['tilesRendered'],_0x1f51b8[_0x5a319a(0x1ad)]=_0x1f51b8['tilesCulled'],_0x1f51b8[_0x5a319a(0x1a0)]=_0x1f51b8[_0x5a319a(0xbe)],_0x1f51b8['lastTilesWaitingForChildren']=_0x1f51b8['tilesWaitingForChildren'],_0x1f51b8[_0x5a319a(0x1d4)]=_0x1f51b8['maxDepthVisited']));}var comparisonPoint,centerScratch=new Cesium$6['Cartographic']();function compareDistanceToPoint(_0x1c180a,_0x49256e){var _0x14227c=_0x386a36,_0xde4afb=Rectangle['center'](_0x1c180a[_0x14227c(0xdd)],centerScratch),_0x3893d7=_0xde4afb['longitude']-comparisonPoint[_0x14227c(0x84)],_0x42748d=_0xde4afb[_0x14227c(0x16d)]-comparisonPoint['latitude'];_0xde4afb=Rectangle['center'](_0x49256e['rectangle'],centerScratch);var _0x59c403=_0xde4afb[_0x14227c(0x84)]-comparisonPoint['longitude'],_0x4a6b11=_0xde4afb['latitude']-comparisonPoint['latitude'];return _0x3893d7*_0x3893d7+_0x42748d*_0x42748d-(_0x59c403*_0x59c403+_0x4a6b11*_0x4a6b11);}var cameraOriginScratch=new Cartesian3(),rootTraversalDetails=[];function selectTilesForRendering(_0x3890a5,_0x3b7588){var _0x312522=_0x386a36,_0x381b8a=_0x3890a5['_debug'];if(_0x381b8a['suspendLodUpdate'])return;var _0x49a31a=_0x3890a5['_tilesToRender'];_0x49a31a['length']=0x0;var _0x309f1c,_0x19751d=_0x3890a5['_tileProvider'];if(!defined(_0x3890a5[_0x312522(0x133)])){if(_0x19751d[_0x312522(0xe1)]){var _0x57ef70=_0x19751d['tilingScheme'];_0x3890a5['_levelZeroTiles']=QuadtreeTile['createLevelZeroTiles'](_0x57ef70);var _0x4977da=_0x3890a5[_0x312522(0x133)]['length'];if(rootTraversalDetails['length']<_0x4977da){rootTraversalDetails=new Array(_0x4977da);for(_0x309f1c=0x0;_0x309f1c<_0x4977da;++_0x309f1c){rootTraversalDetails[_0x309f1c]===undefined&&(rootTraversalDetails[_0x309f1c]=new TraversalDetails());}}}else return;}_0x3890a5['_occluders']['ellipsoid']['cameraPosition']=_0x3b7588[_0x312522(0x13a)]['positionWC'];var _0x40be25,_0x6d9860=_0x3890a5['_levelZeroTiles'],_0x564209=_0x6d9860[_0x312522(0x117)]>0x1?_0x3890a5['_occluders']:undefined;comparisonPoint=_0x3b7588['camera']['positionCartographic'],_0x6d9860['sort'](compareDistanceToPoint);var _0x1672bc=_0x3890a5['_addHeightCallbacks'],_0x5b4b67=_0x3890a5['_removeHeightCallbacks'],_0x4ad144=_0x3b7588[_0x312522(0xbd)],_0x3dfe84;if(_0x1672bc['length']>0x0||_0x5b4b67['length']>0x0){for(_0x309f1c=0x0,_0x3dfe84=_0x6d9860['length'];_0x309f1c<_0x3dfe84;++_0x309f1c){_0x40be25=_0x6d9860[_0x309f1c],_0x40be25[_0x312522(0x90)](_0x4ad144,_0x1672bc,_0x5b4b67);}_0x1672bc['length']=0x0,_0x5b4b67['length']=0x0;}var _0x294cf0=_0x3b7588['camera'];_0x3890a5[_0x312522(0x121)]=_0x294cf0['positionCartographic'];var _0x4e1364=Matrix4['getTranslation'](_0x294cf0['transform'],cameraOriginScratch);_0x3890a5['_cameraReferenceFrameOriginCartographic']=_0x3890a5['tileProvider']['tilingScheme']['ellipsoid']['cartesianToCartographic'](_0x4e1364,_0x3890a5['_cameraReferenceFrameOriginCartographic']);for(_0x309f1c=0x0,_0x3dfe84=_0x6d9860[_0x312522(0x117)];_0x309f1c<_0x3dfe84;++_0x309f1c){_0x40be25=_0x6d9860[_0x309f1c],_0x3890a5[_0x312522(0x1da)][_0x312522(0xc7)](_0x40be25),!_0x40be25['renderable']?(queueTileLoad(_0x3890a5,_0x3890a5[_0x312522(0x1e1)],_0x40be25,_0x3b7588),++_0x381b8a['tilesWaitingForChildren']):visitIfVisible(_0x3890a5,_0x40be25,_0x19751d,_0x3b7588,_0x564209,![],rootTraversalDetails[_0x309f1c]);}_0x3890a5['_lastSelectionFrameNumber']=_0x4ad144;}function queueTileLoad(_0x451f06,_0x4844d8,_0x255352,_0x25e46f){var _0x187680=_0x386a36;if(!_0x255352['needsLoading'])return;_0x451f06['tileProvider'][_0x187680(0x190)]!==undefined&&(_0x255352['_loadPriority']=_0x451f06['tileProvider'][_0x187680(0x190)](_0x255352,_0x25e46f)),_0x4844d8['push'](_0x255352);}var traversalQuadsByLevel=new Array(0x1f);for(var i=0x0;i<traversalQuadsByLevel['length'];++i){traversalQuadsByLevel[i]=new TraversalQuadDetails();}function visitTile(_0x123f7e,_0xf93b14,_0x1fe48c,_0x12813f,_0x554c2b){var _0x3e3a9c=_0x386a36,_0x283ba9=_0x123f7e['_debug'];++_0x283ba9[_0x3e3a9c(0x18f)],_0x123f7e['_tileReplacementQueue']['markTileRendered'](_0x1fe48c),_0x1fe48c['_updateCustomData'](_0xf93b14['frameNumber']);_0x1fe48c['level']>_0x283ba9['maxDepthVisited']&&(_0x283ba9[_0x3e3a9c(0x187)]=_0x1fe48c['level']);var _0x2b7465=screenSpaceError(_0x123f7e,_0xf93b14,_0x1fe48c)<_0x123f7e['maximumScreenSpaceError'],_0x2b2b83=_0x1fe48c[_0x3e3a9c(0x100)],_0x2f9154=_0x1fe48c['southeastChild'],_0x26e4ea=_0x1fe48c['northwestChild'],_0x59357b=_0x1fe48c['northeastChild'],_0x166dd9=_0x123f7e[_0x3e3a9c(0x1ea)],_0x20c232=_0x1fe48c[_0x3e3a9c(0x147)]===_0x166dd9?_0x1fe48c['_lastSelectionResult']:TileSelectionResult['NONE'],_0xc143bf=_0x123f7e['tileProvider'];if(_0x2b7465||_0x12813f){var _0x5cf24f=TileSelectionResult[_0x3e3a9c(0x1c0)](_0x20c232)===TileSelectionResult['RENDERED'],_0x351bb8=TileSelectionResult['originalResult'](_0x20c232)===TileSelectionResult['CULLED']||_0x20c232===TileSelectionResult['NONE'],_0x64c8d3=_0x1fe48c['state']===QuadtreeTileLoadState['DONE'],_0x337d3b=_0x5cf24f||_0x351bb8||_0x64c8d3;!_0x337d3b&&(defined(_0xc143bf['canRenderWithoutLosingDetail'])&&(_0x337d3b=_0xc143bf['canRenderWithoutLosingDetail'](_0x1fe48c)));if(_0x337d3b){_0x2b7465&&queueTileLoad(_0x123f7e,_0x123f7e['_tileLoadQueueMedium'],_0x1fe48c,_0xf93b14);addTileToRenderList(_0x123f7e,_0x1fe48c),_0x554c2b['allAreRenderable']=_0x1fe48c['renderable'],_0x554c2b[_0x3e3a9c(0x115)]=_0x20c232===TileSelectionResult['RENDERED'],_0x554c2b[_0x3e3a9c(0x1dd)]=_0x1fe48c['renderable']?0x0:0x1,_0x1fe48c['_lastSelectionResultFrame']=_0xf93b14['frameNumber'],_0x1fe48c['_lastSelectionResult']=TileSelectionResult[_0x3e3a9c(0x94)];!_0x554c2b['anyWereRenderedLastFrame']&&_0x123f7e[_0x3e3a9c(0x103)]['push'](_0x1fe48c);return;}_0x12813f=!![],_0x2b7465&&queueTileLoad(_0x123f7e,_0x123f7e['_tileLoadQueueHigh'],_0x1fe48c,_0xf93b14);}if(_0xc143bf['canRefine'](_0x1fe48c)){var _0x58b48b=_0x2b2b83['upsampledFromParent']&&_0x2f9154['upsampledFromParent']&&_0x26e4ea[_0x3e3a9c(0x111)]&&_0x59357b['upsampledFromParent'];if(_0x58b48b){addTileToRenderList(_0x123f7e,_0x1fe48c),queueTileLoad(_0x123f7e,_0x123f7e[_0x3e3a9c(0xda)],_0x1fe48c,_0xf93b14),_0x123f7e['_tileReplacementQueue']['markTileRendered'](_0x2b2b83),_0x123f7e[_0x3e3a9c(0x1da)]['markTileRendered'](_0x2f9154),_0x123f7e['_tileReplacementQueue']['markTileRendered'](_0x26e4ea),_0x123f7e[_0x3e3a9c(0x1da)]['markTileRendered'](_0x59357b),_0x554c2b['allAreRenderable']=_0x1fe48c[_0x3e3a9c(0xf6)],_0x554c2b[_0x3e3a9c(0x115)]=_0x20c232===TileSelectionResult['RENDERED'],_0x554c2b['notYetRenderableCount']=_0x1fe48c['renderable']?0x0:0x1,_0x1fe48c[_0x3e3a9c(0x147)]=_0xf93b14['frameNumber'],_0x1fe48c[_0x3e3a9c(0x1c6)]=TileSelectionResult['RENDERED'];!_0x554c2b[_0x3e3a9c(0x115)]&&_0x123f7e[_0x3e3a9c(0x103)][_0x3e3a9c(0x1a7)](_0x1fe48c);return;}_0x1fe48c['_lastSelectionResultFrame']=_0xf93b14['frameNumber'],_0x1fe48c[_0x3e3a9c(0x1c6)]=TileSelectionResult['REFINED'];var _0x43585b=_0x123f7e['_tilesToRender']['length'],_0x2ffa46=_0x123f7e[_0x3e3a9c(0x1b3)][_0x3e3a9c(0x117)],_0x4b7631=_0x123f7e['_tileLoadQueueMedium'][_0x3e3a9c(0x117)],_0x15f5f5=_0x123f7e[_0x3e3a9c(0x1e1)]['length'],_0x508b50=_0x123f7e[_0x3e3a9c(0x103)]['length'];visitVisibleChildrenNearToFar(_0x123f7e,_0x2b2b83,_0x2f9154,_0x26e4ea,_0x59357b,_0xf93b14,_0x12813f,_0x554c2b);if(_0x43585b!==_0x123f7e['_tilesToRender']['length']){var _0x86f166=_0x554c2b['allAreRenderable'],_0xe7068f=_0x554c2b['anyWereRenderedLastFrame'],_0x41d303=_0x554c2b[_0x3e3a9c(0x1dd)],_0x56f62d=![];if(!_0x86f166&&!_0xe7068f){var _0xe5b603=_0x123f7e['_tilesToRender'];for(var _0xd08e8f=_0x43585b;_0xd08e8f<_0xe5b603['length'];++_0xd08e8f){var _0x189441=_0xe5b603[_0xd08e8f];while(_0x189441!==undefined&&_0x189441[_0x3e3a9c(0x1c6)]!==TileSelectionResult['KICKED']&&_0x189441!==_0x1fe48c){_0x189441['_lastSelectionResult']=TileSelectionResult[_0x3e3a9c(0xc9)](_0x189441[_0x3e3a9c(0x1c6)]),_0x189441=_0x189441[_0x3e3a9c(0x1d1)];}}_0x123f7e['_tilesToRender']['length']=_0x43585b,_0x123f7e['_tileToUpdateHeights']['length']=_0x508b50,addTileToRenderList(_0x123f7e,_0x1fe48c),_0x1fe48c['_lastSelectionResult']=TileSelectionResult['RENDERED'];var _0x46c8bd=_0x20c232===TileSelectionResult['RENDERED'];!_0x46c8bd&&_0x41d303>_0x123f7e[_0x3e3a9c(0x1dc)]&&(_0x123f7e['_tileLoadQueueLow']['length']=_0x2ffa46,_0x123f7e['_tileLoadQueueMedium'][_0x3e3a9c(0x117)]=_0x4b7631,_0x123f7e[_0x3e3a9c(0x1e1)][_0x3e3a9c(0x117)]=_0x15f5f5,queueTileLoad(_0x123f7e,_0x123f7e['_tileLoadQueueMedium'],_0x1fe48c,_0xf93b14),_0x554c2b[_0x3e3a9c(0x1dd)]=_0x1fe48c[_0x3e3a9c(0xf6)]?0x0:0x1,_0x56f62d=!![]),_0x554c2b['allAreRenderable']=_0x1fe48c['renderable'],_0x554c2b['anyWereRenderedLastFrame']=_0x46c8bd,!_0x46c8bd&&_0x123f7e[_0x3e3a9c(0x103)][_0x3e3a9c(0x1a7)](_0x1fe48c),++_0x283ba9['tilesWaitingForChildren'];}_0x123f7e['preloadAncestors']&&!_0x56f62d&&queueTileLoad(_0x123f7e,_0x123f7e[_0x3e3a9c(0x1b3)],_0x1fe48c,_0xf93b14);}return;}_0x1fe48c['_lastSelectionResultFrame']=_0xf93b14['frameNumber'],_0x1fe48c[_0x3e3a9c(0x1c6)]=TileSelectionResult[_0x3e3a9c(0x94)],addTileToRenderList(_0x123f7e,_0x1fe48c),queueTileLoad(_0x123f7e,_0x123f7e[_0x3e3a9c(0x1e1)],_0x1fe48c,_0xf93b14),_0x554c2b[_0x3e3a9c(0xe5)]=_0x1fe48c[_0x3e3a9c(0xf6)],_0x554c2b[_0x3e3a9c(0x115)]=_0x20c232===TileSelectionResult['RENDERED'],_0x554c2b[_0x3e3a9c(0x1dd)]=_0x1fe48c['renderable']?0x0:0x1;}function visitVisibleChildrenNearToFar(_0x54467f,_0x2e92c1,_0x40ba87,_0x4b0a5c,_0x564bc3,_0x20c06f,_0x46312e,_0x474dd1){var _0x3c766e=_0x386a36,_0x94bc24=_0x20c06f[_0x3c766e(0x13a)][_0x3c766e(0x1d6)],_0x485ed1=_0x54467f['_tileProvider'],_0xbdd9f7=_0x54467f['_occluders'],_0x1b59ad=traversalQuadsByLevel[_0x2e92c1['level']],_0x43421c=_0x1b59ad['southwest'],_0x3ad0de=_0x1b59ad[_0x3c766e(0x1a2)],_0x11bbf9=_0x1b59ad['northwest'],_0x356cc5=_0x1b59ad['northeast'];if(_0x94bc24['longitude']<_0x2e92c1['rectangle']['east'])_0x94bc24[_0x3c766e(0x16d)]<_0x2e92c1[_0x3c766e(0xdd)][_0x3c766e(0xaf)]?(visitIfVisible(_0x54467f,_0x2e92c1,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x43421c),visitIfVisible(_0x54467f,_0x40ba87,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x3ad0de),visitIfVisible(_0x54467f,_0x4b0a5c,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x11bbf9),visitIfVisible(_0x54467f,_0x564bc3,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x356cc5)):(visitIfVisible(_0x54467f,_0x4b0a5c,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x11bbf9),visitIfVisible(_0x54467f,_0x2e92c1,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x43421c),visitIfVisible(_0x54467f,_0x564bc3,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x356cc5),visitIfVisible(_0x54467f,_0x40ba87,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x3ad0de));else _0x94bc24[_0x3c766e(0x16d)]<_0x2e92c1['rectangle']['north']?(visitIfVisible(_0x54467f,_0x40ba87,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x3ad0de),visitIfVisible(_0x54467f,_0x2e92c1,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x43421c),visitIfVisible(_0x54467f,_0x564bc3,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x356cc5),visitIfVisible(_0x54467f,_0x4b0a5c,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x11bbf9)):(visitIfVisible(_0x54467f,_0x564bc3,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x356cc5),visitIfVisible(_0x54467f,_0x4b0a5c,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x11bbf9),visitIfVisible(_0x54467f,_0x40ba87,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x3ad0de),visitIfVisible(_0x54467f,_0x2e92c1,_0x485ed1,_0x20c06f,_0xbdd9f7,_0x46312e,_0x43421c));_0x1b59ad['combine'](_0x474dd1);}function containsNeededPosition(_0x2cb7dd,_0x1a7553){var _0x900691=_0x386a36,_0x5d690d=_0x1a7553['rectangle'];return defined(_0x2cb7dd[_0x900691(0x121)])&&Rectangle['contains'](_0x5d690d,_0x2cb7dd['_cameraPositionCartographic'])||defined(_0x2cb7dd['_cameraReferenceFrameOriginCartographic'])&&Rectangle['contains'](_0x5d690d,_0x2cb7dd['_cameraReferenceFrameOriginCartographic']);}function visitIfVisible(_0x6d7cac,_0x1aedc0,_0x4c2f5c,_0x5bea7c,_0x49ef77,_0x113db1,_0x4f8921){var _0x2559e7=_0x386a36;if(_0x4c2f5c['computeTileVisibility'](_0x1aedc0,_0x5bea7c,_0x49ef77)!==Visibility['NONE'])return visitTile(_0x6d7cac,_0x5bea7c,_0x1aedc0,_0x113db1,_0x4f8921);++_0x6d7cac['_debug']['tilesCulled'],_0x6d7cac['_tileReplacementQueue']['markTileRendered'](_0x1aedc0),_0x4f8921['allAreRenderable']=!![],_0x4f8921['anyWereRenderedLastFrame']=![],_0x4f8921['notYetRenderableCount']=0x0;if(containsNeededPosition(_0x6d7cac,_0x1aedc0)){(!defined(_0x1aedc0['data'])||!defined(_0x1aedc0[_0x2559e7(0xad)][_0x2559e7(0x137)]))&&queueTileLoad(_0x6d7cac,_0x6d7cac[_0x2559e7(0xda)],_0x1aedc0,_0x5bea7c);var _0x1979ce=_0x6d7cac['_lastSelectionFrameNumber'],_0x1f543a=_0x1aedc0['_lastSelectionResultFrame']===_0x1979ce?_0x1aedc0['_lastSelectionResult']:TileSelectionResult['NONE'];_0x1f543a!==TileSelectionResult[_0x2559e7(0x144)]&&_0x1f543a!==TileSelectionResult[_0x2559e7(0x94)]&&_0x6d7cac['_tileToUpdateHeights']['push'](_0x1aedc0),_0x1aedc0['_lastSelectionResult']=TileSelectionResult['CULLED_BUT_NEEDED'];}else _0x6d7cac['preloadSiblings']||_0x1aedc0['level']===0x0?(queueTileLoad(_0x6d7cac,_0x6d7cac['_tileLoadQueueLow'],_0x1aedc0,_0x5bea7c),_0x1aedc0[_0x2559e7(0x1c6)]=TileSelectionResult[_0x2559e7(0xc5)]):_0x1aedc0['_lastSelectionResult']=TileSelectionResult['CULLED'];_0x1aedc0[_0x2559e7(0x147)]=_0x5bea7c['frameNumber'];}function screenSpaceError(_0x198d2f,_0x26b397,_0x3fd86b){var _0x4583c3=_0x386a36;if(_0x26b397['mode']===SceneMode['SCENE2D']||_0x26b397['camera']['frustum']instanceof OrthographicFrustum||_0x26b397['camera']['frustum']instanceof OrthographicOffCenterFrustum)return screenSpaceError2D(_0x198d2f,_0x26b397,_0x3fd86b);var _0x3071a8=_0x198d2f['_tileProvider']['getLevelMaximumGeometricError'](_0x3fd86b['level']),_0x4cff38=_0x3fd86b[_0x4583c3(0xdc)],_0x19904e=_0x26b397[_0x4583c3(0x179)][_0x4583c3(0x14f)],_0x5c2d71=_0x26b397[_0x4583c3(0x13a)]['frustum']['sseDenominator'],_0x170470=_0x3071a8*_0x19904e/(_0x4cff38*_0x5c2d71);return _0x26b397['fog']['enabled']&&(_0x170470-=Cesium$6['Math'][_0x4583c3(0x1c2)](_0x4cff38,_0x26b397[_0x4583c3(0x1c2)][_0x4583c3(0x168)])*_0x26b397['fog']['sse']),_0x170470/=_0x26b397['pixelRatio'],_0x170470;}function screenSpaceError2D(_0x55f433,_0x15c95a,_0x11a4f7){var _0x494b2e=_0x386a36,_0x2878f5=_0x15c95a['camera'],_0x13e0f5=_0x2878f5['frustum'];defined(_0x13e0f5['_offCenterFrustum'])&&(_0x13e0f5=_0x13e0f5['_offCenterFrustum']);var _0x524f87=_0x15c95a[_0x494b2e(0x179)],_0x204031=_0x524f87[_0x494b2e(0x114)],_0x3bc59b=_0x524f87['drawingBufferHeight'],_0x1b9c06=_0x55f433['_tileProvider'][_0x494b2e(0xd4)](_0x11a4f7['level']),_0x3bb854=Math['max'](_0x13e0f5['top']-_0x13e0f5[_0x494b2e(0x1ab)],_0x13e0f5['right']-_0x13e0f5['left'])/Math[_0x494b2e(0x91)](_0x204031,_0x3bc59b),_0x1f331d=_0x1b9c06/_0x3bb854;return _0x15c95a[_0x494b2e(0x1c2)][_0x494b2e(0x19e)]&&_0x15c95a['mode']!==SceneMode[_0x494b2e(0x1e3)]&&(_0x1f331d-=Cesium$6[_0x494b2e(0x180)]['fog'](_0x11a4f7['_distance'],_0x15c95a['fog'][_0x494b2e(0x168)])*_0x15c95a['fog'][_0x494b2e(0x148)]),_0x1f331d/=_0x15c95a['pixelRatio'],_0x1f331d;}function addTileToRenderList(_0x278108,_0x2c6349){_0x278108['_tilesToRender']['push'](_0x2c6349);}function processTileLoadQueue(_0x3b2417,_0x30866e){var _0x34c79b=_0x386a36,_0x25890a=_0x3b2417['_tileLoadQueueHigh'],_0x466d6f=_0x3b2417['_tileLoadQueueMedium'],_0x5ebe19=_0x3b2417[_0x34c79b(0x1b3)];if(_0x25890a['length']===0x0&&_0x466d6f['length']===0x0&&_0x5ebe19['length']===0x0)return;_0x3b2417[_0x34c79b(0x1da)][_0x34c79b(0x1e4)](_0x3b2417['tileCacheSize']);var _0x3e3257=getTimestamp()+_0x3b2417['_loadQueueTimeSlice'],_0x2bff33=_0x3b2417['_tileProvider'],_0x2f2f43=processSinglePriorityLoadQueue(_0x3b2417,_0x30866e,_0x2bff33,_0x3e3257,_0x25890a,![]);_0x2f2f43=processSinglePriorityLoadQueue(_0x3b2417,_0x30866e,_0x2bff33,_0x3e3257,_0x466d6f,_0x2f2f43),processSinglePriorityLoadQueue(_0x3b2417,_0x30866e,_0x2bff33,_0x3e3257,_0x5ebe19,_0x2f2f43);}function sortByLoadPriority(_0x88ca4f,_0x42b335){var _0x383501=_0x386a36;return _0x88ca4f[_0x383501(0x14a)]-_0x42b335[_0x383501(0x14a)];}function processSinglePriorityLoadQueue(_0x3efc75,_0x25c7dc,_0x1eebb4,_0xdaa77d,_0x304d0a,_0x25f1e4){var _0x1d8159=_0x386a36;_0x1eebb4[_0x1d8159(0x190)]!==undefined&&_0x304d0a['sort'](sortByLoadPriority);for(var _0x3485b2=0x0,_0x79637f=_0x304d0a[_0x1d8159(0x117)];_0x3485b2<_0x79637f&&(getTimestamp()<_0xdaa77d||!_0x25f1e4);++_0x3485b2){var _0x54cb23=_0x304d0a[_0x3485b2];_0x3efc75['_tileReplacementQueue']['markTileRendered'](_0x54cb23),_0x1eebb4['loadTile'](_0x25c7dc,_0x54cb23),_0x25f1e4=!![];}return _0x25f1e4;}var scratchRay=new Ray(),scratchCartographic=new Cesium$6['Cartographic'](),scratchPosition=new Cartesian3(),scratchArray=[];function updateHeights(_0x1a0d14,_0x58784d){var _0x43f7af=_0x386a36;if(!_0x1a0d14[_0x43f7af(0x1d3)][_0x43f7af(0xe1)])return;var _0x4ff565=scratchArray;_0x4ff565['length']=0x0;var _0x4946df=_0x1a0d14[_0x43f7af(0x103)],_0xa5fd21=getTimestamp(),_0xbd0a0=_0x1a0d14['_updateHeightsTimeSlice'],_0x460b0e=_0xa5fd21+_0xbd0a0,_0x1c4070=_0x58784d[_0x43f7af(0xd0)],_0x41f478=_0x58784d['mapProjection'],_0x456385=_0x1a0d14['tileProvider'][_0x43f7af(0x1b9)]['ellipsoid'],_0x29a183;while(_0x4946df['length']>0x0){var _0x24395f=_0x4946df[0x0];if(!defined(_0x24395f['data'])||!defined(_0x24395f['data'][_0x43f7af(0x134)])){var _0x15e9f7=_0x24395f['_lastSelectionResultFrame']===_0x1a0d14['_lastSelectionFrameNumber']?_0x24395f['_lastSelectionResult']:TileSelectionResult['NONE'];(_0x15e9f7===TileSelectionResult['RENDERED']||_0x15e9f7===TileSelectionResult['CULLED_BUT_NEEDED'])&&_0x4ff565['push'](_0x24395f);_0x4946df['shift'](),_0x1a0d14['_lastTileIndex']=0x0;continue;}var _0x523b04=_0x24395f['customData'],_0x4f2e1f=_0x523b04['length'],_0x15724b=![];for(_0x29a183=_0x1a0d14[_0x43f7af(0xb1)];_0x29a183<_0x4f2e1f;++_0x29a183){var _0x40d52a=_0x523b04[_0x29a183],_0x3f3680=_0x24395f['data'][_0x43f7af(0xeb)],_0x388344=defined(_0x3f3680)&&_0x3f3680[_0x43f7af(0x18d)]();if(_0x24395f['level']>_0x40d52a['level']&&!_0x388344){!defined(_0x40d52a['positionOnEllipsoidSurface'])&&(_0x40d52a['positionOnEllipsoidSurface']=Cartesian3['fromRadians'](_0x40d52a['positionCartographic']['longitude'],_0x40d52a[_0x43f7af(0x1d6)]['latitude'],0x0,_0x456385));if(_0x1c4070===SceneMode['SCENE3D']){var _0x30758b=_0x456385['geodeticSurfaceNormal'](_0x40d52a['positionOnEllipsoidSurface'],scratchRay[_0x43f7af(0x192)]),_0x33f72b=_0x456385[_0x43f7af(0x18a)](_0x40d52a[_0x43f7af(0x184)],0x2cec,scratchRay[_0x43f7af(0x109)]);if(!defined(_0x33f72b)){var _0x40faf6=0x0;defined(_0x24395f['data']['tileBoundingRegion'])&&(_0x40faf6=_0x24395f[_0x43f7af(0xad)]['tileBoundingRegion']['minimumHeight']);var _0x325024=Math['min'](_0x40faf6,-0x2cec),_0x19cb40=Cartesian3[_0x43f7af(0x7a)](_0x30758b,Math[_0x43f7af(0x9d)](_0x325024)+0x1,scratchPosition);Cartesian3['subtract'](_0x40d52a['positionOnEllipsoidSurface'],_0x19cb40,scratchRay['origin']);}}else Cesium$6[_0x43f7af(0x98)]['clone'](_0x40d52a['positionCartographic'],scratchCartographic),scratchCartographic['height']=-0x2cec,_0x41f478['project'](scratchCartographic,scratchPosition),Cartesian3[_0x43f7af(0x19c)](scratchPosition['z'],scratchPosition['x'],scratchPosition['y'],scratchPosition),Cartesian3[_0x43f7af(0x1d2)](scratchPosition,scratchRay[_0x43f7af(0x109)]),Cartesian3['clone'](Cartesian3['UNIT_X'],scratchRay['direction']);var _0x56295f=_0x24395f['data']['pick'](scratchRay,_0x1c4070,_0x41f478,![],scratchPosition);defined(_0x56295f)&&(defined(_0x40d52a['callback'])&&_0x40d52a['callback'](_0x56295f),_0x40d52a[_0x43f7af(0x198)]=_0x24395f['level']);}if(getTimestamp()>=_0x460b0e){_0x15724b=!![];break;}}if(_0x15724b){_0x1a0d14['_lastTileIndex']=_0x29a183;break;}else _0x1a0d14[_0x43f7af(0xb1)]=0x0,_0x4946df['shift']();}for(_0x29a183=0x0;_0x29a183<_0x4ff565['length'];_0x29a183++){_0x4946df['push'](_0x4ff565[_0x29a183]);}}function createRenderCommandsForSelectedTiles(_0x277111,_0x5dd5e2){var _0x398a89=_0x386a36,_0x4a5ba0=_0x277111['_tileProvider'],_0xdd5c09=_0x277111['_tilesToRender'];for(var _0x1ddc1d=0x0,_0x439080=_0xdd5c09['length'];_0x1ddc1d<_0x439080;++_0x1ddc1d){var _0x206d16=_0xdd5c09[_0x1ddc1d];_0x4a5ba0[_0x398a89(0x10c)](_0x206d16,_0x5dd5e2);}}var QuadtreePrimitive=(function(){var _0x8b1885=_0x386a36;function _0x98c12(_0x4941d8){var _0x32a30e=_0x4dbc,_0x26d160=this;_classCallCheck(this,_0x98c12),this['_tileProvider']=new GlobeSurfaceTileProvider(_0x4941d8[_0x32a30e(0xba)]),this['_tileProvider']['quadtree']=this,this[_0x32a30e(0xf5)]['imageryLayersUpdatedEvent']['addEventListener'](function(){_0x26d160['_tilesInvalidated']=!![];}),this['_debug']={'enableDebugOutput':![],'maxDepth':0x0,'maxDepthVisited':0x0,'tilesVisited':0x0,'tilesCulled':0x0,'tilesRendered':0x0,'tilesWaitingForChildren':0x0,'lastMaxDepth':-0x1,'lastMaxDepthVisited':-0x1,'lastTilesVisited':-0x1,'lastTilesCulled':-0x1,'lastTilesRendered':-0x1,'lastTilesWaitingForChildren':-0x1,'suspendLodUpdate':![]};var _0x3cc93b=this['_tileProvider'][_0x32a30e(0x1b9)],_0x323d96=_0x3cc93b[_0x32a30e(0x1b5)];this['_tilesToRender']=[],this['_tileLoadQueueHigh']=[],this['_tileLoadQueueMedium']=[],this[_0x32a30e(0x1b3)]=[],this['_tileReplacementQueue']=new TileReplacementQueue(),this[_0x32a30e(0x133)]=undefined,this['_loadQueueTimeSlice']=0x5,this[_0x32a30e(0x160)]=![],this['_addHeightCallbacks']=[],this['_removeHeightCallbacks']=[],this['_tileToUpdateHeights']=[],this['_lastTileIndex']=0x0,this['_updateHeightsTimeSlice']=0x2,this['_cameraPositionCartographic']=undefined,this['_cameraReferenceFrameOriginCartographic']=undefined,this['maximumScreenSpaceError']=defaultValue(_0x4941d8['maximumScreenSpaceError'],0x2),this[_0x32a30e(0x110)]=defaultValue(_0x4941d8['tileCacheSize'],0x64),this['loadingDescendantLimit']=0x14,this['preloadAncestors']=!![],this['preloadSiblings']=![],this[_0x32a30e(0xe7)]=new QuadtreeOccluders({'ellipsoid':_0x323d96}),this[_0x32a30e(0x1f2)]=new Cesium$6[(_0x32a30e(0xae))](),this['_lastTileLoadQueueLength']=0x0,this['_lastSelectionFrameNumber']=undefined,this[_0x32a30e(0x12c)]=![],Cesium$6['GroundPrimitive'][_0x32a30e(0x1f3)]?Cesium$6[_0x32a30e(0xcf)]['initializeTerrainHeights']()['then'](function(){setTimeout(function(){var _0x352f23=_0x4dbc;_0x26d160[_0x352f23(0x12c)]=!![];},0xbb8);}):setTimeout(function(){_0x26d160['isReady']=!![];},0xbb8);}return _createClass(_0x98c12,[{'key':'tileProvider','get':function _0x11341c(){return this['_tileProvider'];}},{'key':'tileLoadProgressEvent','get':function _0x10f364(){return this['_tileLoadProgressEvent'];}},{'key':'occluders','get':function _0x419e97(){return this['_occluders'];}},{'key':_0x8b1885(0x1ef),'get':function _0x4329d3(){return this['_tileProvider']['classificationType'];},'set':function _0x36c134(_0x81b68b){this['_tileProvider']['classificationType']=_0x81b68b;}},{'key':_0x8b1885(0x186),'value':function _0x2ee1d6(){var _0x5ea44d=_0x8b1885;this[_0x5ea44d(0x160)]=!![];}},{'key':'forEachLoadedTile','value':function _0x4f42fb(_0x4c81ef){var _0x3b06d1=this['_tileReplacementQueue']['head'];while(defined(_0x3b06d1)){_0x3b06d1['state']!==QuadtreeTileLoadState['START']&&_0x4c81ef(_0x3b06d1),_0x3b06d1=_0x3b06d1['replacementNext'];}}},{'key':'prePassesUpdate','value':function _0x34303e(_0x52b502){var _0x328fc1=_0x8b1885;if(!this['isReady'])return;defined(this['_tileProvider']['update'])&&this['_tileProvider']['update'](_0x52b502);var _0xdaa111=_0x52b502['passes'];if(!_0xdaa111[_0x328fc1(0x10b)])return;this['_tilesInvalidated']&&(invalidateAllTiles(this),this['_tilesInvalidated']=![]);this[_0x328fc1(0xf5)]['initialize'](_0x52b502),clearTileLoadQueue(this);if(this['_debug']['suspendLodUpdate'])return;this[_0x328fc1(0x1da)][_0x328fc1(0x141)]();}},{'key':'update','value':function _0x45e6ed(_0x2fc344){var _0x5890d5=_0x8b1885;if(!this[_0x5890d5(0x12c)])return;var _0x5f0e47=_0x2fc344['passes'],_0x26f11a=this['_tileProvider'];_0x5f0e47[_0x5890d5(0x10b)]&&(_0x26f11a['beginUpdate'](_0x2fc344),selectTilesForRendering(this,_0x2fc344),createRenderCommandsForSelectedTiles(this,_0x2fc344),_0x26f11a['endUpdate'](_0x2fc344));}},{'key':_0x8b1885(0xa6),'value':function _0xfde607(_0x23735b){if(!this['isReady'])return;var _0x5478c8=_0x23735b['passes'];if(!_0x5478c8['render']||_0x23735b['mode']===SceneMode['MORPHING'])return;processTileLoadQueue(this,_0x23735b),updateHeights(this,_0x23735b),updateTileLoadProgress(this,_0x23735b);}},{'key':_0x8b1885(0xb0),'value':function _0x3e5df8(){return![];}},{'key':'destroy','value':function _0x320e81(){this['_tileProvider']=this['_tileProvider']&&this['_tileProvider']['destroy']();}}]),_0x98c12;}()),Cesium$5=mars3d__namespace['Cesium'];Object[_0x386a36(0x14c)](mars3d__namespace['Map']['prototype'],{'imageryLayersForClamp':{'get':function get(){var _0x5ad463=_0x386a36;if(!this[_0x5ad463(0x143)]){this[_0x5ad463(0x143)]=new Cesium$5[(_0x5ad463(0x7c))]();var _0x4494d9=new QuadtreePrimitive({'imageryLayers':this['_imageryLayersForClamp']});this[_0x5ad463(0x14d)]['primitives']['add'](_0x4494d9);}return this[_0x5ad463(0x143)];}}});var MultipleLightShader='uniform\x20sampler2D\x20colorTexture;\x0auniform\x20sampler2D\x20depthTexture;\x0a\x0aconst\x20int\x20LightNum\x20=\x20Mars3D_LightNumValue;\x0auniform\x20vec4\x20lightPositionEC[LightNum];\x0auniform\x20float\x20intensity[LightNum];\x0auniform\x20vec3\x20lightColor[LightNum];\x0auniform\x20vec3\x20direction[LightNum];\x0auniform\x20float\x20outerConeCos[LightNum];\x0auniform\x20float\x20innerConeCos[LightNum];\x0auniform\x20mat4\x20shadowMapMatrix[LightNum];\x0auniform\x20vec4\x20shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[LightNum];\x0auniform\x20vec2\x20shadowMapDarknessType[LightNum];\x0a\x0aMars3D_LightShadowMapsShader\x20in\x20vec2\x20v_textureCoordinates;\x0a\x0aconst\x20float\x20M_PI\x20=\x203.141592653589793;\x0a\x0avec3\x20getEyeCoordinate3FromWindowCoordinateMars3D(vec2\x20fragCoord,\x20float\x20logDepthOrDepth)\x20{\x0avec4\x20eyeCoordinate\x20=\x20czm_windowToEyeCoordinates(fragCoord,\x20logDepthOrDepth);\x0areturn\x20eyeCoordinate.xyz\x20/\x20eyeCoordinate.w;\x0a}\x0a\x0avec3\x20vectorFromOffsetMars3D(vec4\x20eyeCoordinate,\x20vec2\x20positiveOffset)\x20{\x0avec2\x20glFragCoordXY\x20=\x20v_textureCoordinates.xy\x20*\x20czm_viewport.zw;\x0afloat\x20upOrRightLogDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20(glFragCoordXY\x20+\x20positiveOffset)\x20/\x20czm_viewport.zw));\x0afloat\x20downOrLeftLogDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20(glFragCoordXY\x20-\x20positiveOffset)\x20/\x20czm_viewport.zw));\x0a\x0abvec2\x20upOrRightInBounds\x20=\x20lessThan(glFragCoordXY\x20+\x20positiveOffset,\x20czm_viewport.zw);\x0afloat\x20useUpOrRight\x20=\x20float(upOrRightLogDepth\x20>\x200.0\x20&&\x20upOrRightInBounds.x\x20&&\x20upOrRightInBounds.y);\x0afloat\x20useDownOrLeft\x20=\x20float(useUpOrRight\x20==\x200.0);\x0avec3\x20upOrRightEC\x20=\x20getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY\x20+\x20positiveOffset,\x20upOrRightLogDepth);\x0avec3\x20downOrLeftEC\x20=\x20getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY\x20-\x20positiveOffset,\x20downOrLeftLogDepth);\x0areturn\x20(upOrRightEC\x20-\x20(eyeCoordinate.xyz\x20/\x20eyeCoordinate.w))\x20*\x20useUpOrRight\x20+\x20((eyeCoordinate.xyz\x20/\x20eyeCoordinate.w)\x20-\x20downOrLeftEC)\x20*\x20useDownOrLeft;\x0a}\x0a\x0afloat\x20getRangeAttenuationMars3D(float\x20range,\x20float\x20d)\x20{\x0aif(range\x20<=\x200.0)\x20{\x0areturn\x201.0\x20/\x20pow(d,\x202.0);\x0a}\x0areturn\x20max(min(1.0\x20-\x20pow(d\x20/\x20range,\x204.0),\x201.0),\x200.0)\x20/\x20pow(d,\x202.0);\x0a}\x0a\x0afloat\x20getSpotAttenuationMars3D(vec3\x20pointToLight,\x20vec3\x20direction,\x20float\x20outerConeCos,\x20float\x20innerConeCos)\x20{\x0afloat\x20actualCos\x20=\x20dot(normalize(direction),\x20normalize(-\x20pointToLight));\x0aif(actualCos\x20>\x20outerConeCos)\x20{\x0aif(actualCos\x20<\x20innerConeCos)\x20{\x0areturn\x20smoothstep(outerConeCos,\x20innerConeCos,\x20actualCos);\x0a}\x0areturn\x201.0;\x0a}\x0areturn\x200.0;\x0a}\x0a\x0avec3\x20getLightIntensityMars3D(vec3\x20color,\x20float\x20intensity,\x20float\x20type,\x20float\x20range,\x20vec3\x20pointToLight,\x20vec3\x20direction,\x20float\x20outerConeCos,\x20float\x20innerConeCos)\x20{\x0afloat\x20rangeAttenuation\x20=\x201.0;\x0afloat\x20spotAttenuation\x20=\x201.0;\x0arangeAttenuation\x20=\x20getRangeAttenuationMars3D(range,\x20length(pointToLight));\x0aif(type\x20==\x202.0)\x20{\x0aspotAttenuation\x20=\x20getSpotAttenuationMars3D(pointToLight,\x20direction,\x20outerConeCos,\x20innerConeCos);\x0a}\x0areturn\x20rangeAttenuation\x20*\x20spotAttenuation\x20*\x20intensity\x20*\x20color;\x0a}\x0a\x0afloat\x20czm_private_shadowVisibility(float\x20visibility,\x20float\x20nDotL,\x20float\x20normalShadingSmooth,\x20float\x20darkness)\x20{\x0afloat\x20strength\x20=\x20clamp(nDotL\x20/\x20normalShadingSmooth,\x200.0,\x201.0);\x0avisibility\x20*=\x20strength;\x0avisibility\x20=\x20max(visibility,\x20darkness);\x0areturn\x20visibility;\x0a}\x0a\x0astruct\x20my_shadowParameters\x20{\x0avec3\x20texCoordsCube;\x0avec2\x20texCoords;\x0afloat\x20depthBias;\x0afloat\x20depth;\x0afloat\x20nDotL;\x0avec2\x20texelStepSize;\x0afloat\x20normalShadingSmooth;\x0afloat\x20darkness;\x0a};\x0a\x0afloat\x20shadowVisibilityCubeMars3D(samplerCube\x20shadowMap,\x20my_shadowParameters\x20shadowParameters)\x20{\x0afloat\x20depthBias\x20=\x20shadowParameters.depthBias;\x0afloat\x20depth\x20=\x20shadowParameters.depth;\x0afloat\x20nDotL\x20=\x20shadowParameters.nDotL;\x0afloat\x20normalShadingSmooth\x20=\x20shadowParameters.normalShadingSmooth;\x0afloat\x20darkness\x20=\x20shadowParameters.darkness;\x0avec3\x20uvw\x20=\x20shadowParameters.texCoordsCube;\x0a\x0adepth\x20-=\x20depthBias;\x0areturn\x20czm_shadowDepthCompare(shadowMap,\x20uvw,\x20depth);\x0a}\x0afloat\x20shadowVisibility2D(sampler2D\x20shadowMap,\x20my_shadowParameters\x20shadowParameters)\x20{\x0afloat\x20depthBias\x20=\x20shadowParameters.depthBias;\x0afloat\x20depth\x20=\x20shadowParameters.depth;\x0afloat\x20nDotL\x20=\x20shadowParameters.nDotL;\x0afloat\x20normalShadingSmooth\x20=\x20shadowParameters.normalShadingSmooth;\x0afloat\x20darkness\x20=\x20shadowParameters.darkness;\x0avec2\x20uv\x20=\x20shadowParameters.texCoords;\x0a\x0adepth\x20-=\x20depthBias;\x0areturn\x20czm_shadowDepthCompare(shadowMap,\x20uv,\x20depth);\x0a}\x0a\x0avec3\x20getPointLightTotalColorMars3D(vec3\x20normalEC,\x20vec3\x20positionEC,\x20int\x20i,\x20samplerCube\x20lightShadowMapCube)\x20{\x0avec4\x20lightPEC\x20=\x20lightPositionEC[i];\x0avec2\x20shadowMapDT\x20=\x20shadowMapDarknessType[i];\x0avec3\x20pointToLightEC\x20=\x20positionEC\x20-\x20lightPEC.xyz;\x0afloat\x20pointToLightECLength\x20=\x20length(pointToLightEC);\x0avec3\x20l\x20=\x20normalize(pointToLightEC);\x0afloat\x20NdotL\x20=\x20clamp(dot(-\x20normalEC,\x20l),\x200.0,\x201.0);\x0a\x0afloat\x20visibility\x20=\x200.0;\x0afloat\x20radius\x20=\x20lightPEC.w;\x0afloat\x20type\x20=\x20shadowMapDT.y;\x0a\x0aif(pointToLightECLength\x20<=\x20radius)\x20{\x0avec4\x20shadowMapTSDBANSS\x20=\x20shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];\x0a\x0amy_shadowParameters\x20shadowParameters;\x0ashadowParameters.texelStepSize\x20=\x20shadowMapTSDBANSS.xy;\x0ashadowParameters.depthBias\x20=\x20shadowMapTSDBANSS.z;\x0ashadowParameters.normalShadingSmooth\x20=\x20shadowMapTSDBANSS.w;\x0ashadowParameters.darkness\x20=\x20shadowMapDT.x;\x0ashadowParameters.depth\x20=\x20pointToLightECLength\x20/\x20radius;\x0ashadowParameters.nDotL\x20=\x20NdotL;\x0ashadowParameters.texCoordsCube\x20=\x20czm_inverseViewRotation\x20*\x20l;\x0avisibility\x20=\x20shadowVisibilityCubeMars3D(lightShadowMapCube,\x20shadowParameters);\x0a}\x0a\x0aif(visibility\x20==\x201.0)\x20{\x0avec3\x20colorIntensity\x20=\x20getLightIntensityMars3D(lightColor[i],\x20intensity[i],\x20type,\x20lightPEC.w,\x20pointToLightEC,\x20direction[i],\x20outerConeCos[i],\x20innerConeCos[i]);\x0areturn\x20NdotL\x20*\x20colorIntensity;\x0a}\x0areturn\x20vec3(0.0);\x0a}\x0a\x0avec3\x20getSpotLightTotalColorMars3D(vec3\x20normalEC,\x20vec3\x20positionEC,\x20int\x20i,\x20sampler2D\x20lightShadowMap2D)\x20{\x0avec4\x20lightPEC\x20=\x20lightPositionEC[i];\x0avec2\x20shadowMapDT\x20=\x20shadowMapDarknessType[i];\x0avec3\x20pointToLightEC\x20=\x20positionEC\x20-\x20lightPEC.xyz;\x0avec3\x20l\x20=\x20normalize(pointToLightEC);\x0afloat\x20NdotL\x20=\x20clamp(dot(-\x20normalEC,\x20l),\x200.0,\x201.0);\x0a\x0afloat\x20visibility\x20=\x200.0;\x0afloat\x20type\x20=\x20shadowMapDT.y;\x0a\x0avec4\x20shadowPosition\x20=\x20shadowMapMatrix[i]\x20*\x20vec4(positionEC,\x201.0);\x0ashadowPosition\x20/=\x20shadowPosition.w;\x0aif(!\x20(any(lessThan(shadowPosition.xyz,\x20vec3(0.0)))\x20||\x20any(greaterThan(shadowPosition.xyz,\x20vec3(1.0)))))\x20{\x0avec4\x20shadowMapTSDBANSS\x20=\x20shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];\x0amy_shadowParameters\x20shadowParameters;\x0ashadowParameters.texelStepSize\x20=\x20shadowMapTSDBANSS.xy;\x0ashadowParameters.depthBias\x20=\x20shadowMapTSDBANSS.z;\x0ashadowParameters.normalShadingSmooth\x20=\x20shadowMapTSDBANSS.w;\x0ashadowParameters.darkness\x20=\x20shadowMapDT.x;\x0ashadowParameters.texCoords\x20=\x20shadowPosition.xy;\x0ashadowParameters.depth\x20=\x20shadowPosition.z;\x0ashadowParameters.nDotL\x20=\x20NdotL;\x0avisibility\x20=\x20shadowVisibility2D(lightShadowMap2D,\x20shadowParameters);\x0a}\x0a\x0aif(visibility\x20==\x201.0)\x20{\x0avec3\x20colorIntensity\x20=\x20getLightIntensityMars3D(lightColor[i],\x20intensity[i],\x20type,\x20lightPEC.w,\x20pointToLightEC,\x20direction[i],\x20outerConeCos[i],\x20innerConeCos[i]);\x0areturn\x20NdotL\x20*\x20colorIntensity;\x0a}\x0areturn\x20vec3(0.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20color\x20=\x20texture(colorTexture,\x20v_textureCoordinates);\x0a\x20\x20float\x20logDepthOrDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20v_textureCoordinates));\x0a\x20\x20if(logDepthOrDepth\x20>=\x201.0)\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20color;\x0a\x20\x20\x20\x20return;\x0a\x20\x20}\x0a\x0a\x20\x20vec4\x20eyeCoordinate\x20=\x20czm_windowToEyeCoordinates(v_textureCoordinates.xy\x20*\x20czm_viewport.zw,\x20logDepthOrDepth);\x0a\x20\x20vec3\x20downUp\x20=\x20vectorFromOffsetMars3D(eyeCoordinate,\x20vec2(0.0,\x201.0));\x0a\x20\x20vec3\x20leftRight\x20=\x20vectorFromOffsetMars3D(eyeCoordinate,\x20vec2(1.0,\x200.0));\x0a\x20\x20vec3\x20normalEC\x20=\x20normalize(cross(leftRight,\x20downUp));\x0a\x20\x20vec3\x20positionEC\x20=\x20eyeCoordinate.xyz\x20/\x20eyeCoordinate.w;\x0a\x0a\x20\x20vec3\x20totalColor\x20=\x20vec3(0.0);\x0a\x0a\x20\x20Mars3D_ShadowVisibilityShader\x20out_FragColor\x20=\x20vec4(color.xyz\x20+\x20totalColor,\x201.0);\x0a}\x0a',MultipleLightNoShadowShader=_0x386a36(0x18e),Cesium$4=mars3d__namespace['Cesium'],BasePointPrimitive$1=mars3d__namespace['graphic']['BasePointPrimitive'],register$4=mars3d__namespace['GraphicUtil'][_0x386a36(0x1d9)],getCesiumColor$1=mars3d__namespace['Util']['getCesiumColor'],addPositionsHeight$3=mars3d__namespace['PointUtil']['addPositionsHeight'],DEF_STYLE$3={'color':Cesium$4['Color']['WHITE'],'intensity':0xa,'radius':0x3e8},PointLight=function(_0x2b24f5){var _0x240902=_0x386a36;_inherits(_0x1956fa,_0x2b24f5);var _0x3456ff=_createSuper(_0x1956fa);function _0x1956fa(){var _0x36a375=_0x4dbc,_0x139318,_0x3948a3=arguments['length']>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{},_0x27b78d=arguments['length']>0x1&&arguments[0x1]!==undefined?arguments[0x1]:!![];return _classCallCheck(this,_0x1956fa),_0x27b78d&&(_0x3948a3['style']=_objectSpread2(_objectSpread2({},DEF_STYLE$3),_0x3948a3[_0x36a375(0x145)]||{})),_0x139318=_0x3456ff['call'](this,_0x3948a3),_0x139318[_0x36a375(0xb2)]=0x1,_0x139318[_0x36a375(0x126)]=getCesiumColor$1(_0x139318['style']['color'],Cesium$4['Color']['WHITE']),_0x139318;}return _createClass(_0x1956fa,[{'key':_0x240902(0x182),'get':function _0x576330(){return this['_camera'];}},{'key':'lights','get':function _0x179b58(){var _0x3eb789;return(_0x3eb789=this['_map'])===null||_0x3eb789===void 0x0?void 0x0:_0x3eb789['_lights'];}},{'key':'intensity','get':function _0x4fea6a(){return this['style']['intensity'];},'set':function _0x65fabc(_0x1c1b2b){var _0x2e72b5=_0x240902;this['style'][_0x2e72b5(0xa3)]=_0x1c1b2b;}},{'key':_0x240902(0x194),'get':function _0x18dd4b(){var _0x349ba7=_0x240902;return this[_0x349ba7(0x126)];},'set':function _0x3112a9(_0x235a61){var _0x5e706f=_0x240902;this['_color']=getCesiumColor$1(_0x235a61,Cesium$4['Color'][_0x5e706f(0x181)]);}},{'key':_0x240902(0x7e),'get':function _0x77e337(){return this['_shadowMap'];}},{'key':'camera','get':function _0x13b459(){var _0x26bd4d=_0x240902;return this[_0x26bd4d(0x85)];}},{'key':'_updatePositionsHook','value':function _0x54b6ed(){var _0x5a0a62=_0x240902,_0x462eab=this['_position'];if(this[_0x5a0a62(0x85)]&&_0x462eab){var _0x313fde=this['getAddHeight']();_0x313fde!==0x0&&(_0x462eab=addPositionsHeight$3(_0x462eab,_0x313fde)),this[_0x5a0a62(0x85)]['position']=_0x462eab,this['_camera']['up']=Cesium$4[_0x5a0a62(0x17e)]['normalize'](_0x462eab,new Cesium$4['Cartesian3']());}}},{'key':'_addedHook','value':function _0x2e61f7(_0x19b552){var _0xf8433a=_0x240902;this[_0xf8433a(0x154)]=this['_createShadowMap'](),this['_position']&&this[_0xf8433a(0xfa)](),this[_0xf8433a(0xcd)][_0xf8433a(0x12e)](this),this['lights']['set'](this['id'],this),this['_updateDraw']();}},{'key':'_createShadowMap','value':function _0x889def(){var _0x54b72b=_0x240902;return this[_0x54b72b(0x154)]&&(this[_0x54b72b(0x154)]['destroy'](),delete this['_shadowMap']),this[_0x54b72b(0x85)]=new Cesium$4['Camera'](this['_map']['scene']),new Cesium$4['ShadowMap']({'lightCamera':this[_0x54b72b(0x85)],'enable':![],'darkness':0x1,'isPointLight':!![],'isSpotLight':![],'cascadesEnabled':![],'context':this['_map'][_0x54b72b(0x14d)][_0x54b72b(0x179)],'pointLightRadius':this[_0x54b72b(0x145)]['radius'],'fromLightSource':![]});}},{'key':_0x240902(0xcc),'value':function _0x513e3c(){this['_shadowMap']&&(this['_shadowMap']['destroy'](),delete this['_shadowMap']),this['primitiveCollection']&&this['primitiveCollection']['contains'](this)&&(this['_noDestroy']=!![],this['primitiveCollection']['remove'](this),this['_noDestroy']=![]),this['lights']['remove'](this['id']),this['_updateDraw']();}},{'key':'update','value':function _0x5f1121(_0x2630f6){this['_shadowMap']&&_0x2630f6['shadowMaps']['push'](this['_shadowMap']);}},{'key':'_updateStyleHook','value':function _0x3ed260(_0x5c74ef,_0x415d1b){var _0x360c84=_0x240902;Cesium$4['defined'](_0x415d1b[_0x360c84(0x194)])&&(this[_0x360c84(0x126)]=getCesiumColor$1(_0x415d1b['color'],Cesium$4['Color']['WHITE'])),(Cesium$4['defined'](_0x415d1b[_0x360c84(0x13f)])||Cesium$4['defined'](_0x415d1b['heading'])||Cesium$4[_0x360c84(0x12d)](_0x415d1b[_0x360c84(0x1ca)])||Cesium$4['defined'](_0x415d1b['roll']))&&this['_updatePositionsHook'](),Cesium$4['defined'](_0x415d1b[_0x360c84(0xb8)])&&this['_shadowMap']&&(this['_shadowMap']=this[_0x360c84(0x1d8)](),this['_position']&&this[_0x360c84(0xfa)]());}},{'key':'_clearDraw','value':function _0x20b156(){var _0x1d18e4=_0x240902;if(!this['_map'])return;this['lights']['_postProcessStage']&&(this[_0x1d18e4(0x196)]['scene']['postProcessStages']['remove'](this[_0x1d18e4(0xf3)][_0x1d18e4(0x167)]),delete this[_0x1d18e4(0xf3)]['_postProcessStage']);}},{'key':'_updateDraw','value':function _0x1b65b6(){var _0x5d160c=_0x240902;if(!this['_map'])return;this[_0x5d160c(0x86)]();var _0x94b237=this['lights'];if(_0x94b237['length']===0x0)return;var _0x45b31f,_0x1b08d1,_0x32b644,_0x43c800,_0x1c3d00,_0x23cfe4,_0x5ce564,_0x4aaea1,_0x409bf6,_0x49457b,_0x39ceac;function _0x46ab9a(){_0x32b644=[],_0x43c800=[],_0x1c3d00=[],_0x23cfe4=[],_0x5ce564=[],_0x4aaea1=[],_0x409bf6=[],_0x49457b=[],_0x39ceac=[],_0x94b237['forEach'](function(_0x427ff7){var _0x4d27be=_0x4dbc,_0x5e8328=_0x427ff7['shadowMap'];if(!_0x5e8328)return;_0x43c800[_0x4d27be(0x1a7)](_0x427ff7[_0x4d27be(0xa3)]),_0x1c3d00[_0x4d27be(0x1a7)](_0x427ff7[_0x4d27be(0x194)]),_0x32b644['push'](_0x5e8328['_lightPositionEC']),_0x23cfe4[_0x4d27be(0x1a7)](_0x5e8328['_shadowMapMatrix']);var _0x23b50d=_0x5e8328['_isPointLight']?_0x5e8328['_pointBias']:_0x5e8328[_0x4d27be(0xe9)];_0x5ce564['push'](Cesium$4['Cartesian4']['fromElements'](0x1/_0x5e8328['_textureSize']['x'],0x1/_0x5e8328['_textureSize']['y'],_0x23b50d['depthBias'],_0x23b50d['normalShadingSmooth'])),_0x4aaea1['push'](new Cesium$4[(_0x4d27be(0xd7))](_0x5e8328[_0x4d27be(0x12f)],_0x427ff7['_light_type'])),_0x427ff7[_0x4d27be(0xb2)]===0x2?(_0x409bf6['push'](_0x5e8328[_0x4d27be(0x173)]),_0x49457b['push'](Math['cos'](Cesium$4[_0x4d27be(0x180)]['toRadians'](_0x427ff7['outerCone']))),_0x39ceac[_0x4d27be(0x1a7)](Math[_0x4d27be(0xfc)](Cesium$4['Math']['toRadians'](_0x427ff7['innerCone'])))):(_0x409bf6[_0x4d27be(0x1a7)](Cesium$4['Cartesian3'][_0x4d27be(0x176)]),_0x49457b['push'](0x0),_0x39ceac[_0x4d27be(0x1a7)](0x0));});}_0x46ab9a();if(this['_map']['hasShadow']){_0x45b31f={'lightPositionEC':function _0x45c0d0(){return _0x46ab9a(),_0x32b644;},'intensity':function _0x122814(){return _0x43c800;},'lightColor':function _0x282f1c(){return _0x1c3d00;},'shadowMapMatrix':function _0x4dcd20(){return _0x23cfe4;},'shadowMapTexelSizeDepthBiasAndNormalShadingSmooth':function _0x490e96(){return _0x5ce564;},'shadowMapDarknessType':function _0x1b85e5(){return _0x4aaea1;},'direction':function _0x540b20(){return _0x409bf6;},'outerConeCos':function _0x37f62f(){return _0x49457b;},'innerConeCos':function _0x37d8c1(){return _0x39ceac;}};var _0x47c317=getLightShadowMaps(_0x94b237,_0x45b31f),_0x18e17b=_0x47c317['uniformShader'],_0x4ecb77=_0x47c317['shadowVisibilityShader'];_0x1b08d1=MultipleLightShader[_0x5d160c(0x1cd)]('Mars3D_LightNumValue',_0x94b237[_0x5d160c(0x117)]),_0x1b08d1=_0x1b08d1['replace']('Mars3D_LightShadowMapsShader',_0x18e17b),_0x1b08d1=_0x1b08d1['replace'](_0x5d160c(0xc6),_0x4ecb77);}else _0x45b31f={'lightPositionEC':function _0xd85c19(){return _0x46ab9a(),_0x32b644;},'intensity':function _0x32ed61(){return _0x43c800;},'lightColor':function _0x39acfe(){return _0x1c3d00;},'shadowMapDarknessType':function _0x2829db(){return _0x4aaea1;},'direction':function _0x178234(){return _0x409bf6;},'outerConeCos':function _0x9d0f6e(){return _0x49457b;},'innerConeCos':function _0x3b00d0(){return _0x39ceac;}},_0x1b08d1=MultipleLightNoShadowShader[_0x5d160c(0x1cd)]('Mars3D_LightNumValue',_0x94b237['length']);this['lights']['_postProcessStage']=new Cesium$4['PostProcessStage']({'sampleMode':Cesium$4['PostProcessStageSampleMode']['NEAREST'],'fragmentShader':_0x1b08d1,'uniforms':_0x45b31f}),this[_0x5d160c(0x196)][_0x5d160c(0x14d)]['postProcessStages']['add'](this['lights'][_0x5d160c(0x167)]);}},{'key':'_getDrawEntityClass','value':function _0x5a11f1(_0x2ec79a,_0x8da740){return this['_getDrawPointEntityClass'](_0x2ec79a,_0x8da740);}}]),_0x1956fa;}(BasePointPrimitive$1);register$4('pointLight',PointLight,!![]);function getLightShadowMaps(_0x740bf1,_0x44700c){var _0x88914e=_0x386a36,_0x5ca48c='',_0xf5c470='';return _0x740bf1[_0x88914e(0xab)](function(_0x42a191,_0x1994c6){var _0x39d02b=_0x88914e;switch(_0x42a191['_light_type']){case 0x1:_0x5ca48c+='uniform\x20samplerCube\x20lightShadowMapCube'['concat'](_0x1994c6,';\x0a'),_0xf5c470+='totalColor\x20+=\x20getPointLightTotalColorMars3D(normalEC,\x20positionEC,\x20'['concat'](_0x1994c6,',\x20lightShadowMapCube')[_0x39d02b(0xe3)](_0x1994c6,_0x39d02b(0x174)),_0x44700c['lightShadowMapCube'[_0x39d02b(0xe3)](_0x1994c6)]=function(){var _0x593189=_0x39d02b;return _0x42a191[_0x593189(0x7e)]['_shadowMapTexture'];};break;case 0x2:_0x5ca48c+='uniform\x20sampler2D\x20lightShadowMap2D'['concat'](_0x1994c6,';\x0a'),_0xf5c470+='totalColor\x20+=\x20getSpotLightTotalColorMars3D(normalEC,\x20positionEC,\x20'[_0x39d02b(0xe3)](_0x1994c6,',\x20lightShadowMap2D')['concat'](_0x1994c6,');\x0a'),_0x44700c['lightShadowMap2D'['concat'](_0x1994c6)]=function(){return _0x42a191['shadowMap']['_shadowMapTexture'];};break;}}),{'uniformShader':_0x5ca48c,'shadowVisibilityShader':_0xf5c470};}var Cesium$3=mars3d__namespace['Cesium'],register$3=mars3d__namespace['GraphicUtil'][_0x386a36(0x1d9)],addPositionsHeight$2=mars3d__namespace[_0x386a36(0x122)]['addPositionsHeight'],DEF_STYLE$2={'color':Cesium$3[_0x386a36(0x125)][_0x386a36(0x181)],'intensity':0xa,'radius':0x3e8,'innerCone':0xa,'outerCone':0x2d},SpotLight=function(_0x5b749b){var _0x1e3a4c=_0x386a36;_inherits(_0x3a19d3,_0x5b749b);var _0x35d7a9=_createSuper(_0x3a19d3);function _0x3a19d3(){var _0x39fc46,_0x2a89b3=arguments['length']>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{},_0x51d2eb=arguments['length']>0x1&&arguments[0x1]!==undefined?arguments[0x1]:!![];return _classCallCheck(this,_0x3a19d3),_0x51d2eb&&(_0x2a89b3['style']=_objectSpread2(_objectSpread2({},DEF_STYLE$2),_0x2a89b3['style']||{})),_0x39fc46=_0x35d7a9['call'](this,_0x2a89b3),_0x39fc46['_light_type']=0x2,_0x39fc46;}return _createClass(_0x3a19d3,[{'key':'outerCone','get':function _0x51d8ce(){return this['style']['outerCone'];},'set':function _0x2de115(_0x36fb80){var _0x1df9a7=_0x4dbc;this['style'][_0x1df9a7(0x88)]=_0x36fb80,this[_0x1df9a7(0x85)][_0x1df9a7(0x112)]['fov']=Cesium$3[_0x1df9a7(0x180)]['toRadians'](this[_0x1df9a7(0x145)]['outerCone']*0x2),this['_camera'][_0x1df9a7(0x112)]['far']=this['range'];}},{'key':_0x1e3a4c(0x156),'get':function _0x1e8494(){return this['style']['innerCone'];},'set':function _0x53d9db(_0x15e8df){this['style']['innerCone']=_0x15e8df;}},{'key':'_updatePositionsHook','value':function _0x313faf(){var _0x2a8d09=_0x1e3a4c,_0xfdd84d=this['_position'];if(this[_0x2a8d09(0x85)]&&_0xfdd84d){var _0x1e7111=this[_0x2a8d09(0x1e5)]();_0x1e7111!==0x0&&(_0xfdd84d=addPositionsHeight$2(_0xfdd84d,_0x1e7111));this['_camera'][_0x2a8d09(0x149)]=_0xfdd84d;var _0x308b7f=new Cesium$3[(_0x2a8d09(0x11f))](Cesium$3['Math']['toRadians'](this['heading']),Cesium$3['Math'][_0x2a8d09(0x1c4)](this[_0x2a8d09(0x1ca)]),Cesium$3[_0x2a8d09(0x180)]['toRadians'](this[_0x2a8d09(0xe0)]));this['_camera']['setView']({'destination':_0xfdd84d,'orientation':{'heading':_0x308b7f['heading'],'pitch':_0x308b7f[_0x2a8d09(0x1ca)],'roll':_0x308b7f[_0x2a8d09(0xe0)]}});}}},{'key':_0x1e3a4c(0x1d8),'value':function _0x483836(){var _0xf6a7b5=_0x1e3a4c;return this[_0xf6a7b5(0x85)]=new Cesium$3[(_0xf6a7b5(0x152))](this['_map']['scene']),this[_0xf6a7b5(0x85)][_0xf6a7b5(0x112)]['aspectRatio']=0x1,this[_0xf6a7b5(0x85)]['frustum']['fov']=Cesium$3['Math'][_0xf6a7b5(0x1c4)](this[_0xf6a7b5(0x145)]['outerCone']*0x2),this['_camera'][_0xf6a7b5(0x112)][_0xf6a7b5(0x19d)]=0.1,this['_camera'][_0xf6a7b5(0x112)]['far']=this['style']['radius'],new Cesium$3['ShadowMap']({'lightCamera':this[_0xf6a7b5(0x85)],'enable':![],'darkness':0x1,'isPointLight':![],'isSpotLight':!![],'cascadesEnabled':![],'context':this['_map'][_0xf6a7b5(0x14d)]['context'],'pointLightRadius':this['style']['radius'],'fromLightSource':![]});}}]),_0x3a19d3;}(PointLight);register$3('spotLight',SpotLight,!![]);var VolumeCloudFS=_0x386a36(0xa4),VolumeCloudVS='in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec3\x20vOrigin;\x0aout\x20vec3\x20vDirection;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vOrigin\x20=\x20czm_encodedCameraPositionMCHigh\x20+\x20czm_encodedCameraPositionMCLow;\x0a\x20\x20vDirection\x20=\x20position\x20-\x20vOrigin;\x0a\x20\x20gl_Position\x20=\x20czm_modelViewProjection\x20*\x20vec4(position,\x201.0);\x0a}\x0a',Cesium$2=mars3d__namespace['Cesium'],Texture3=mars3d__namespace[_0x386a36(0x1aa)],BasePrimitive=mars3d__namespace[_0x386a36(0x1e0)]['BasePrimitive'],register$2=mars3d__namespace[_0x386a36(0x104)]['register'],getCesiumColor=mars3d__namespace[_0x386a36(0x17c)]['getCesiumColor'],VolumeCloud=function(_0x3d1d68){var _0x217ed3=_0x386a36;_inherits(_0x5302de,_0x3d1d68);var _0x21c671=_createSuper(_0x5302de);function _0x5302de(){var _0x15b251=_0x4dbc,_0x50f7ed,_0x4cb282,_0x27471d,_0x4d6baf,_0x58ad55,_0x1eb2a3,_0x22b0c3=arguments['length']>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x5302de),_0x1eb2a3=_0x21c671['call'](this,_0x22b0c3),_0x1eb2a3[_0x15b251(0x9f)]=(_0x50f7ed=_0x1eb2a3['options'][_0x15b251(0x9f)])!==null&&_0x50f7ed!==void 0x0?_0x50f7ed:0x41/0xff,_0x1eb2a3['steps']=(_0x4cb282=_0x1eb2a3['options'][_0x15b251(0x1cb)])!==null&&_0x4cb282!==void 0x0?_0x4cb282:0x258,_0x1eb2a3['xCut']=(_0x27471d=_0x1eb2a3[_0x15b251(0xd5)]['xCut'])!==null&&_0x27471d!==void 0x0?_0x27471d:-0.5,_0x1eb2a3['yCut']=(_0x4d6baf=_0x1eb2a3['options'][_0x15b251(0x1bc)])!==null&&_0x4d6baf!==void 0x0?_0x4d6baf:-0.5,_0x1eb2a3['zCut']=(_0x58ad55=_0x1eb2a3[_0x15b251(0xd5)]['zCut'])!==null&&_0x58ad55!==void 0x0?_0x58ad55:0.5,_0x1eb2a3;}return _createClass(_0x5302de,[{'key':'czmObject','get':function _0x226405(){return this['_shadowMap'];}},{'key':_0x217ed3(0x164),'value':function _0x3f3abf(_0x5431e1){var _0x1c8a88=_0x217ed3;this['texture3D']&&(this['texture3D'][_0x1c8a88(0xb4)](),delete this['texture3D']);for(var _0x4e2c07=0x0,_0xbf54ab=_0x5431e1[_0x1c8a88(0x8b)]['length'];_0x4e2c07<_0xbf54ab;_0x4e2c07++){_0x5431e1[_0x1c8a88(0x8b)][_0x4e2c07]=Math['abs'](_0x5431e1['values'][_0x4e2c07]);}this[_0x1c8a88(0xed)]=new Texture3({'context':this['_map']['scene']['context'],'source':{'width':_0x5431e1['rows'],'height':_0x5431e1[_0x1c8a88(0xd3)],'depth':_0x5431e1['heights'],'arrayBufferView':new Uint8Array(_0x5431e1['values'])},'pixelFormat':Cesium$2['PixelFormat']['ALPHA'],'pixelDatatype':Cesium$2[_0x1c8a88(0x1c9)][_0x1c8a88(0x12b)]});}},{'key':'_mountedHook','value':function _0x4b6dc0(){var _0xc9f101=_0x217ed3,_0x34d76e=this['options'][_0xc9f101(0xad)];this['texture3D']=new Texture3({'context':this['_map'][_0xc9f101(0x14d)][_0xc9f101(0x179)],'source':{'width':_0x34d76e['rows'],'height':_0x34d76e['cols'],'depth':_0x34d76e[_0xc9f101(0xea)],'arrayBufferView':new Uint8Array(_0x34d76e['values'])},'pixelFormat':Cesium$2[_0xc9f101(0xc4)]['ALPHA'],'pixelDatatype':Cesium$2['PixelDatatype']['UNSIGNED_BYTE']});var _0x510281=this[_0xc9f101(0xd5)][_0xc9f101(0x89)],_0x559058=[];_0x510281[_0xc9f101(0xab)](function(_0x54dffe){_0x559058['push'](getCesiumColor(_0x54dffe));}),this['colors']=_0x559058,this['colorsKey']=this[_0xc9f101(0xd5)]['colorsKey'];var _0x65725c=Cesium$2[_0xc9f101(0x98)]['fromDegrees'](_0x34d76e['xmin'],_0x34d76e['ymin'],_0x34d76e['zmin']),_0x58632=Cesium$2['Cartographic'][_0xc9f101(0xb7)](_0x34d76e[_0xc9f101(0x1c7)],_0x34d76e['ymax'],_0x34d76e['zmax']),_0x47c448=Cesium$2['Rectangle']['fromRadians'](_0x65725c['longitude'],_0x65725c[_0xc9f101(0x16d)],_0x58632['longitude'],_0x58632['latitude']);this['_rectangle']=_0x47c448;var _0xfd3ae6=Cesium$2['Rectangle']['center'](_0x47c448),_0x56a915=Cesium$2['Cartographic']['toCartesian'](Cesium$2[_0xc9f101(0x1ac)][_0xc9f101(0xdb)](_0x47c448)),_0x47bb2d=Cesium$2['Cartographic']['toCartesian'](Cesium$2[_0xc9f101(0x1ac)]['northwest'](_0x47c448)),_0x59c8c3=Cesium$2['Cartographic']['toCartesian'](Cesium$2['Rectangle'][_0xc9f101(0x1a2)](_0x47c448)),_0x24a9cf=Cesium$2['Cartesian3'][_0xc9f101(0xb9)](_0x56a915,_0x47bb2d),_0x36b6f8=Cesium$2['Cartesian3']['distance'](_0x56a915,_0x59c8c3),_0xa22cfb=(_0x58632[_0xc9f101(0xa2)]+_0x65725c[_0xc9f101(0xa2)])/0x2,_0x447dd4=Cesium$2['Cartesian3']['fromRadians'](_0xfd3ae6['longitude'],_0xfd3ae6['latitude'],_0xa22cfb),_0x3668b0=_0x24a9cf>_0x36b6f8?_0x24a9cf:_0x36b6f8;_0x3668b0=_0x3668b0>_0xa22cfb?_0x3668b0:_0xa22cfb;var _0x5d953d=Cesium$2['Transforms'][_0xc9f101(0xca)](_0x447dd4),_0x2757c2=Cesium$2['Matrix4']['fromScale'](new Cesium$2['Cartesian3'](_0x24a9cf,_0x36b6f8,_0xa22cfb*0x2));this[_0xc9f101(0x106)]=new Cesium$2['BoundingSphere'](_0x447dd4,_0x3668b0),this['_modelMatrix']=Cesium$2['Matrix4']['multiply'](_0x5d953d,_0x2757c2,_0x5d953d);}},{'key':'_addedHook','value':function _0x1ce10f(_0x4d4819){this['primitiveCollection']['add'](this);}},{'key':'_removedHook','value':function _0x36199f(){var _0x5b1289=_0x217ed3;this[_0x5b1289(0xcd)]['contains'](this)&&(this[_0x5b1289(0x11c)]=!![],this[_0x5b1289(0xcd)]['remove'](this),this[_0x5b1289(0x11c)]=![]),this['texture3D']&&(this['texture3D']['destroy'](),delete this['texture3D']),this[_0x5b1289(0x10d)]();}},{'key':_0x217ed3(0x129),'value':function _0x2e66b9(_0x22601e){var _0x5412c6=_0x217ed3;!this['_drawCommands']&&this['createDrawCommand'](_0x22601e['context']),_0x22601e[_0x5412c6(0x157)][_0x5412c6(0x1a7)](this['_drawCommands']);}},{'key':_0x217ed3(0x10f),'value':function _0x494997(_0x543c51){var _0x51b220=_0x217ed3,_0x46bb80=this;this[_0x51b220(0x10d)]();var _0x25eeec=Cesium$2['BoxGeometry']['createGeometry'](Cesium$2['BoxGeometry']['fromDimensions']({'vertexFormat':Cesium$2[_0x51b220(0x102)]['POSITION_AND_ST'],'dimensions':new Cesium$2['Cartesian3'](0x1,0x1,0x1)})),_0x29c0ba=Cesium$2['RenderState'][_0x51b220(0x140)]({'depthTest':{'enabled':!![]},'cull':{'enabled':![]}}),_0x2986fc=Cesium$2['GeometryPipeline'][_0x51b220(0x16a)](_0x25eeec),_0xbdfe1=Cesium$2[_0x51b220(0x9c)][_0x51b220(0xa8)]({'context':_0x543c51,'geometry':_0x25eeec,'attributes':_0x2986fc}),_0x3f4510=Cesium$2['ShaderProgram']['fromCache']({'boundingSphere':_0x25eeec['boundingSphere'],'context':_0x543c51,'vertexShaderSource':VolumeCloudVS,'fragmentShaderSource':VolumeCloudFS['replaceAll'](_0x51b220(0x120),this['colors'][_0x51b220(0x117)]),'attributeLocations':_0x2986fc});this[_0x51b220(0xa7)]=new Cesium$2[(_0x51b220(0x11a))]({'boundingVolume':this[_0x51b220(0x106)],'modelMatrix':this[_0x51b220(0x16e)],'pass':Cesium$2['Pass']['TRANSLUCENT'],'shaderProgram':_0x3f4510,'renderState':_0x29c0ba,'vertexArray':_0xbdfe1,'uniformMap':{'map':function _0x75aacf(){return _0x46bb80['texture3D'];},'threshold':function _0x468d8d(){return _0x46bb80['threshold'];},'steps':function _0x2474f5(){return _0x46bb80['steps'];},'xCut':function _0x1d29bb(){var _0x34bb6e=_0x51b220;return _0x46bb80[_0x34bb6e(0xf2)];},'yCut':function _0x1aaaae(){return _0x46bb80['yCut'];},'zCut':function _0x28972f(){var _0x4ff338=_0x51b220;return _0x46bb80[_0x4ff338(0x11e)];},'colors':function _0x5a38e5(){return _0x46bb80['colors'];},'colorsKey':function _0x476599(){return _0x46bb80['colorsKey'];}}});}},{'key':_0x217ed3(0x10d),'value':function _0x23ea15(){var _0x5d2057=_0x217ed3;this[_0x5d2057(0xa7)]&&(this['_drawCommands'][_0x5d2057(0x137)]&&this['_drawCommands'][_0x5d2057(0x137)][_0x5d2057(0xb4)](),this['_drawCommands'][_0x5d2057(0x177)]&&this['_drawCommands']['shaderProgram']['destroy'](),delete this[_0x5d2057(0xa7)]);}}]),_0x5302de;}(BasePrimitive);register$2('volumeCloud',VolumeCloud,!![]);var MultipleVisibilityShader='\x0auniform\x20sampler2D\x20colorTexture;\x0auniform\x20sampler2D\x20depthTexture;\x0a\x0auniform\x20float\x20mars3d_opacity;\x0auniform\x20vec3\x20mars3d_visibleAreaColor;\x0auniform\x20vec3\x20mars3d_hiddenAreaColor;\x0a\x0a\x0aconst\x20int\x20LightNum\x20=\x20LightNumVlaue;\x0auniform\x20vec4\x20lightPositionEC[LightNum];\x0auniform\x20mat4\x20shadowMapMatrix[LightNum];\x0auniform\x20vec4\x20shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[LightNum];\x0auniform\x20vec2\x20shadowMapDarknessType[LightNum];\x0auniform\x20float\x20mars3d_distance[LightNum];\x0a\x0a\x0aLightShadowMapsShader\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec3\x20getEyeCoordinate3FromWindowCoordinate(vec2\x20fragCoord,\x20float\x20logDepthOrDepth)\x20{\x0a\x20\x20vec4\x20eyeCoordinate\x20=\x20czm_windowToEyeCoordinates(fragCoord,\x20logDepthOrDepth);\x0a\x20\x20return\x20eyeCoordinate.xyz\x20/\x20eyeCoordinate.w;\x0a}\x0a\x0avec3\x20vectorFromOffset(vec4\x20eyeCoordinate,\x20vec2\x20positiveOffset)\x20{\x0a\x20\x20vec2\x20glFragCoordXY\x20=\x20v_textureCoordinates.xy\x20*\x20czm_viewport.zw;\x0a\x20\x20float\x20upOrRightLogDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20(glFragCoordXY\x20+\x20positiveOffset)\x20/\x20czm_viewport.zw));\x0a\x20\x20float\x20downOrLeftLogDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20(glFragCoordXY\x20-\x20positiveOffset)\x20/\x20czm_viewport.zw));\x0a\x0a\x20\x20bvec2\x20upOrRightInBounds\x20=\x20lessThan(glFragCoordXY\x20+\x20positiveOffset,\x20czm_viewport.zw);\x0a\x20\x20float\x20useUpOrRight\x20=\x20float(upOrRightLogDepth\x20>\x200.0\x20&&\x20upOrRightInBounds.x\x20&&\x20upOrRightInBounds.y);\x0a\x20\x20float\x20useDownOrLeft\x20=\x20float(useUpOrRight\x20==\x200.0);\x0a\x20\x20vec3\x20upOrRightEC\x20=\x20getEyeCoordinate3FromWindowCoordinate(glFragCoordXY\x20+\x20positiveOffset,\x20upOrRightLogDepth);\x0a\x20\x20vec3\x20downOrLeftEC\x20=\x20getEyeCoordinate3FromWindowCoordinate(glFragCoordXY\x20-\x20positiveOffset,\x20downOrLeftLogDepth);\x0a\x20\x20return\x20(upOrRightEC\x20-\x20(eyeCoordinate.xyz\x20/\x20eyeCoordinate.w))\x20*\x20useUpOrRight\x20+\x20((eyeCoordinate.xyz\x20/\x20eyeCoordinate.w)\x20-\x20downOrLeftEC)\x20*\x20useDownOrLeft;\x0a}\x0a\x0astruct\x20my_shadowParameters\x0a{\x0a\x20\x20\x20\x20vec3\x20texCoordsCube;\x0a\x20\x20\x20\x20vec2\x20texCoords;\x0a\x20\x20\x20\x20float\x20depthBias;\x0a\x20\x20\x20\x20float\x20depth;\x0a\x20\x20\x20\x20float\x20nDotL;\x0a\x20\x20\x20\x20vec2\x20texelStepSize;\x0a\x20\x20\x20\x20float\x20normalShadingSmooth;\x0a\x20\x20\x20\x20float\x20darkness;\x0a};\x0a\x0afloat\x20shadowVisibilityCube(samplerCube\x20shadowMap,\x20my_shadowParameters\x20shadowParameters){\x0a\x20\x20\x20\x20float\x20depthBias\x20=\x20shadowParameters.depthBias;\x0a\x20\x20\x20\x20float\x20depth\x20=\x20shadowParameters.depth;\x0a\x20\x20\x20\x20float\x20nDotL\x20=\x20shadowParameters.nDotL;\x0a\x20\x20\x20\x20float\x20normalShadingSmooth\x20=\x20shadowParameters.normalShadingSmooth;\x0a\x20\x20\x20\x20float\x20darkness\x20=\x20shadowParameters.darkness;\x0a\x20\x20\x20\x20vec3\x20uvw\x20=\x20shadowParameters.texCoordsCube;\x0a\x0a\x20\x20\x20\x20depth\x20-=\x20depthBias;\x0a\x20\x20\x20\x20return\x20czm_shadowDepthCompare(shadowMap,\x20uvw,\x20depth);\x0a}\x0afloat\x20shadowVisibility2D(sampler2D\x20shadowMap,\x20my_shadowParameters\x20shadowParameters)\x0a{\x0a\x20\x20\x20\x20float\x20depthBias\x20=\x20shadowParameters.depthBias;\x0a\x20\x20\x20\x20float\x20depth\x20=\x20shadowParameters.depth;\x0a\x20\x20\x20\x20float\x20nDotL\x20=\x20shadowParameters.nDotL;\x0a\x20\x20\x20\x20float\x20normalShadingSmooth\x20=\x20shadowParameters.normalShadingSmooth;\x0a\x20\x20\x20\x20float\x20darkness\x20=\x20shadowParameters.darkness;\x0a\x20\x20\x20\x20vec2\x20uv\x20=\x20shadowParameters.texCoords;\x0a\x0a\x20\x20\x20\x20depth\x20-=\x20depthBias;\x0a\x20\x20\x20\x20return\x20czm_shadowDepthCompare(shadowMap,\x20uv,\x20depth);\x0a}\x0a\x0aint\x20getPointVisibility(vec3\x20normalEC,\x20vec3\x20positionEC,\x20int\x20i,\x20samplerCube\x20lightShadowMapCube){\x0a\x20\x20vec4\x20lightPEC\x20=\x20lightPositionEC[i];\x0a\x20\x20vec2\x20shadowMapDT\x20=\x20shadowMapDarknessType[i];\x0a\x20\x20vec3\x20pointToLightEC\x20=\x20positionEC\x20-\x20lightPEC.xyz;\x0a\x20\x20float\x20pointToLightECLength\x20=\x20length(pointToLightEC);\x0a\x20\x20vec3\x20l\x20=\x20normalize(pointToLightEC);\x0a\x20\x20float\x20NdotL\x20=\x20clamp(dot(-normalEC,\x20l),\x200.0,\x201.0);\x0a\x0a\x20\x20float\x20visibility\x20=\x200.0;\x0a\x20\x20float\x20radius\x20=\x20lightPEC.w;\x0a\x20\x20float\x20type\x20=\x20shadowMapDT.y;\x0a\x0a\x20\x20if(pointToLightECLength\x20<=\x20radius){\x0a\x20\x20\x20\x20vec4\x20shadowMapTSDBANSS\x20=\x20shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];\x0a\x0a\x20\x20\x20\x20my_shadowParameters\x20shadowParameters;\x0a\x20\x20\x20\x20shadowParameters.texelStepSize\x20=\x20shadowMapTSDBANSS.xy;\x0a\x20\x20\x20\x20shadowParameters.depthBias\x20=\x20shadowMapTSDBANSS.z;\x0a\x20\x20\x20\x20shadowParameters.normalShadingSmooth\x20=\x20shadowMapTSDBANSS.w;\x0a\x20\x20\x20\x20shadowParameters.darkness\x20=\x20shadowMapDT.x;\x0a\x20\x20\x20\x20shadowParameters.depth\x20=\x20pointToLightECLength\x20/\x20radius;\x0a\x20\x20\x20\x20shadowParameters.nDotL\x20=\x20NdotL;\x0a\x20\x20\x20\x20shadowParameters.texCoordsCube\x20=\x20czm_inverseViewRotation\x20*\x20l;\x0a\x20\x20\x20\x20visibility\x20=\x20shadowVisibilityCube(lightShadowMapCube,\x20shadowParameters);\x0a\x20\x20\x20\x20if(visibility\x20==\x201.0){\x0a\x20\x20\x20\x20\x20\x20return\x200;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20return\x201;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x202;\x0a\x20\x20}\x0a}\x0a\x0aint\x20getFrustumVisibility(vec3\x20normalEC,\x20vec3\x20positionEC,\x20int\x20i,\x20sampler2D\x20lightShadowMap2D){\x0a\x20\x20vec4\x20lightPEC\x20=\x20lightPositionEC[i];\x0a\x20\x20vec2\x20shadowMapDT\x20=\x20shadowMapDarknessType[i];\x0a\x20\x20vec3\x20pointToLightEC\x20=\x20positionEC\x20-\x20lightPEC.xyz;\x0a\x20\x20vec3\x20l\x20=\x20normalize(pointToLightEC);\x0a\x20\x20float\x20NdotL\x20=\x20clamp(dot(-normalEC,\x20l),\x200.0,\x201.0);\x0a\x0a\x20\x20float\x20visibility\x20=\x200.0;\x0a\x20\x20float\x20type\x20=\x20shadowMapDT.y;\x0a\x0a\x20\x20vec4\x20shadowPosition\x20=\x20shadowMapMatrix[i]\x20*\x20vec4(positionEC,\x201.0);\x0a\x20\x20shadowPosition\x20/=\x20shadowPosition.w;\x0a\x20\x20if\x20(any(lessThan(shadowPosition.xyz,\x20vec3(0.0)))\x20||\x20any(greaterThan(shadowPosition.xyz,\x20vec3(1.0))))\x20{\x0a\x20\x20\x20\x20return\x202;\x0a\x20\x20}\x0a\x0a\x20\x20//坐标与视点位置距离，大于最大距离则舍弃阴影效果\x0a\x20\x20vec4\x20lw\x20=\x20czm_inverseView\x20*\x20vec4(lightPEC.xyz,\x201.0);\x0a\x20\x20vec4\x20vw\x20=\x20czm_inverseView\x20*\x20vec4(positionEC.xyz,\x201.0);\x0a\x20\x20float\x20one_distance\x20=\x20mars3d_distance[i];\x0a\x20\x20if(distance(lw.xyz,\x20vw.xyz)\x20>\x20one_distance)\x20{\x0a\x20\x20\x20\x20return\x202;\x0a\x20\x20}\x0a\x0a\x0a\x20\x20vec4\x20shadowMapTSDBANSS\x20=\x20shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];\x0a\x20\x20my_shadowParameters\x20shadowParameters;\x0a\x20\x20shadowParameters.texelStepSize\x20=\x20shadowMapTSDBANSS.xy;\x0a\x20\x20shadowParameters.depthBias\x20=\x20shadowMapTSDBANSS.z;\x0a\x20\x20shadowParameters.normalShadingSmooth\x20=\x20shadowMapTSDBANSS.w;\x0a\x20\x20shadowParameters.darkness\x20=\x20shadowMapDT.x;\x0a\x20\x20shadowParameters.texCoords\x20=\x20shadowPosition.xy;\x0a\x20\x20shadowParameters.depth\x20=\x20shadowPosition.z;\x0a\x20\x20shadowParameters.nDotL\x20=\x20NdotL;\x0a\x0a\x20\x20visibility\x20=\x20shadowVisibility2D(lightShadowMap2D,\x20shadowParameters);\x0a\x20\x20if(visibility\x20==\x201.0){\x0a\x20\x20\x20\x20return\x200;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x201;\x0a\x20\x20}\x0a\x0a}\x0a\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20color\x20=\x20texture(colorTexture,\x20v_textureCoordinates);\x0a\x20\x20float\x20logDepthOrDepth\x20=\x20czm_unpackDepth(texture(depthTexture,\x20v_textureCoordinates));\x0a\x20\x20if(logDepthOrDepth\x20>=\x201.0){\x0a\x20\x20\x20\x20out_FragColor\x20=\x20color;\x0a\x20\x20\x20\x20return;\x0a\x20\x20}\x0a\x0a\x20\x20vec4\x20eyeCoordinate\x20=\x20czm_windowToEyeCoordinates(v_textureCoordinates.xy\x20*\x20czm_viewport.zw,\x20logDepthOrDepth);\x0a\x20\x20vec3\x20downUp\x20=\x20vectorFromOffset(eyeCoordinate,\x20vec2(0.0,\x201.0));\x0a\x20\x20vec3\x20leftRight\x20=\x20vectorFromOffset(eyeCoordinate,\x20vec2(1.0,\x200.0));\x0a\x20\x20vec3\x20normalEC\x20=\x20normalize(cross(leftRight,\x20downUp));\x0a\x20\x20vec3\x20positionEC\x20=\x20eyeCoordinate.xyz\x20/\x20eyeCoordinate.w;\x0a\x0a\x20\x20int\x20visibility\x20=\x200;\x0a\x20\x20int\x20inside\x20=\x200;\x0a\x20\x20vec3\x20totalColor\x20=\x20vec3(0.0);\x0a\x0a\x20\x20ShadowVisibilityShader\x0a\x0a\x20\x20if(visibility\x20>\x200){\x0a\x20\x20\x20\x20totalColor\x20=\x20mars3d_visibleAreaColor;\x0a\x20\x20}\x20else\x20if(inside\x20>\x200)\x20{\x0a\x20\x20\x20\x20totalColor\x20=\x20mars3d_hiddenAreaColor;\x0a\x20\x20}\x0a\x20\x20out_FragColor\x20=\x20vec4(color.xyz\x20+\x20totalColor,\x20mars3d_opacity);\x0a}\x0a',Cesium$1=mars3d__namespace[_0x386a36(0x163)],BasePointPrimitive=mars3d__namespace['graphic']['BasePointPrimitive'],EventType=mars3d__namespace['EventType'],register$1=mars3d__namespace['GraphicUtil'][_0x386a36(0x1d9)],addPositionsHeight$1=mars3d__namespace['PointUtil']['addPositionsHeight'],visibleAreaColor=Cesium$1['Color']['LIME'],hiddenAreaColor=Cesium$1[_0x386a36(0x125)][_0x386a36(0xfd)],areaOpacity=0.6,DEF_STYLE$1={'radius':0x1,'showFrustum':![]},PointVisibility=function(_0x59e560){var _0x15ac9e=_0x386a36;_inherits(_0x41539d,_0x59e560);var _0x8ffaeb=_createSuper(_0x41539d);function _0x41539d(){var _0x503626=_0x4dbc,_0x13a5f8,_0x3c2b12,_0x1beeec,_0x52cda1=arguments[_0x503626(0x117)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{},_0x4dcd3=arguments['length']>0x1&&arguments[0x1]!==undefined?arguments[0x1]:!![];return _classCallCheck(this,_0x41539d),_0x4dcd3&&(_0x52cda1['style']=_objectSpread2(_objectSpread2({},DEF_STYLE$1),_0x52cda1['style']||{})),_0x1beeec=_0x8ffaeb[_0x503626(0xde)](this,_0x52cda1),_0x1beeec[_0x503626(0x16f)]=0x1,areaOpacity=_0x1beeec['style']['opacity'],_0x1beeec['_hasTerrainShadows']=(_0x13a5f8=_0x1beeec['options'][_0x503626(0xec)])!==null&&_0x13a5f8!==void 0x0?_0x13a5f8:!![],_0x1beeec['_maximumDistance']=(_0x3c2b12=_0x1beeec['style']['maximumDistance'])!==null&&_0x3c2b12!==void 0x0?_0x3c2b12:0x1388,_0x1beeec;}return _createClass(_0x41539d,[{'key':'czmObject','get':function _0x34760f(){return this['_camera'];}},{'key':'visibilitys','get':function _0x29dd1e(){var _0x85e92;return(_0x85e92=this['_map'])===null||_0x85e92===void 0x0?void 0x0:_0x85e92['_visibilitys'];}},{'key':_0x15ac9e(0x150),'get':function _0x1deb5f(){var _0x506c0c=_0x15ac9e,_0x5c9f98;return(_0x5c9f98=this[_0x506c0c(0x145)])===null||_0x5c9f98===void 0x0?void 0x0:_0x5c9f98['opacity'];},'set':function _0x4a9995(_0x223570){this['style']['opacity']=_0x223570;}},{'key':'shadowMap','get':function _0x6402e5(){return this['_shadowMap'];}},{'key':_0x15ac9e(0x13a),'get':function _0x53671f(){var _0x5d622e=_0x15ac9e;return this[_0x5d622e(0x85)];}},{'key':'_updatePositionsHook','value':function _0x4418aa(){var _0x404087=_0x15ac9e,_0x3fcddc=this['_position'];if(this['_camera']&&_0x3fcddc){var _0x583ae1=this[_0x404087(0x1e5)]();_0x583ae1!==0x0&&(_0x3fcddc=addPositionsHeight$1(_0x3fcddc,_0x583ae1)),this['_camera'][_0x404087(0x149)]=_0x3fcddc,this[_0x404087(0x85)]['up']=Cesium$1['Cartesian3'][_0x404087(0xbf)](_0x3fcddc,new Cesium$1['Cartesian3']());}}},{'key':_0x15ac9e(0x1eb),'value':function _0x2a5941(_0x3f0263){var _0x3cef6a=_0x15ac9e;this['_hasTerrainShadows']&&(this['_map']['viewer']['terrainShadows']=Cesium$1['ShadowMode']['ENABLED']),this[_0x3cef6a(0x154)]=this['_createShadowMap'](),this['_position']&&this[_0x3cef6a(0xfa)](),this[_0x3cef6a(0xcd)]['add'](this),this['visibilitys']['set'](this['id'],this),this['_updateDraw'](),this['_updateOutlineFrustum']();}},{'key':'_createShadowMap','value':function _0x5a9ef4(){var _0x5e2867=_0x15ac9e;return this[_0x5e2867(0x154)]&&(this['_shadowMap']['destroy'](),delete this['_shadowMap']),this[_0x5e2867(0x85)]=new Cesium$1['Camera'](this['_map']['scene']),new Cesium$1['ShadowMap']({'lightCamera':this['_camera'],'enable':![],'darkness':0x1,'isPointLight':!![],'isSpotLight':![],'cascadesEnabled':![],'context':this['_map']['scene'][_0x5e2867(0x179)],'pointLightRadius':this['style']['radius'],'fromLightSource':![]});}},{'key':'_removedHook','value':function _0x437b81(){var _0x45089f=_0x15ac9e;this[_0x45089f(0x1bf)]&&(this[_0x45089f(0x196)]['terrainShadows']=Cesium$1['ShadowMode'][_0x45089f(0x19b)]),this[_0x45089f(0x154)]&&(this['_shadowMap'][_0x45089f(0xb4)](),delete this['_shadowMap']),this['_outlineFrustumGraphic']&&(this[_0x45089f(0x123)]['removeGraphic'](this[_0x45089f(0x7b)],!![]),delete this['_outlineFrustumGraphic']),this[_0x45089f(0x136)]&&(this['_layer']['primitiveCollection']['remove'](this['_outlineFrustum']),delete this['_outlineFrustum']),this['primitiveCollection']&&this['primitiveCollection'][_0x45089f(0x197)](this)&&(this['_noDestroy']=!![],this['primitiveCollection']['remove'](this),this['_noDestroy']=![]),this['visibilitys'][_0x45089f(0x116)](this['id']),this[_0x45089f(0x15e)]();}},{'key':_0x15ac9e(0x129),'value':function _0x39e17c(_0x4fc6eb){var _0x311a7d=_0x15ac9e;this[_0x311a7d(0x154)]&&_0x4fc6eb['shadowMaps'][_0x311a7d(0x1a7)](this['_shadowMap']);}},{'key':'_updateStyleHook','value':function _0x1f962e(_0xa4cb08,_0x5cc9d5){var _0x39d662=_0x15ac9e;(Cesium$1['defined'](_0x5cc9d5['addHeight'])||Cesium$1['defined'](_0x5cc9d5[_0x39d662(0xe2)])||Cesium$1['defined'](_0x5cc9d5['pitch'])||Cesium$1[_0x39d662(0x12d)](_0x5cc9d5['roll']))&&this['_updatePositionsHook'](),Cesium$1['defined'](_0x5cc9d5['radius'])&&this['_shadowMap']&&(this['_shadowMap']=this['_createShadowMap'](),this['_position']&&this['_updatePositionsHook']());}},{'key':'_clearDraw','value':function _0x1f7bb2(){var _0x184a04=_0x15ac9e;if(!this['_map'])return;this['visibilitys']['_postProcessStage']&&(this['_map']['scene']['postProcessStages']['remove'](this['visibilitys']['_postProcessStage']),delete this['visibilitys'][_0x184a04(0x167)]);}},{'key':'_updateDraw','value':function _0x3f4187(){var _0x32080d=_0x15ac9e;if(!this['_map'])return;this['_clearDraw']();var _0x2b8978=this[_0x32080d(0x1f0)];if(_0x2b8978['length']===0x0)return;var _0x5d2eba,_0x2b4da9,_0x5194ab,_0x874c,_0x4fe1f9;function _0x249829(){_0x5d2eba=[],_0x2b4da9=[],_0x5194ab=[],_0x874c=[],_0x4fe1f9=[],_0x2b8978['forEach'](function(_0x10425a){var _0x4f03ff=_0x4dbc,_0x47f973=_0x10425a['shadowMap'];if(!_0x47f973)return;_0x5d2eba[_0x4f03ff(0x1a7)](_0x47f973['_lightPositionEC']),_0x2b4da9['push'](_0x47f973[_0x4f03ff(0x135)]);var _0x3f0e3c=_0x47f973[_0x4f03ff(0x1ed)]?_0x47f973['_pointBias']:_0x47f973['_primitiveBias'];_0x5194ab['push'](Cesium$1[_0x4f03ff(0x1db)][_0x4f03ff(0x19c)](0x1/_0x47f973[_0x4f03ff(0x127)]['x'],0x1/_0x47f973['_textureSize']['y'],_0x3f0e3c['depthBias'],_0x3f0e3c[_0x4f03ff(0x1c3)])),_0x874c[_0x4f03ff(0x1a7)](new Cesium$1[(_0x4f03ff(0xd7))](_0x47f973['_darkness'],_0x10425a[_0x4f03ff(0x16f)])),_0x4fe1f9[_0x4f03ff(0x1a7)](_0x10425a['style']['radius']);});}_0x249829();var _0xfe4787={'lightPositionEC':function _0x514627(){return _0x249829(),_0x5d2eba;},'shadowMapMatrix':function _0x878a16(){return _0x2b4da9;},'shadowMapTexelSizeDepthBiasAndNormalShadingSmooth':function _0x588531(){return _0x5194ab;},'shadowMapDarknessType':function _0x3c8e1e(){return _0x874c;},'mars3d_distance':function _0x60ff1f(){return _0x4fe1f9;},'mars3d_opacity':function _0xd0c2d(){return areaOpacity;},'mars3d_visibleAreaColor':function _0x5d4341(){return visibleAreaColor;},'mars3d_hiddenAreaColor':function _0x3e1efc(){return hiddenAreaColor;}},_0x354b29=getVisibilityShadowMaps(_0x2b8978,_0xfe4787),_0x54a1bd=_0x354b29['uniformShader'],_0x3e8e66=_0x354b29[_0x32080d(0x1c5)],_0x5b4e1d=MultipleVisibilityShader['replace']('LightNumVlaue',_0x2b8978['length']);_0x5b4e1d=_0x5b4e1d['replace'](_0x32080d(0x13b),_0x54a1bd),_0x5b4e1d=_0x5b4e1d['replace']('ShadowVisibilityShader',_0x3e8e66),this[_0x32080d(0x1f0)][_0x32080d(0x167)]=new Cesium$1['PostProcessStage']({'sampleMode':Cesium$1['PostProcessStageSampleMode']['NEAREST'],'fragmentShader':_0x5b4e1d,'uniforms':_0xfe4787}),this['_map']['scene'][_0x32080d(0x166)][_0x32080d(0x12e)](this['visibilitys']['_postProcessStage']);}},{'key':'_updateOutlineFrustum','value':function _0x4b1e41(){var _0x22fe2d=_0x15ac9e;this['_outlineFrustum']&&(this['_layer']['primitiveCollection'][_0x22fe2d(0x116)](this['_outlineFrustum']),delete this['_outlineFrustum']);if(!this[_0x22fe2d(0x149)]||!this['style'][_0x22fe2d(0x131)])return;var _0x25e80a=Cesium$1['Transforms'][_0x22fe2d(0xca)](this['position']),_0x33c05b=new Cesium$1['GeometryInstance']({'geometry':new Cesium$1['SphereOutlineGeometry']({'radius':this['style'][_0x22fe2d(0xb8)]}),'modelMatrix':_0x25e80a,'attributes':{'color':Cesium$1['ColorGeometryInstanceAttribute']['fromColor'](Cesium$1['Color'][_0x22fe2d(0x181)])}});this['_outlineFrustum']=this['_layer']['primitiveCollection']['add'](new Cesium$1['Primitive']({'geometryInstances':_0x33c05b,'asynchronous':![],'appearance':new Cesium$1['PerInstanceColorAppearance']({'flat':!![],'renderState':{'lineWidth':0x1}})}));}},{'key':_0x15ac9e(0x178),'value':function _0x4f4e8b(_0x34b933){var _0x2763a4=_0x15ac9e;if(this[_0x2763a4(0x101)])return this;this['_enabledDraw']=!![];_0x34b933&&this['addTo'](_0x34b933);if(!this['_map'])throw new Error(_0x2763a4(0x10e));this['_map']['_setEditCursor'](!![]),this['enableControl'](![]),this[_0x2763a4(0x93)](),this['fire'](EventType[_0x2763a4(0x15c)],{'drawtype':this[_0x2763a4(0xbb)],'graphic':this},!![]);}},{'key':'stopDraw','value':function _0x1eb914(){var _0x42cf2e=_0x15ac9e,_0x3f7e7f,_0x232785,_0x221fe6;if(!this['_enabledDraw'])return this;this['_stopDrawHook'](),this['_map']['_setEditCursor'](![]),this['enableControl'](!![]),this['_map'][_0x42cf2e(0x1bb)](),this[_0x42cf2e(0x101)]=![];if(!this[_0x42cf2e(0x149)]||!this[_0x42cf2e(0x145)]['radius']){this['remove'](!![]);return;}this[_0x42cf2e(0x1a1)](EventType['drawCreated'],{'drawtype':this['type'],'graphic':this},!![]),(_0x3f7e7f=this[_0x42cf2e(0xd5)])!==null&&_0x3f7e7f!==void 0x0&&_0x3f7e7f[_0x42cf2e(0x113)]&&this[_0x42cf2e(0xd5)]['success'](this),(_0x232785=this[_0x42cf2e(0xd5)])!==null&&_0x232785!==void 0x0&&(_0x221fe6=_0x232785['_promise'])!==null&&_0x221fe6!==void 0x0&&_0x221fe6['resolve']&&this['options']['_promise']['resolve'](this);}},{'key':'_startDrawHook','value':function _0x457f71(){this['_map']['on'](EventType['click'],this['_onClickHandler'],this),this['_map']['on'](EventType['mouseMove'],this['_onMouseMoveHandler'],this);}},{'key':_0x15ac9e(0xa5),'value':function _0x4fc0d0(){var _0x3e2370=_0x15ac9e;this['_map']['off'](EventType[_0x3e2370(0x1d7)],this['_onClickHandler'],this),this[_0x3e2370(0x196)][_0x3e2370(0x11d)](EventType['mouseMove'],this[_0x3e2370(0xa0)],this);}},{'key':'_onClickHandler','value':function _0x2633d2(_0x88bbd3){var _0x4bf6a5=_0x15ac9e,_0x5a018e=_0x88bbd3['cartesian'];if(!_0x5a018e)return;this[_0x4bf6a5(0x1a1)](EventType['drawAddPoint'],_objectSpread2(_objectSpread2({},_0x88bbd3),{},{'drawtype':this['type'],'graphic':this}),!![]);if(!this[_0x4bf6a5(0x149)]){this['position']=_0x5a018e;return;}this[_0x4bf6a5(0x18b)](_0x5a018e),this['stopDraw'](),this['fire'](EventType[_0x4bf6a5(0x128)],_0x88bbd3);}},{'key':'_onMouseMoveHandler','value':function _0x5af8ac(_0x5e9c3f){var _0x2ee23e=_0x15ac9e,_0x271f62=_0x5e9c3f[_0x2ee23e(0xf4)];if(!_0x271f62)return;var _0x5a71aa=this[_0x2ee23e(0x149)];_0x5a71aa?(this['_updateMouseDraw'](_0x271f62),this['fire'](EventType['drawMouseMove'],_objectSpread2(_objectSpread2({},_0x5e9c3f),{},{'drawtype':this[_0x2ee23e(0xbb)],'graphic':this}),!![]),this['_map']['openSmallTooltip'](_0x5e9c3f[_0x2ee23e(0x170)],this['_map'][_0x2ee23e(0x159)]('_单击完成绘制'))):this[_0x2ee23e(0x196)]['openSmallTooltip'](_0x5e9c3f['endPosition'],this['_map']['getLangText']('_单击开始绘制'));}},{'key':'_updateMouseDraw','value':function _0x9d21aa(_0x407230){var _0xc40b55=_0x15ac9e;this['style']['radius']=Cesium$1['Cartesian3'][_0xc40b55(0xb9)](this[_0xc40b55(0x149)],_0x407230),this['_shadowMap']=this[_0xc40b55(0x1d8)](),this['_position']&&this['_updatePositionsHook']();}}]),_0x41539d;}(BasePointPrimitive);register$1('pointVisibility',PointVisibility,!![]);function getVisibilityShadowMaps(_0xa04b39,_0x58c9e4){var _0x5bcbcd='',_0x2485ff='';return _0xa04b39['forEach'](function(_0x1e0609,_0x59784d){var _0x50a21e=_0x4dbc;switch(_0x1e0609[_0x50a21e(0x16f)]){case 0x1:_0x5bcbcd+=_0x50a21e(0x1c8)['concat'](_0x59784d,';\x0a'),_0x2485ff+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20int\x20pointLightVisibility'['concat'](_0x59784d,'\x20=\x20getPointVisibility(normalEC,\x20positionEC,\x20')[_0x50a21e(0xe3)](_0x59784d,_0x50a21e(0x138))[_0x50a21e(0xe3)](_0x59784d,_0x50a21e(0x183))['concat'](_0x59784d,'\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inside\x20+=\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(pointLightVisibility')[_0x50a21e(0xe3)](_0x59784d,'\x20==\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20visibility\x20+=\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),_0x58c9e4[_0x50a21e(0xd8)['concat'](_0x59784d)]=function(){var _0x25e0b7=_0x50a21e;return _0x1e0609[_0x25e0b7(0x7e)]['_shadowMapTexture'];};break;case 0x2:_0x5bcbcd+=_0x50a21e(0x15b)['concat'](_0x59784d,';\x0a'),_0x2485ff+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20int\x20frustumVisibility'[_0x50a21e(0xe3)](_0x59784d,'\x20=\x20getFrustumVisibility(normalEC,\x20positionEC,\x20')['concat'](_0x59784d,',\x20lightShadowMap2D')['concat'](_0x59784d,');\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(frustumVisibility')[_0x50a21e(0xe3)](_0x59784d,_0x50a21e(0x99))['concat'](_0x59784d,'\x20==\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20visibility\x20+=\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),_0x58c9e4['lightShadowMap2D'[_0x50a21e(0xe3)](_0x59784d)]=function(){var _0x15e787=_0x50a21e;return _0x1e0609['shadowMap'][_0x15e787(0x11b)];};break;}}),{'uniformShader':_0x5bcbcd,'shadowVisibilityShader':_0x2485ff};}var Cesium=mars3d__namespace['Cesium'],LngLatPoint=mars3d__namespace['LngLatPoint'],register=mars3d__namespace['GraphicUtil']['register'],ArcFrustum=mars3d__namespace['graphic'][_0x386a36(0x1be)],_mars3d$PointUtil=mars3d__namespace['PointUtil'],addPositionsHeight=_mars3d$PointUtil[_0x386a36(0x146)],getOnLinePointByLen=_mars3d$PointUtil['getOnLinePointByLen'],DEF_STYLE={'angle':0x3c,'angle2':0x2d,'radius':0x1,'showFrustum':![]},ConeVisibility=function(_0xf5addc){var _0xdeccb6=_0x386a36;_inherits(_0x51f564,_0xf5addc);var _0x3fa5c8=_createSuper(_0x51f564);function _0x51f564(){var _0x23ce3c=_0x4dbc,_0x792877,_0x1c4da0=arguments[_0x23ce3c(0x117)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{},_0x1cf3f7=arguments[_0x23ce3c(0x117)]>0x1&&arguments[0x1]!==undefined?arguments[0x1]:!![];return _classCallCheck(this,_0x51f564),_0x1cf3f7&&(_0x1c4da0['style']=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x1c4da0['style']||{})),_0x792877=_0x3fa5c8['call'](this,_0x1c4da0),_0x792877['_visibility_type']=0x2,_0x792877;}return _createClass(_0x51f564,[{'key':'angle','get':function _0x4f984e(){var _0x39a002=_0x4dbc;return this[_0x39a002(0x145)]['angle'];},'set':function _0x43e951(_0x482fc6){this['style']['angle']=_0x482fc6,this['_updateDraw']();}},{'key':'angle2','get':function _0x2a68a0(){var _0x1c0929=_0x4dbc,_0x3b9bc3;return(_0x3b9bc3=this[_0x1c0929(0x145)]['angle2'])!==null&&_0x3b9bc3!==void 0x0?_0x3b9bc3:this['style']['angle'];},'set':function _0x15bb51(_0x11ab3d){var _0x4aeca0=_0x4dbc;this['style']['angle2']=_0x11ab3d,this[_0x4aeca0(0x15e)]();}},{'key':'targetPosition','get':function _0x205e49(){return this['options']['targetPosition'];},'set':function _0x4f6016(_0x15ac4f){var _0x48da87=_0x4dbc,_0x1f46cd;this['options'][_0x48da87(0x15d)]=_0x15ac4f;if(!this['_map'])return;var _0xa2b14d=this['position'];if(!_0xa2b14d)return;var _0x4af12f=LngLatPoint['toCartesian'](_0x15ac4f,(_0x1f46cd=this[_0x48da87(0x196)])===null||_0x1f46cd===void 0x0?void 0x0:_0x1f46cd['currentTime']);this['style'][_0x48da87(0xb8)]=Cesium[_0x48da87(0x17e)]['distance'](_0xa2b14d,_0x4af12f);var _0x55615d=Cesium['Cartesian3']['normalize'](Cesium[_0x48da87(0x17e)]['subtract'](_0x4af12f,_0xa2b14d,new Cesium[(_0x48da87(0x17e))]()),new Cesium['Cartesian3']()),_0x4ae39d=Cesium[_0x48da87(0x17e)][_0x48da87(0xbf)](_0xa2b14d,new Cesium['Cartesian3']()),_0xa4961=new Cesium['Camera'](this[_0x48da87(0x196)]['scene']);_0xa4961[_0x48da87(0x149)]=_0xa2b14d,_0xa4961['direction']=_0x55615d,_0xa4961['up']=_0x4ae39d,this[_0x48da87(0x145)]['heading']=Cesium['Math'][_0x48da87(0x1d5)](_0xa4961['heading']),this['style']['pitch']=Cesium[_0x48da87(0x180)]['toDegrees'](_0xa4961['pitch']),this['_shadowMap']=this['_createShadowMap'](),this['_position']&&this[_0x48da87(0xfa)](),this[_0x48da87(0x15e)]();}},{'key':'_mountedHook','value':function _0x5b8c55(){var _0x234a3b=_0x4dbc;this['options']['targetPosition']&&(this['targetPosition']=this['options'][_0x234a3b(0x15d)]),_get(_getPrototypeOf(_0x51f564['prototype']),_0x234a3b(0x1e2),this)['call'](this);}},{'key':'_updatePositionsHook','value':function _0xde8d73(){var _0x54282e=_0x4dbc,_0x33a159=this['_position'];if(this[_0x54282e(0x85)]&&_0x33a159){var _0x2e5509=this['getAddHeight']();_0x2e5509!==0x0&&(_0x33a159=addPositionsHeight(_0x33a159,_0x2e5509));this['_camera'][_0x54282e(0x149)]=_0x33a159,this[_0x54282e(0x85)]['frustum'][_0x54282e(0x82)]=Cesium['Math'][_0x54282e(0x1c4)](this[_0x54282e(0x132)]*0x2),this['_camera']['frustum']['aspectRatio']=this[_0x54282e(0x132)]/this['angle2'],this[_0x54282e(0x85)][_0x54282e(0x112)]['far']=this['style']['radius'];var _0x5179ba=new Cesium[(_0x54282e(0x11f))](Cesium['Math']['toRadians'](this['heading']),Cesium['Math']['toRadians'](this['pitch']),Cesium['Math']['toRadians'](this['roll']));this['_camera']['setView']({'destination':_0x33a159,'orientation':{'heading':_0x5179ba['heading'],'pitch':_0x5179ba['pitch'],'roll':_0x5179ba['roll']}});}}},{'key':_0xdeccb6(0x1d8),'value':function _0x147de6(){var _0x3804b7=_0xdeccb6,_0x4e2597;return this['_camera']=new Cesium[(_0x3804b7(0x152))](this[_0x3804b7(0x196)]['scene']),this[_0x3804b7(0x85)][_0x3804b7(0x112)]['aspectRatio']=this['angle']/this['angle2'],this[_0x3804b7(0x85)]['frustum']['fov']=Cesium['Math']['toRadians'](this['angle']*0x2),this['_camera']['frustum'][_0x3804b7(0x19d)]=0.01,this['_camera']['frustum']['far']=this['style']['radius'],new Cesium['ShadowMap']({'lightCamera':this['_camera'],'enable':![],'darkness':0x1,'isPointLight':![],'isSpotLight':!![],'cascadesEnabled':![],'context':this[_0x3804b7(0x196)]['scene']['context'],'pointLightRadius':this[_0x3804b7(0x145)][_0x3804b7(0xb8)],'fromLightSource':![],'depthBiasStep':(_0x4e2597=this['options']['depthBiasStep'])!==null&&_0x4e2597!==void 0x0?_0x4e2597:0x64});}},{'key':_0xdeccb6(0x1b4),'value':function _0x39f353(){var _0x216b1c=_0xdeccb6;this['_outlineFrustumGraphic']&&(this['_layer']['removeGraphic'](this['_outlineFrustumGraphic'],!![]),delete this['_outlineFrustumGraphic']);if(!this['position']||!this[_0x216b1c(0x145)]['showFrustum'])return;this[_0x216b1c(0x7b)]=new ArcFrustum({'modelMatrix':this['_camera']['inverseViewMatrix'],'style':{'angle':this['angle'],'angle2':this['angle2'],'distance':this['style'][_0x216b1c(0xb8)]+0x1},'show':this[_0x216b1c(0x145)][_0x216b1c(0x131)]&&this[_0x216b1c(0xb6)],'private':!![]}),this['_layer']['addGraphic'](this[_0x216b1c(0x7b)]);}},{'key':'_updateMouseDraw','value':function _0x3daf5e(_0x3ee218){var _0x583d75=_0xdeccb6,_0xaada76=Cesium['Cartesian3']['distance'](this['position'],_0x3ee218);_0xaada76>this['_maximumDistance']&&(_0x3ee218=getOnLinePointByLen(this[_0x583d75(0x149)],_0x3ee218,this['_maximumDistance'])),this[_0x583d75(0x15d)]=_0x3ee218,this['_shadowMap']=this['_createShadowMap'](),this['_position']&&this['_updatePositionsHook']();}}]),_0x51f564;}(PointVisibility);register(_0x386a36(0x1ba),ConeVisibility,!![]);var next={'__proto__':null,'PointLight':PointLight,'SpotLight':SpotLight,'VolumeCloud':VolumeCloud,'PointVisibility':PointVisibility,'ConeVisibility':ConeVisibility};mars3d__namespace['next']=next;
}));
