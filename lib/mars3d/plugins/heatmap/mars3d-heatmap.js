/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.16
 * 编译日期：2022-07-04 14:09:10
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x1546ab=_0xf196;(function(_0x4db799,_0x3487e7){var _0x304e3b=_0xf196,_0x54c4db=_0x4db799();while(!![]){try{var _0x3ff6fa=parseInt(_0x304e3b(0x161))/0x1*(-parseInt(_0x304e3b(0x111))/0x2)+-parseInt(_0x304e3b(0x174))/0x3*(parseInt(_0x304e3b(0x109))/0x4)+parseInt(_0x304e3b(0x124))/0x5*(-parseInt(_0x304e3b(0x118))/0x6)+-parseInt(_0x304e3b(0x11e))/0x7*(parseInt(_0x304e3b(0x17f))/0x8)+-parseInt(_0x304e3b(0x142))/0x9+-parseInt(_0x304e3b(0x150))/0xa+-parseInt(_0x304e3b(0x136))/0xb*(-parseInt(_0x304e3b(0x178))/0xc);if(_0x3ff6fa===_0x3487e7)break;else _0x54c4db['push'](_0x54c4db['shift']());}catch(_0x204bf6){_0x54c4db['push'](_0x54c4db['shift']());}}}(_0x3814,0x413a0));function _interopNamespace(_0x3253ba){var _0x254bd7=_0xf196;if(_0x3253ba&&_0x3253ba['__esModule'])return _0x3253ba;var _0x17438c=Object[_0x254bd7(0x176)](null);return _0x3253ba&&Object[_0x254bd7(0x10e)](_0x3253ba)[_0x254bd7(0x149)](function(_0x17f348){var _0x5456fe=_0x254bd7;if(_0x17f348!=='default'){var _0x3f632e=Object[_0x5456fe(0x18c)](_0x3253ba,_0x17f348);Object[_0x5456fe(0x112)](_0x17438c,_0x17f348,_0x3f632e[_0x5456fe(0x140)]?_0x3f632e:{'enumerable':!![],'get':function(){return _0x3253ba[_0x17f348];}});}}),_0x17438c[_0x254bd7(0x188)]=_0x3253ba,_0x17438c;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x53baa9,_0xedd010){var _0x5b92aa=_0xf196,_0x1563ed=Object[_0x5b92aa(0x10e)](_0x53baa9);if(Object['getOwnPropertySymbols']){var _0x40c5c0=Object[_0x5b92aa(0xef)](_0x53baa9);_0xedd010&&(_0x40c5c0=_0x40c5c0[_0x5b92aa(0xf5)](function(_0x3234e3){var _0x4cfff4=_0x5b92aa;return Object[_0x4cfff4(0x18c)](_0x53baa9,_0x3234e3)[_0x4cfff4(0xff)];})),_0x1563ed[_0x5b92aa(0x11b)][_0x5b92aa(0x11f)](_0x1563ed,_0x40c5c0);}return _0x1563ed;}function _objectSpread2(_0x173419){var _0xe7a8f9=_0xf196;for(var _0x1ce799=0x1;_0x1ce799<arguments[_0xe7a8f9(0x141)];_0x1ce799++){var _0xdaf837=null!=arguments[_0x1ce799]?arguments[_0x1ce799]:{};_0x1ce799%0x2?ownKeys(Object(_0xdaf837),!0x0)[_0xe7a8f9(0x149)](function(_0x530598){_defineProperty(_0x173419,_0x530598,_0xdaf837[_0x530598]);}):Object[_0xe7a8f9(0xee)]?Object['defineProperties'](_0x173419,Object['getOwnPropertyDescriptors'](_0xdaf837)):ownKeys(Object(_0xdaf837))[_0xe7a8f9(0x149)](function(_0x5d0538){var _0x4d86af=_0xe7a8f9;Object[_0x4d86af(0x112)](_0x173419,_0x5d0538,Object['getOwnPropertyDescriptor'](_0xdaf837,_0x5d0538));});}return _0x173419;}function _classCallCheck(_0x291fb6,_0x389d54){var _0xabc820=_0xf196;if(!(_0x291fb6 instanceof _0x389d54))throw new TypeError(_0xabc820(0x14f));}function _defineProperties(_0x18539a,_0x327178){var _0x3bd1cb=_0xf196;for(var _0x5ea699=0x0;_0x5ea699<_0x327178[_0x3bd1cb(0x141)];_0x5ea699++){var _0x536545=_0x327178[_0x5ea699];_0x536545[_0x3bd1cb(0xff)]=_0x536545[_0x3bd1cb(0xff)]||![],_0x536545[_0x3bd1cb(0x172)]=!![];if('value'in _0x536545)_0x536545['writable']=!![];Object['defineProperty'](_0x18539a,_0x536545['key'],_0x536545);}}function _createClass(_0x1485a9,_0xd86edf,_0x3d7cf2){var _0x3a319c=_0xf196;if(_0xd86edf)_defineProperties(_0x1485a9[_0x3a319c(0x156)],_0xd86edf);if(_0x3d7cf2)_defineProperties(_0x1485a9,_0x3d7cf2);return Object[_0x3a319c(0x112)](_0x1485a9,_0x3a319c(0x156),{'writable':![]}),_0x1485a9;}function _defineProperty(_0x562918,_0x2a392e,_0x400605){var _0x52edad=_0xf196;return _0x2a392e in _0x562918?Object[_0x52edad(0x112)](_0x562918,_0x2a392e,{'value':_0x400605,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x562918[_0x2a392e]=_0x400605,_0x562918;}function _inherits(_0x45c39c,_0x395ed7){var _0x53bef2=_0xf196;if(typeof _0x395ed7!==_0x53bef2(0x15e)&&_0x395ed7!==null)throw new TypeError(_0x53bef2(0x16e));_0x45c39c[_0x53bef2(0x156)]=Object[_0x53bef2(0x176)](_0x395ed7&&_0x395ed7[_0x53bef2(0x156)],{'constructor':{'value':_0x45c39c,'writable':!![],'configurable':!![]}}),Object[_0x53bef2(0x112)](_0x45c39c,_0x53bef2(0x156),{'writable':![]});if(_0x395ed7)_setPrototypeOf(_0x45c39c,_0x395ed7);}function _getPrototypeOf(_0x597993){var _0x493bab=_0xf196;return _getPrototypeOf=Object[_0x493bab(0x127)]?Object[_0x493bab(0x17e)]:function _0x3a924d(_0x458d34){var _0x3ec926=_0x493bab;return _0x458d34[_0x3ec926(0x101)]||Object[_0x3ec926(0x17e)](_0x458d34);},_getPrototypeOf(_0x597993);}function _setPrototypeOf(_0x5e7120,_0x5163b2){var _0x3fb750=_0xf196;return _setPrototypeOf=Object[_0x3fb750(0x127)]||function _0x3f84cf(_0x3818b4,_0x1ece3c){return _0x3818b4['__proto__']=_0x1ece3c,_0x3818b4;},_setPrototypeOf(_0x5e7120,_0x5163b2);}function _isNativeReflectConstruct(){var _0x1d20dc=_0xf196;if(typeof Reflect===_0x1d20dc(0x10b)||!Reflect[_0x1d20dc(0x14c)])return![];if(Reflect[_0x1d20dc(0x14c)][_0x1d20dc(0x10f)])return![];if(typeof Proxy===_0x1d20dc(0x15e))return!![];try{return Boolean[_0x1d20dc(0x156)][_0x1d20dc(0xf0)][_0x1d20dc(0xf9)](Reflect[_0x1d20dc(0x14c)](Boolean,[],function(){})),!![];}catch(_0x590002){return![];}}function _assertThisInitialized(_0x25e30c){var _0x50db2b=_0xf196;if(_0x25e30c===void 0x0)throw new ReferenceError(_0x50db2b(0x125));return _0x25e30c;}function _possibleConstructorReturn(_0x598553,_0x539991){var _0x4a90ef=_0xf196;if(_0x539991&&(typeof _0x539991===_0x4a90ef(0x15c)||typeof _0x539991===_0x4a90ef(0x15e)))return _0x539991;else{if(_0x539991!==void 0x0)throw new TypeError(_0x4a90ef(0x114));}return _assertThisInitialized(_0x598553);}function _createSuper(_0x42892a){var _0x319db7=_isNativeReflectConstruct();return function _0xb5de9c(){var _0x318ad3=_0xf196,_0x5626ca=_getPrototypeOf(_0x42892a),_0x6fea84;if(_0x319db7){var _0x3b528c=_getPrototypeOf(this)['constructor'];_0x6fea84=Reflect[_0x318ad3(0x14c)](_0x5626ca,arguments,_0x3b528c);}else _0x6fea84=_0x5626ca[_0x318ad3(0x11f)](this,arguments);return _possibleConstructorReturn(this,_0x6fea84);};}var HeatMaterial='uniform\x20sampler2D\x20image;\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput){\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture2D(image,st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0)){\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!h337__namespace['create'])throw new Error(_0x1546ab(0x185));var Cesium=mars3d__namespace[_0x1546ab(0x14d)],BaseLayer=mars3d__namespace[_0x1546ab(0x14e)][_0x1546ab(0x103)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x1546ab(0x122),0.6:_0x1546ab(0x153),0.8:'yellow',0.9:_0x1546ab(0x164)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x1546ab(0x148)][_0x1546ab(0x173)]},HeatLayer=function(_0x5f2cfc){var _0x228af2=_0x1546ab;_inherits(_0x5cdf6c,_0x5f2cfc);var _0x136c0c=_createSuper(_0x5cdf6c);function _0x5cdf6c(){var _0x5b1a2a=_0xf196,_0x112e5a,_0x8b2a5d=arguments[_0x5b1a2a(0x141)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x5cdf6c),_0x112e5a=_0x136c0c[_0x5b1a2a(0xf9)](this,_0x8b2a5d),_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x184)]=Cesium[_0x5b1a2a(0x11c)](_0x112e5a[_0x5b1a2a(0x183)]['maxCanvasSize'],document[_0x5b1a2a(0x15d)][_0x5b1a2a(0xf1)]),_0x112e5a['options'][_0x5b1a2a(0x184)]=Math[_0x5b1a2a(0x139)](_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x184)],0x1388),_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x146)]=Cesium[_0x5b1a2a(0x11c)](_0x112e5a[_0x5b1a2a(0x183)]['minCanvasSize'],document['body'][_0x5b1a2a(0x186)]),_0x112e5a['options']['minCanvasSize']=Math[_0x5b1a2a(0x16c)](_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x146)],0x2bc),_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x117)]=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x117)]||{}),_0x112e5a[_0x5b1a2a(0x183)][_0x5b1a2a(0x123)]=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x112e5a['options'][_0x5b1a2a(0x123)]||{}),_0x112e5a;}return _createClass(_0x5cdf6c,[{'key':_0x228af2(0x14e),'get':function _0x1f5d94(){var _0x201958=_0x228af2;return this[_0x201958(0x11a)];}},{'key':_0x228af2(0x117),'get':function _0x52696c(){var _0x36a660=_0x228af2;return this['options'][_0x36a660(0x117)];},'set':function _0x23b897(_0x523158){var _0x544b56=_0x228af2;this['options'][_0x544b56(0x117)]=mars3d__namespace['Util'][_0x544b56(0x16f)](this[_0x544b56(0x183)][_0x544b56(0x117)],_0x523158),this[_0x544b56(0x126)]&&(this[_0x544b56(0x126)][_0x544b56(0x128)](this[_0x544b56(0x183)]['heatStyle']),this[_0x544b56(0x12e)](!![]));}},{'key':_0x228af2(0x123),'get':function _0x1f2537(){var _0x4abb31=_0x228af2;return this[_0x4abb31(0x183)][_0x4abb31(0x123)];},'set':function _0xeb1f5d(_0x2971b9){var _0x537007=_0x228af2;this[_0x537007(0x183)]['style']=mars3d__namespace[_0x537007(0xf8)][_0x537007(0x16f)](this[_0x537007(0x183)][_0x537007(0x123)],_0x2971b9);}},{'key':'positions','get':function _0x4e8211(){var _0x5621be=_0x228af2;return this[_0x5621be(0x121)];},'set':function _0x3983d3(_0x4921ed){var _0x51cf79=_0x228af2;this[_0x51cf79(0x16b)](_0x4921ed);}},{'key':_0x228af2(0x157),'get':function _0x79b429(){var _0xbfcb9e=_0x228af2,_0x3fae41=[];return this[_0xbfcb9e(0xf2)][_0xbfcb9e(0x149)](function(_0x46d2fe){var _0x2a966d=_0xbfcb9e;_0x3fae41[_0x2a966d(0x11b)](_0x46d2fe['toArray']());}),_0x3fae41;}},{'key':_0x228af2(0x160),'get':function _0x1fec85(){return this['_rectangle'];}},{'key':_0x228af2(0x171),'value':function _0xd1bb25(_0x1e5291){var _0x30020c=_0x228af2;_0x1e5291['positions']&&(this[_0x30020c(0x18d)]=_0x1e5291['positions']);}},{'key':_0x228af2(0x10d),'value':function _0x3971d5(){var _0x3dbce9=_0x228af2;this['_layer']=new mars3d__namespace[(_0x3dbce9(0x14e))][(_0x3dbce9(0x12d))]({'noLayerManage':!![]}),this[_0x3dbce9(0x11a)]['_mars3d_private']=!![];}},{'key':_0x228af2(0x105),'value':function _0x645f1a(){var _0x2108a1=_0x228af2;this[_0x2108a1(0x170)][_0x2108a1(0xfc)](this[_0x2108a1(0x11a)]),this['options'][_0x2108a1(0x18d)]&&(this[_0x2108a1(0x18d)]=this[_0x2108a1(0x183)]['positions']),this[_0x2108a1(0x183)][_0x2108a1(0x15b)]&&this[_0x2108a1(0x152)]();}},{'key':_0x228af2(0xfa),'value':function _0x1938dd(){var _0x4081e5=_0x228af2;this[_0x4081e5(0x117)]['container']&&(mars3d__namespace[_0x4081e5(0x119)][_0x4081e5(0x13b)](this[_0x4081e5(0x117)][_0x4081e5(0x189)]),delete this['heatStyle'][_0x4081e5(0x189)]),this[_0x4081e5(0xf3)](),this[_0x4081e5(0x170)][_0x4081e5(0x159)](this[_0x4081e5(0x11a)]);}},{'key':'addPosition','value':function _0x60d358(_0x4cf4e7,_0x328a7a){var _0x541abf=_0x228af2;this[_0x541abf(0x121)]=this['_positions']||[],this[_0x541abf(0x121)][_0x541abf(0x11b)](_0x4cf4e7),this['_updatePositionsHook'](_0x328a7a);}},{'key':_0x228af2(0x16b),'value':function _0x50db25(_0x3fe34b,_0x2ecf4b){var _0x2200b2=_0x228af2;this[_0x2200b2(0x121)]=_0x3fe34b,this[_0x2200b2(0x12e)](_0x2ecf4b);}},{'key':_0x228af2(0xf3),'value':function _0x4c4c04(){var _0x10c6dc=_0x228af2;this['_graphic']&&(this[_0x10c6dc(0x11a)][_0x10c6dc(0x13d)](this[_0x10c6dc(0x16d)],!![]),delete this[_0x10c6dc(0x16d)]);}},{'key':'_updatePositionsHook','value':function _0x198811(_0x3c3bcf){var _0x317766=_0x228af2;if(!this[_0x317766(0x13a)]||!this['_map']||!this['positions']||this['positions']['length']===0x0)return this;var _0x5a03f0=this[_0x317766(0x107)]();return this['style'][_0x317766(0x13f)]?this[_0x317766(0x16d)]&&_0x3c3bcf?(this[_0x317766(0x16d)][_0x317766(0xf7)]['image']=_0x5a03f0,this['_graphic']['uniforms']['bumpMap']=this['_getArcHeatCanvas']()):this[_0x317766(0x133)](_0x5a03f0):this[_0x317766(0x16d)]&&_0x3c3bcf?this[_0x317766(0x16d)][_0x317766(0xf7)]['image']=_0x5a03f0:this[_0x317766(0x13c)](_0x5a03f0),this;}},{'key':_0x228af2(0x13c),'value':function _0x3dc14d(_0x5413c4){var _0x17e13d=_0x228af2;this[_0x17e13d(0xf3)](),this['_graphic']=new mars3d__namespace[(_0x17e13d(0x110))][(_0x17e13d(0x16a))](_objectSpread2(_objectSpread2({},this[_0x17e13d(0x183)]),{},{'rectangle':this[_0x17e13d(0x17b)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium['Material']({'fabric':{'uniforms':{'image':_0x5413c4},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this[_0x17e13d(0x11a)][_0x17e13d(0x17c)](this['_graphic']);}},{'key':'_createArcGraphic','value':function _0x1eadb2(_0x262484){var _0x118d56=_0x228af2;this['clear']();var _0x585e42=Cesium[_0x118d56(0x14a)][_0x118d56(0xed)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x118d56(0x18b)]['ALWAYS'],'frontOperation':{'fail':Cesium[_0x118d56(0x12c)][_0x118d56(0x147)],'zFail':Cesium[_0x118d56(0x12c)][_0x118d56(0x147)],'zPass':Cesium[_0x118d56(0x12c)][_0x118d56(0x158)]},'backFunction':Cesium[_0x118d56(0x18b)][_0x118d56(0x134)],'backOperation':{'fail':Cesium[_0x118d56(0x12c)][_0x118d56(0x147)],'zFail':Cesium[_0x118d56(0x12c)][_0x118d56(0x147)],'zPass':Cesium[_0x118d56(0x12c)]['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium[_0x118d56(0x144)][_0x118d56(0x102)]}),_0x1feb33=Math[_0x118d56(0x18f)](Cesium[_0x118d56(0x11c)](this[_0x118d56(0x123)][_0x118d56(0x162)],this[_0x118d56(0x14b)]*0.02))+0.1;this[_0x118d56(0x123)]['diffHeight']&&delete this['style'][_0x118d56(0x162)];var _0x35ff83=Cesium[_0x118d56(0x11c)](this[_0x118d56(0x123)][_0x118d56(0xfd)],0x64),_0x365d49=Math['max'](this[_0x118d56(0x17b)]['height'],this[_0x118d56(0x17b)][_0x118d56(0x165)]);this[_0x118d56(0x123)][_0x118d56(0x182)]=_0x365d49/=_0x35ff83,this[_0x118d56(0x16d)]=new mars3d__namespace[(_0x118d56(0x110))][(_0x118d56(0x16a))](_objectSpread2(_objectSpread2({},this[_0x118d56(0x183)]),{},{'rectangle':this[_0x118d56(0x17b)],'appearance':new Cesium[(_0x118d56(0x148))]({'aboveGround':!![],'renderState':_0x585e42,'material':new Cesium[(_0x118d56(0x15f))]({'fabric':{'uniforms':{'image':_0x262484,'repeat':new Cesium[(_0x118d56(0xfb))](0x1,0x1),'color':new Cesium[(_0x118d56(0x108))](0x1,0x1,0x1,0.01),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':_0x118d56(0x13e)[_0x118d56(0x12b)](_0x1feb33,_0x118d56(0x180)),'flat':!![]})})),this[_0x118d56(0x11a)]['addGraphic'](this[_0x118d56(0x16d)]);}},{'key':_0x228af2(0x18a),'value':function _0x3db9c2(_0x5eccab){var _0x26020a=_0x228af2;return _0x5eccab!==null&&_0x5eccab!==void 0x0&&_0x5eccab[_0x26020a(0x179)]&&this[_0x26020a(0x17b)]?mars3d__namespace[_0x26020a(0x167)][_0x26020a(0x155)](this[_0x26020a(0x17b)]):this[_0x26020a(0x17b)];}},{'key':_0x228af2(0x107),'value':function _0x2970f4(){var _0x3a589e=_0x228af2,_0x19022b=this,_0x349d9e,_0x558c28,_0x325821=this[_0x3a589e(0x121)],_0x43ddfd=[],_0x390038,_0x18b22e,_0x197685,_0x5d8f15;_0x325821[_0x3a589e(0x149)](function(_0x342df4){var _0x51d873=_0x3a589e,_0x3467f9=mars3d__namespace[_0x51d873(0x145)]['parse'](_0x342df4);if(!_0x3467f9)return;_0x3467f9['value']=_0x342df4[_0x51d873(0xf4)]||0x1,!_0x19022b[_0x51d873(0x183)]['rectangle']&&(_0x390038===undefined?(_0x390038=_0x3467f9[_0x51d873(0x106)],_0x18b22e=_0x3467f9[_0x51d873(0x106)],_0x197685=_0x3467f9[_0x51d873(0xf6)],_0x5d8f15=_0x3467f9['lat']):(_0x390038=Math['min'](_0x390038,_0x3467f9[_0x51d873(0x106)]),_0x18b22e=Math[_0x51d873(0x16c)](_0x18b22e,_0x3467f9[_0x51d873(0x106)]),_0x197685=Math['min'](_0x197685,_0x3467f9[_0x51d873(0xf6)]),_0x5d8f15=Math[_0x51d873(0x16c)](_0x5d8f15,_0x3467f9[_0x51d873(0xf6)]))),_0x43ddfd[_0x51d873(0x11b)](_0x3467f9);});var _0x1229a5=this[_0x3a589e(0x183)][_0x3a589e(0x160)]||{'xmin':_0x390038,'xmax':_0x18b22e,'ymin':_0x197685,'ymax':_0x5d8f15},_0x99fed6=getMercatorBounds(_0x1229a5),_0x4ba2b8=Math['abs'](_0x99fed6['xmax']-_0x99fed6['xmin']),_0x319006=Math['abs'](_0x99fed6['ymax']-_0x99fed6[_0x3a589e(0x166)]),_0x478354=Math[_0x3a589e(0x16c)](_0x4ba2b8,_0x319006),_0x38e950=Math['min'](_0x4ba2b8,_0x319006);this[_0x3a589e(0x14b)]=_0x478354;var _0x3af5d2=0x1;if(_0x478354>this['options'][_0x3a589e(0x184)])_0x3af5d2=_0x478354/this[_0x3a589e(0x183)]['maxCanvasSize'],_0x38e950/_0x3af5d2<this[_0x3a589e(0x183)][_0x3a589e(0x146)]&&(_0x3af5d2=_0x38e950/this[_0x3a589e(0x183)][_0x3a589e(0x146)]);else _0x38e950<this[_0x3a589e(0x183)]['minCanvasSize']&&(_0x3af5d2=_0x38e950/this[_0x3a589e(0x183)]['minCanvasSize'],_0x478354/_0x3af5d2>this['options'][_0x3a589e(0x184)]&&(_0x3af5d2=_0x478354/this[_0x3a589e(0x183)][_0x3a589e(0x184)]));var _0x5823c6=this[_0x3a589e(0x117)][_0x3a589e(0x168)]*1.5,_0x1b3705=_0x4ba2b8/_0x3af5d2+_0x5823c6*0x2,_0x50437f=_0x319006/_0x3af5d2+_0x5823c6*0x2,_0xb50718=_0x5823c6*_0x3af5d2;_0x99fed6[_0x3a589e(0x18e)]-=_0xb50718,_0x99fed6['ymin']-=_0xb50718,_0x99fed6[_0x3a589e(0x154)]+=_0xb50718,_0x99fed6[_0x3a589e(0x12a)]+=_0xb50718,this[_0x3a589e(0xec)]=_0x3af5d2,_0x1229a5=geLatLngBounds(_0x99fed6),this[_0x3a589e(0x17b)]=Cesium['Rectangle'][_0x3a589e(0x17d)](_0x1229a5[_0x3a589e(0x18e)],_0x1229a5[_0x3a589e(0x166)],_0x1229a5[_0x3a589e(0x154)],_0x1229a5[_0x3a589e(0x12a)]);var _0x12a94d=(_0x349d9e=_0x43ddfd[0x0][_0x3a589e(0xf4)])!==null&&_0x349d9e!==void 0x0?_0x349d9e:0x1,_0x2632d9=(_0x558c28=_0x43ddfd[0x0]['value'])!==null&&_0x558c28!==void 0x0?_0x558c28:0x0,_0x472504=[];_0x43ddfd[_0x3a589e(0x149)](function(_0x25d231){var _0x48456a=_0x3a589e,_0x191062=mars3d__namespace[_0x48456a(0x138)][_0x48456a(0x11d)]([_0x25d231[_0x48456a(0x106)],_0x25d231['lat']]),_0x7e05b3=_0x25d231[_0x48456a(0xf4)]||0x1,_0x2a112e=Math[_0x48456a(0x187)]((_0x191062[0x0]-_0x99fed6[_0x48456a(0x18e)])/_0x3af5d2),_0x267956=Math[_0x48456a(0x187)]((_0x99fed6[_0x48456a(0x12a)]-_0x191062[0x1])/_0x3af5d2);_0x12a94d=Math['max'](_0x12a94d,_0x7e05b3),_0x2632d9=Math[_0x48456a(0x139)](_0x2632d9,_0x7e05b3),_0x472504[_0x48456a(0x11b)]({'x':_0x2a112e,'y':_0x267956,'value':_0x7e05b3});});var _0x2b4a32={'min':Cesium[_0x3a589e(0x11c)](this[_0x3a589e(0x183)][_0x3a589e(0x139)],_0x2632d9),'max':Cesium[_0x3a589e(0x11c)](this['options'][_0x3a589e(0x16c)],_0x12a94d),'data':_0x472504};this['_last_heatData']=_0x2b4a32;(!this[_0x3a589e(0x113)]||_0x99fed6[_0x3a589e(0x18e)]!==this['_last_mBounds'][_0x3a589e(0x18e)]||_0x99fed6[_0x3a589e(0x166)]!==this[_0x3a589e(0x113)][_0x3a589e(0x166)]||_0x99fed6[_0x3a589e(0x154)]!==this[_0x3a589e(0x113)][_0x3a589e(0x154)]||_0x99fed6[_0x3a589e(0x12a)]!==this['_last_mBounds'][_0x3a589e(0x12a)])&&(this[_0x3a589e(0x113)]=_0x99fed6,!this[_0x3a589e(0x117)]['container']&&(this[_0x3a589e(0x117)]['container']=mars3d__namespace[_0x3a589e(0x119)][_0x3a589e(0x176)]('div',_0x3a589e(0x163),this[_0x3a589e(0x170)][_0x3a589e(0x189)])),this[_0x3a589e(0x117)][_0x3a589e(0x189)][_0x3a589e(0x123)][_0x3a589e(0x132)]=_0x3a589e(0x115)['concat'](_0x1b3705,'px;height:')[_0x3a589e(0x12b)](_0x50437f,'px;'),!this[_0x3a589e(0x126)]?this[_0x3a589e(0x126)]=h337__namespace[_0x3a589e(0x176)](this[_0x3a589e(0x117)]):this[_0x3a589e(0x126)]['configure'](this[_0x3a589e(0x117)]));this['_heat'][_0x3a589e(0x137)](_0x2b4a32);var _0x3d7d9d=mars3d__namespace['DomUtil'][_0x3a589e(0x104)](this[_0x3a589e(0x126)][_0x3a589e(0x10a)]['canvas']);return _0x3d7d9d;}},{'key':_0x228af2(0xfe),'value':function _0x43feeb(){var _0x4b62f1=_0x228af2;this[_0x4b62f1(0x126)][_0x4b62f1(0x128)]({'radius':this['heatStyle'][_0x4b62f1(0x168)]*this['style']['arcRadiusScale'],'blur':this['heatStyle'][_0x4b62f1(0x116)]*this['style'][_0x4b62f1(0x15a)],'gradient':this[_0x4b62f1(0x117)]['gradientArc']||{0.25:_0x4b62f1(0x181),0.55:_0x4b62f1(0x135),0.85:_0x4b62f1(0x169),0x1:_0x4b62f1(0x100)}});var _0x3c3802=mars3d__namespace[_0x4b62f1(0x119)]['copyCanvas'](this[_0x4b62f1(0x126)][_0x4b62f1(0x10a)]['canvas']);return this['_heat'][_0x4b62f1(0x128)](this['options'][_0x4b62f1(0x117)]),_0x3c3802;}},{'key':'getPointData','value':function _0x1ec52a(_0x4bb163){var _0x39a096=_0x228af2,_0x2f7b2c=mars3d__namespace['LngLatPoint'][_0x39a096(0x175)](_0x4bb163);if(!_0x2f7b2c)return{};var _0x629282=mars3d__namespace[_0x39a096(0x138)]['lonlat2mercator']([_0x2f7b2c[_0x39a096(0x106)],_0x2f7b2c['lat']]),_0x51aff9=this[_0x39a096(0x113)],_0x2221c3=Math[_0x39a096(0x187)]((_0x629282[0x0]-_0x51aff9['xmin'])/this[_0x39a096(0xec)]),_0x14ef36=Math[_0x39a096(0x187)]((_0x51aff9['ymax']-_0x629282[0x1])/this['_scale']),_0x5f4974=this['_heat'][_0x39a096(0x10c)]({'x':_0x2221c3,'y':_0x14ef36}),_0x4fd0f1=this['_heat']['_renderer']['ctx'][_0x39a096(0x120)](_0x2221c3-0x1,_0x14ef36-0x1,0x1,0x1)[_0x39a096(0x12f)];return{'x':_0x2221c3,'y':_0x14ef36,'value':_0x5f4974,'color':_0x39a096(0x151)+_0x4fd0f1[0x0]+','+_0x4fd0f1[0x1]+','+_0x4fd0f1[0x2]+','+_0x4fd0f1[0x3]+')'};}}]),_0x5cdf6c;}(BaseLayer);mars3d__namespace[_0x1546ab(0x14e)]['HeatLayer']=HeatLayer,mars3d__namespace[_0x1546ab(0x131)][_0x1546ab(0x130)](_0x1546ab(0x129),HeatLayer);function getMercatorBounds(_0xa173aa){var _0x1e4750=_0x1546ab,_0x1074db=mars3d__namespace[_0x1e4750(0x138)][_0x1e4750(0x11d)]([_0xa173aa[_0x1e4750(0x18e)],_0xa173aa[_0x1e4750(0x166)]]),_0x37399b=mars3d__namespace['PointTrans']['lonlat2mercator']([_0xa173aa[_0x1e4750(0x154)],_0xa173aa['ymax']]);return{'xmin':_0x1074db[0x0],'ymin':_0x1074db[0x1],'xmax':_0x37399b[0x0],'ymax':_0x37399b[0x1]};}function _0xf196(_0x56ff4c,_0xd6dead){var _0x3814d3=_0x3814();return _0xf196=function(_0xf1969c,_0xd5ca8b){_0xf1969c=_0xf1969c-0xec;var _0x2a59c2=_0x3814d3[_0xf1969c];if(_0xf196['YsaizL']===undefined){var _0x30da5a=function(_0x3253ba){var _0x17438c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x17f348='',_0x3f632e='';for(var _0x53baa9=0x0,_0xedd010,_0x1563ed,_0x40c5c0=0x0;_0x1563ed=_0x3253ba['charAt'](_0x40c5c0++);~_0x1563ed&&(_0xedd010=_0x53baa9%0x4?_0xedd010*0x40+_0x1563ed:_0x1563ed,_0x53baa9++%0x4)?_0x17f348+=String['fromCharCode'](0xff&_0xedd010>>(-0x2*_0x53baa9&0x6)):0x0){_0x1563ed=_0x17438c['indexOf'](_0x1563ed);}for(var _0x3234e3=0x0,_0x173419=_0x17f348['length'];_0x3234e3<_0x173419;_0x3234e3++){_0x3f632e+='%'+('00'+_0x17f348['charCodeAt'](_0x3234e3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3f632e);};_0xf196['BRvQTL']=_0x30da5a,_0x56ff4c=arguments,_0xf196['YsaizL']=!![];}var _0x2c5fc=_0x3814d3[0x0],_0x285427=_0xf1969c+_0x2c5fc,_0x4df0f2=_0x56ff4c[_0x285427];return!_0x4df0f2?(_0x2a59c2=_0xf196['BRvQTL'](_0x2a59c2),_0x56ff4c[_0x285427]=_0x2a59c2):_0x2a59c2=_0x4df0f2,_0x2a59c2;},_0xf196(_0x56ff4c,_0xd6dead);}function _0x3814(){var _0x5ea0c8=['x3vWzgf0zvbVC2L0Aw9UC0HVB2S','zgf0yq','CMvNAxn0zxi','tgf5zxjvDgLS','y3nZvgv4Da','x2nYzwf0zufYy0DYyxbOAwm','quXxqvLt','CMDIkde0mcWXndaSmtqWkq','mtfrs0nKquy','C2v0rgf0yq','ug9PBNruCMfUCW','BwLU','C2HVDW','CMvTB3zL','x2nYzwf0zuDYyxbOAwm','CMvTB3zLr3jHCgHPyW','yxr0CMLIDxrLihzLyZmGCg9ZAxrPB24ZreHPz2G7cIaGicaGicaGicbHDhrYAwj1DguGDMvJmYbWB3nPDgLVBJnetg93oWOGicaGicaGicaGyxr0CMLIDxrLihzLyZiGC3q7cIaGicaGicaGicbHDhrYAwj1DguGzMXVyxqGyMf0y2HjzdSkicaGicaGicaGihvUAwzVCM0GC2fTCgXLCJjeigj1BxbnyxbFmZSkicaGicaGicaGihzHCNLPBMCGDMvJmYb2x3bVC2L0Aw9Utum7cIaGicaGicaGicb2yxj5Aw5NihzLyZmGDL9WB3nPDgLVBKvdoWOGicaGicaGicaGDMfYEwLUzYb2zwmYihzFC3q7cGOGicaGicaGicaGDM9PzcbTywLUkcKkicaGicaGicaGihSkicaGicaGicaGicaGDMvJncbWid0Gy3PTx2nVBxb1DgvqB3nPDgLVBIGPoWOGicaGicaGicaGicb2x3bVC2L0Aw9UtumGpsbWB3nPDgLVBJnesgLNAcaRihbVC2L0Aw9Um0rmB3C7cIaGicaGicaGicaGihzFCg9ZAxrPB25fqYa9icHJEM1FBw9KzwXwAwv3uMvSyxrPDMvuB0v5zsaQihaPlNH5EJSkicaGicaGicaGicaGDL9ZDca9ihn0oWOGicaGicaGicaGicb2zwm0ignVBg9Yid0GDgv4DhvYztjekgj1BxbnyxbFmYWGDL9ZDcK7cIaGicaGicaGicaGigzSB2f0ignLBNrLCKj1BxaGpsbKAxn0yw5JzsH2zwmZkdaUmcKSy29SB3iUCMDIktSkicaGicaGicaGicaGDMvJmYb1CerPCIa9ig5VCM1HBgL6zsH2x3bVC2L0Aw9UtumUEhL6ktSkicaGicaGicaGicaGDMvJmYbKAxnqB3mGpsb1CerPCIaQignLBNrLCKj1BxaGkIa','yxjJ','z2v0','BgvUz3rO','mtK0mta1n2XOAhj5zW','sgvHDeXHEwvY','qMXLBMrPBMDtDgf0zq','tg5Ntgf0ug9PBNq','BwLUq2fUDMfZu2L6zq','s0vfua','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','zM9YrwfJAa','uMvUzgvYu3rHDgu','x21cB3vUzhnnyxG','y29UC3rYDwn0','q2vZAxvT','Bgf5zxi','q2fUBM90ignHBgWGysbJBgfZCYbHCYbHigz1BMn0Aw9U','ndC5mde0mgjgA0DdAG','CMDIysG','zMX5vg9cEufUAw1HDgLVBKvUza','z3jLzw4','Eg1HEa','zM9YBwf0uMvJDgfUz2XL','ChjVDg90ExbL','y29VCMrPBMf0zxm','uKvqtefdrq','CMvTB3zLtgf5zxi','yxjJqMX1CLnJywXL','zMX5vg8','B2jQzwn0','yM9KEq','zNvUy3rPB24','twf0zxjPywW','CMvJDgfUz2XL','mw5Atwz4Eq','zgLMzKHLAwDODa','BwfYCZnKlwHLyxrTyxaGBwfYCZnKlwHPzgveAxy','CMvK','D2LKDgG','Ew1PBG','ug9SEvv0AwW','CMfKAxvZ','CMDIkdiXnIWYmtySmJe2kq','uMvJDgfUz2XLuhjPBwL0AxzL','C2v0ug9ZAxrPB25Z','Bwf4','x2DYyxbOAwm','u3vWzxiGzxHWCMvZC2LVBIbTDxn0igvPDgHLCIbIzsbUDwXSig9YigeGzNvUy3rPB24','BwvYz2u','x21HCa','x3nLDe9WDgLVBNniB29R','y29UzMLNDxjHyMXL','vKvsvevyx0zpuK1bva','mtv1wM5uCfa','CgfYC2u','y3jLyxrL','x19LC01VzhvSzq','mJi3ndy4nZzkveXewNq','AxngB3jTyxq','BwvYy2f0B3iYBg9UBgf0','x3jLy3rHBMDSzq','ywrKr3jHCgHPyW','zNjVBurLz3jLzxm','z2v0uhjVDg90ExbLt2y','mtm2nZjnCNvjDeS','oWOGicaGicaGicaGicbWicS9DMvJncHKAxnqB3mSmc4WktSkicaGicaGicaGicaGz2XFug9ZAxrPB24GpsbJEM1FBw9KzwXwAwv3uhjVAMvJDgLVBLjLBgf0AxzLvg9fEwuGkIbWoWOGicaGicaGicaGFqOGicaGicaGia','CMDIkdaSmcWWkq','z3jHBNvSyxjPDhK','B3b0Aw9UCW','Bwf4q2fUDMfZu2L6zq','6k+35BYv5ywLigHLyxrTyxaUANmG5BQtia','y2XPzw50sgvPz2H0','CM91BMq','zgvMyxvSDa','y29UDgfPBMvY','z2v0uMvJDgfUz2XL','u3rLBMnPBez1BMn0Aw9U','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','Cg9ZAxrPB25Z','Eg1PBG','zMXVB3i','x3nJywXL','zNjVBunHy2HL','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','z2v0t3DUuhjVCgvYDhLtEw1IB2XZ','DMfSDwvpzG','y2XPzw50v2LKDgG','Cg9PBNrZ','y2XLyxi','DMfSDwu','zMLSDgvY','Bgf0','Dw5PzM9YBxm','vxrPBa','y2fSBa','x3jLBw92zwriB29R','q2fYDgvZAwfUmG','ywrKtgf5zxi','C3bSAxroDw0','x2DLDefYy0HLyxrdyw52yxm','zw51BwvYywjSzq','CMDIkdi1nsWYntuSmJu1kq','x19WCM90B19F','quXqsefFqKXftKq','qMfZzuXHEwvY','y29WEunHBNzHCW','x2fKzgvKsg9VAW','Bg5N','x2DLDeHLyxrdyw52yxm','q29SB3i','mZq0mda4teH1twDo','x3jLBMrLCMvY','Dw5KzwzPBMvK','z2v0vMfSDwvbDa','x21VDw50zwriB29R','A2v5CW','C2HHBq','z3jHCgHPyW','mJq2mti0CuvOs0ru','zgvMAw5LuhjVCgvYDhK','x2XHC3rFBujVDw5KCW','rgvYAxzLzcbJB25ZDhj1y3rVCNmGBwf5ig9UBhKGCMv0DxjUig9IAMvJDcbVCIb1BMrLzMLUzwq','D2LKDgG6','yMX1CG','AgvHDfn0EwXL','nML2sMvewq','rg9TvxrPBa','x2XHEwvY','ChvZAa','zgvMyxvSDfzHBhvL','Bg9UBgf0mM1LCMnHDg9Y','otfVzuXJy0S','yxbWBhK','z2v0sw1Hz2veyxrH','x3bVC2L0Aw9UCW','yMX1zq','C3r5Bgu','mtC5mJe0nu9etfziAq','DgHPCYbOyxnUj3qGyMvLBIbPBML0AwfSAxnLzcaTihn1CgvYkcKGAgfZBID0igjLzw4Gy2fSBgvK','x2HLyxq','C2v0uhjVDg90ExbLt2y','y29UzMLNDxjL','AgvHDa','Ew1HEa','y29Uy2f0','u3rLBMnPBe9WzxjHDgLVBG','r3jHCgHPy0XHEwvY'];_0x3814=function(){return _0x5ea0c8;};return _0x3814();}function geLatLngBounds(_0x137aa4){var _0x4e9a39=_0x1546ab,_0x7a99a0=mars3d__namespace[_0x4e9a39(0x138)]['mercator2lonlat']([_0x137aa4[_0x4e9a39(0x18e)],_0x137aa4['ymin']]),_0x2e8cc6=mars3d__namespace[_0x4e9a39(0x138)][_0x4e9a39(0x17a)]([_0x137aa4[_0x4e9a39(0x154)],_0x137aa4[_0x4e9a39(0x12a)]]);return{'xmin':_0x7a99a0[0x0],'ymin':_0x7a99a0[0x1],'xmax':_0x2e8cc6[0x0],'ymax':_0x2e8cc6[0x1]};}exports[_0x1546ab(0x143)]=HeatLayer,Object['defineProperty'](exports,_0x1546ab(0x177),{'value':!![]});
}));
